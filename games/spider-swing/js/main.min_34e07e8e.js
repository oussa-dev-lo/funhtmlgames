function waitAsync(t,e){return new Promise(function(i,a){setTimeout(function(){e&&e(),i()},t)})}function closure(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];return t.apply(null,e.concat(i))}}var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);i.prototype=e.prototype,t.prototype=new i},__awaiter=this&&this.__awaiter||function(t,e,i,a){return new(i||(i=Promise))(function(s,o){function r(t){try{h(a.next(t))}catch(e){o(e)}}function n(t){try{h(a["throw"](t))}catch(e){o(e)}}function h(t){t.done?s(t.value):new i(function(e){e(t.value)}).then(r,n)}h((a=a.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function i(t){return function(e){return a([t,e])}}function a(i){if(s)throw new TypeError("Generator is already executing.");for(;h;)try{if(s=1,o&&(r=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[0,r.value]),i[0]){case 0:case 1:r=i;break;case 4:return h.label++,{value:i[1],done:!1};case 5:h.label++,o=i[1],i=[0];continue;case 7:i=h.ops.pop(),h.trys.pop();continue;default:if(r=h.trys,!(r=r.length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){h=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){h.label=i[1];break}if(6===i[0]&&h.label<r[1]){h.label=r[1],r=i;break}if(r&&h.label<r[2]){h.label=r[2],h.ops.push(i);break}r[2]&&h.ops.pop(),h.trys.pop();continue}i=e.call(t,h)}catch(a){i=[6,a],o=0}finally{s=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var s,o,r,n,h={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return n={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n},Emiter=function(){function t(){this.maps={},this.uid=0,this._duringEmit=!1}return t.prototype.add=function(t,e,i,a,s){i=i||null,a=a||0;var o=this.uid++,r=this.maps[t]||[];return r.push([o,e,i,a,s]),this.maps[t]=r,r.sort(function(t,e){return t[3]<e[3]}),o},t.prototype.on=function(t,e,i,a){return this.add(t,e,i,a,!1)},t.prototype.once=function(t,e,i,a){return this.add(t,e,i,a,!0)},t.prototype.race=function(t,e,i,a){for(var s=this,o=[],r=!1,n=function(t){for(var a=[],n=1;n<arguments.length;n++)a[n-1]=arguments[n];r=!0,o.forEach(function(t){return s.rm(t[0],t[1])}),e.apply(i,[t].concat(a))},h=0,c=t;h<c.length;h++){var l=c[h];if(r)break;o.push([this.once(l,closure(n,l),i,a),l])}},t.prototype.rm=function(t,e){for(var i=e?[e]:Object.keys(this.maps),a=0,s=i;a<s.length;a++){var o=s[a],r=this.maps[o];if(r){this._duringEmit&&(this.maps[o]=r=r.concat());for(var n=0;n<r.length;){var h=r[n],c=h[0];h[1],h[2],h[3],h[4];if(c==t)return r.splice(n,1),!0;n++}}}return!1},t.prototype.rmall=function(t){void 0==t?this.maps={}:delete this.maps[t]},t.prototype.emit=function(e,i){var a=this.maps[e];if(a&&a.length>0){for(var s=0;s<a.length;){var o=a[s],r=(o[0],o[1]),n=o[2],h=(o[3],o[4]);h?a.splice(s,1):s++,this._duringEmit=!0;var c=r.call(n,i);if(this._duringEmit=!1,c==t.CONST["break"])break}return!0}return!1},t.CONST={"break":{}},t}();__reflect(Emiter.prototype,"Emiter");var Facade=function(){function t(){this._responders=[],this._commands={},t.inst=this,this.emiter=new Emiter}return t.prototype.registResponser=function(t){if(this._responders.some(function(e){return e.res==t}))throw"this responser has been registed already!";for(var e=t.listResponse(),i=[],a=function(e){var a=s.emiter.on(e,function(i){t.doResponse(e,i)});i.push({name:e,id:a})},s=this,o=0,r=e;o<r.length;o++){var n=r[o];a(n)}this._responders.push({res:t,ids:i})},t.prototype.unregistResponser=function(t){for(var e=0,i=this._responders;e<i.length;e++){var a=i[e];if(a.res==t){for(var s=a.ids,o=0,r=s;o<r.length;o++){var n=r[o];this.emiter.rm(n.id,n.name)}this._responders.splice(this._responders.indexOf(a),1);break}}},t.prototype.registCommand=function(t,e){if(this._commands[t])throw"cmd has been registed already!!!";var i=this.emiter.on(t,function(i){(new e).excute(i,t)});this._commands[t]=i},t.prototype.unregistCommand=function(t){var e=this._commands[t];e&&this.emiter.rm(e,t)},t.prototype.notify=function(t,e){return this.emiter.emit(t,e)},t.prototype.dispose=function(){this.emiter.rmall(),this._responders.length=0},t}();__reflect(Facade.prototype,"Facade"),egret.Bitmap.prototype.pos=function(t,e,i,a){this.x=t,this.y=e,this.width=i,this.height=a,this.anchorOffsetX=i/2,this.anchorOffsetY=a/2};var GameScene=function(t){function e(e){var i=t.call(this)||this;i.Connect=e,i.GuaiState=[],i.MapState=[[],[],[]],i.NumLockTT=[],i.HitImage=[],i.HelpImage=[],i.HeroImage=[],i.HeroImage2=[],i.InterImage=[],i.GuaiImage=[],i.OverImage=[],i.NodeImage=[],i.RankImage=[],i.RewardImage=[],i.MapImage=[[],[],[]],i.UILabel=[],i.RankLabel=[],i.GuaiBody=[],i.GuaiShape=[],i.Stuff=[],i.UserName=[],i.UserID=[],i.UserID2=[],i.UserID3=[],i.UserImage=[],i.UserScore=[],i.LoadGameScore(),i.GameDate=new GameMessage,i.iPhoneH=0,i.iPhoneW=i.Connect.GetiPhoneW(),i.choose=0,i.ChallengeMode=0,i.ChallengeGate=0,i.SendMessage=0,i.RewordVideo=0,i.NumDays=1,i.Connect.canaAutoEnterGame()&&(-1==i.Connect.getChallengeLevel()?i.choose=1:(i.choose=1,i.ChallengeMode=1,i.ChallengeGate=i.Connect.getChallengeLevel())),i.NumTimeAD=0,i.NumStyleAD=0,i.GameState=0,i.NumGate=0,i.TouchNow=0,i.ShowFriend=0,i.ShowSkip=0,i.MoveCanNot=0,i.NowLanguage=2,i.touchEnabled=!0,i.StageWidth=egret.MainContext.instance.stage.stageWidth,i.StageHeight=1136,i.RecommendReady=0,console.log("StageWidth: "+i.StageWidth),i.UserName=i.Connect.GetUserName(2),i.UserID=i.Connect.GetUserID(2),i.UserImage=i.Connect.GetUserImage(2),i.UserScore=i.Connect.GetUserScore(2);var a=new egret.Timer(10);a.addEventListener(egret.TimerEvent.TIMER,i.TimerTick,i),a.start();var s=new egret.Timer(100);s.addEventListener(egret.TimerEvent.TIMER,i.DrawAction,i),s.start(),i.addEventListener(egret.TouchEvent.TOUCH_BEGIN,i.TouchBegin,i),i.addEventListener(egret.TouchEvent.TOUCH_MOVE,i.TouchMoved,i),i.addEventListener(egret.TouchEvent.TOUCH_END,i.TouchEnded,i),0!=i.iPhoneW&&(i.x=i.iPhoneW),i.factor=50,i.WorldStep=30,i.CreateWorld(),i.InitGame(),i.Connect.UpLoadScore(i.NumGateTT),console.log(i.Connect.getVersion());var o=RES.getRes("soundnothing_mp3");return o.type="music",o.play(0,0),i}return __extends(e,t),e.prototype.InitGame=function(){var t=this;if(this.PutThePicture(),0==this.choose){this.LineX2=320,this.LineY2=-200,this.WorldStep=30,this.HeroTitle=1,this.HeroNumState=0,this.LineImage.width=6,this.LineImage.anchorOffsetX=3,this.LineImage.anchorOffsetY=0,this.InterImage[6].visible=!1,this.InterImage[0].pos(320,568,954,1136),this.InterImage[1].pos(376,170,484,243),this.InterImage[2].pos(320,860,192,112),this.InterImage[3].pos(120,1020,122,122),this.InterImage[4].pos(320,1020,122,122),this.InterImage[5].pos(520,1020,122,122),this.InterImage[6].pos(320,640,this.StageWidth,260),this.world.gravity=[0,-9.8],this.HeroBody=this.CreateRole(80,300,120,280,1,"titlerole_png");var e=this.CreateRole(320,-200,20,20,0,"titlebtn2_png");if(this.LineConstraint=new p2.DistanceConstraint(this.HeroBody,e,0),this.LineConstraint.distance=13,this.world.addConstraint(this.LineConstraint),this.UserName=this.Connect.GetUserName(2),this.UserID=this.Connect.GetUserID(2),this.UserImage=this.Connect.GetUserImage(2),this.UserScore=this.Connect.GetUserScore(2),this.UserID2=this.Connect.GetUserID(2),console.log("首页好友排行榜名字：",this.UserName),this.UserName.length>0){for(var i=this.UserName,a=this.UserImage,s=0;s<this.UserID2.length;s++)if(this.UserID2[s]==this.Connect.GetMyID()){i.splice(s,1),a.splice(s,1),this.UserID2.splice(s,1);break}if(i.length>0){if(i.length>1)for(var s=0;s<i.length;s++){var o=Math.floor(Math.random()*(i.length-1)),r=i[s];i[s]=i[o],i[o]=r;var n=a[s];a[s]=a[o],a[o]=n;var h=this.UserID2[s];this.UserID2[s]=this.UserID2[o],this.UserID2[o]=h}this.LineConstraint.distance=11.3,this.InterImage[6].visible=!0,this.RankLayer.x=0,this.RankLayer.y=0,this.RankLayer.width=180*i.length+50,this.RankLayer.height=260;for(var c,l=function(t){u.RankImage[t]=new egret.Bitmap(RES.getRes("rankbtn1_png")),u.RankLayer.addChild(u.RankImage[t]),u.RankImage[t].pos(180*t+98,235,115,52);var e=new egret.Bitmap;u.RankLayer.addChild(e),e.pos(180*t+100,135,125,125),RES.getResByUrl(a[t],function(t){e.texture=t},u,RES.ResourceItem.TYPE_IMAGE),c=new egret.TextField,u.RankLayer.addChild(c),c.x=180*t+100,c.y=40,c.size=25,c.text=""+i[t],c.width>160&&(c.width=160),c.wordWrap=!0,c.anchorOffsetX=c.width/2,c.anchorOffsetY=c.height/2,1==i.length&&(u.RankImage[t].x=320+u.iPhoneW,c.x=320+u.iPhoneW,e.x=320+u.iPhoneW),2==i.length&&(u.RankImage[t].x=210+220*t+u.iPhoneW,c.x=210+220*t+u.iPhoneW,e.x=210+220*t+u.iPhoneW),3==i.length&&(u.RankImage[t].x=140+180*t+u.iPhoneW,c.x=140+180*t+u.iPhoneW,e.x=140+180*t+u.iPhoneW)},u=this,s=0;s<i.length;s++)l(s);this.Scroller.x=-this.iPhoneW,this.Scroller.y=500,this.Scroller.width=this.StageWidth,this.Scroller.height=260,this.Scroller.setContent(this.RankLayer)}}0==this.RecommendReady?this.Connect.getRecommendGamesAsync().then(function(e){console.log("Recommend:"+e),t.RecommendID=e.map(function(t){return t.appId})[0];var i=e.map(function(t){return t.icon})[0];void 0!=i&&(t.RecommendImage=new egret.Bitmap,t.addChild(t.RecommendImage),t.RecommendImage.pos(70-t.iPhoneW,190,130,166),RES.getResByUrl(i,function(e){t.RecommendReady=1,t.RecommendTextrue=e,t.RecommendImage.texture=e,0!=t.choose?t.RecommendImage.visible=!1:egret.Tween.get(t.RecommendImage,{loop:!0}).to({scaleX:.95,scaleY:.95},600).to({scaleX:1,scaleY:1},600)},t,RES.ResourceItem.TYPE_IMAGE))}):(this.RecommendImage=new egret.Bitmap(this.RecommendTextrue),this.addChild(this.RecommendImage),this.RecommendImage.pos(70-this.iPhoneW,190,130,166),egret.Tween.get(this.RecommendImage,{loop:!0}).to({scaleX:.95,scaleY:.95},600).to({scaleX:1,scaleY:1},600)),this.LoginReward(),this.Connect.pullInviteCount()}else if(100==this.choose){this.TouchNow=0,this.BuyHero=this.NowHeroTT,this.ShareForRole(1),this.NumFriends=this.Connect.getInviteCount(),this.InterImage[0].pos(320,568,954,1136),this.InterImage[1].pos(200,1e3,112,112),this.InterImage[2].pos(410,1e3,192,112),this.InterImage[3].pos(320,485,550,830),this.InterImage[4].pos(320,230,368,368),this.InterImage[5].pos(320,210,232,250),this.InterImage[6].pos(320,210,232,250);for(var s=0;3>s;s++)for(var d=0;5>d;d++)this.HeroImage[s+3*d].pos(80+160*s,100+180*d,120,120);for(var s=0;15>s;s++)1==this.NumLockTT[s]&&(this.HeroImage2[s].visible=!1),this.HeroImage2[s].pos(this.HeroImage[s].x,this.HeroImage[s].y,120,120);this.InterImage[7].pos(this.HeroImage[this.NowHeroTT-1].x,this.HeroImage[this.NowHeroTT-1].y,140,140),this.FriendsLabel.font=RES.getRes("numimage_fnt"),this.FriendsLabel.x=410,this.FriendsLabel.y=1020,this.FriendsLabel.scaleX=.6,this.FriendsLabel.scaleY=.6,this.FriendsLabel.visible=!1,this.FriendsLabel.text="123",this.FriendsLabel.anchorOffsetY=this.FriendsLabel.height/2,this.UILabel[0].x=320,this.UILabel[0].y=355,this.UILabel[0].size=27,this.UILabel[0].bold=!0,this.UILabel[0].textColor=1590109,this.UILabel[0].visible=!1,this.UILabel[0].text="Invite 10 Friends",this.UILabel[0].anchorOffsetX=this.UILabel[0].width/2,this.UILabel[0].anchorOffsetY=this.UILabel[0].height/2,this.MapLayer.x=0,this.MapLayer.y=0,this.MapLayer.width=400,this.MapLayer.height=950,this.Scroller.x=80,this.Scroller.y=400,this.Scroller.width=470,this.Scroller.height=480,this.Scroller.setContent(this.MapLayer),egret.Tween.get(this.InterImage[4],{loop:!0}).to({rotation:360},3e3),egret.Tween.get(this.InterImage[5],{loop:!0}).to({alpha:0},0).to({alpha:0},200).to({alpha:1},0).to({alpha:1},200),egret.Tween.get(this.InterImage[6],{loop:!0}).to({alpha:1},0).to({alpha:1},200).to({alpha:0},0).to({alpha:0},200)}else if(110==this.choose){this.InterImage[0].pos(320,568,954,1136),this.InterImage[1].pos(320,100,283,36),this.InterImage[2].pos(320,1020,112,112),this.UserName.length<5&&(this.UserName=this.Connect.GetUserName(1),this.UserImage=this.Connect.GetUserImage(1),this.UserScore=this.Connect.GetUserScore(1));for(var p,g,m,c,f,y=function(e){p=new egret.Bitmap(RES.getRes("rankbg2_png")),_.RankLayer.addChild(p),p.pos(320,50+100*e,600,90),3>e?(g=new egret.Bitmap(RES.getRes("rankadd"+(e+1)+"_png")),_.RankLayer.addChild(g),g.pos(110,50+100*e,54,52)):(m=new egret.BitmapText,_.RankLayer.addChild(m),m.font=RES.getRes("numimage_fnt"),m.x=110,m.y=50+100*e,m.text=e+1+"",m.scaleX=.5,m.scaleY=.5,m.anchorOffsetX=m.width/2,m.anchorOffsetY=m.height/2);var i=new egret.Bitmap;_.RankLayer.addChild(i),i.pos(190,100*e+50,72,72),RES.getResByUrl(_.UserImage[e],function(e){i.texture=e;var a=new egret.Shape;a.graphics.beginFill(255),a.graphics.drawCircle(i.x,i.y,36),a.graphics.endFill(),t.RankLayer.addChild(a),i.mask=a},_,RES.ResourceItem.TYPE_IMAGE),c=new egret.TextField,_.RankLayer.addChild(c),c.x=240,c.y=100*e+50,c.size=22,c.text=""+_.UserName[e],c.width>200&&(c.width=200),c.wordWrap=!0,c.anchorOffsetY=c.height/2,f=new egret.TextField,_.RankLayer.addChild(f),f.x=530,f.y=100*e+50,f.size=25,f.text=""+_.UserScore[e],f.anchorOffsetX=f.width/2,f.anchorOffsetY=f.height/2},_=this,s=0;s<this.UserName.length;s++)y(s);this.RankLayer.x=0,this.RankLayer.y=0,this.RankLayer.width=640,this.RankLayer.height=100*this.UserName.length,this.Scroller.x=0,this.Scroller.y=130,this.Scroller.width=640,this.Scroller.height=800,this.Scroller.setContent(this.RankLayer)}else if(1==this.choose){this.GameState=0,this.ShowFriend=0,this.RotateX=200,this.RotateY=300,this.RotateR=100,this.HeroState=0,this.GuaiNum=0,this.HeroNumState=0,this.NodeNext=1,this.NodeNow=0,this.ShowMap=0,this.ShowSkip++,this.HitState=0,this.NumTime=0,this.WorldStep=30,0==this.ChallengeMode?(this.NumGate=this.NumGateTT+1,this.Connect.onLevelStart(this.NumGate)):(this.ShowSkip=0,this.NumGate=this.ChallengeGate,this.Connect.onLevelStart(this.NumGate),this.ShowTipView("Challenge Mode")),this.NumGate>=101?(this.GameDate.SetGateMessage((this.NumGate-101)%80+21),this.world.gravity=[0,-9.8-9*Math.floor((this.NumGate-101)/80)]):(this.GameDate.SetGateMessage(this.NumGate),this.world.gravity=[0,-9.8]),this.NumDistance=0;for(var s=0;300>s;s++)this.GuaiState[s]=0;for(var s=0;2>s;s++)this.MapState[s][0]=0,this.MapState[s][1]=1;this.Stuff[0]=new p2.Material(0),this.Stuff[1]=new p2.Material(0),this.Stuff[2]=new p2.Material(0),this.Stuff[3]=new p2.Material(0);var I=new p2.ContactMaterial(this.Stuff[0],this.Stuff[1]);I.restitution=1,this.world.addContactMaterial(I);var S=new p2.ContactMaterial(this.Stuff[0],this.Stuff[2]);S.restitution=1.5,this.world.addContactMaterial(S);var v=new p2.ContactMaterial(this.Stuff[0],this.Stuff[3]);v.restitution=0,this.world.addContactMaterial(v),this.MapLayer.x=0,this.MapLayer.y=this.StageHeight,this.MapLayer.anchorOffsetY=this.StageHeight,this.HeroLayer.x=0,this.HeroLayer.y=this.StageHeight,this.HeroLayer.anchorOffsetY=this.StageHeight;for(var s=0;2>s;s++)for(var d=0;2>d;d++)this.MapImage[s][d].pos(300+1598*d,624,1600,1024);this.InterImage[2].visible=!1,this.InterImage[5].visible=!1,this.InterImage[7].visible=!1,this.InterImage[0].pos(320,568,954,1136),this.InterImage[1].pos(50-this.iPhoneW,50,43,40),this.InterImage[2].pos(600,50,43,40),this.InterImage[3].pos(320,50,260,30),this.InterImage[4].pos(210,51,0,10),this.InterImage[5].pos(436,50,30,30),this.InterImage[6].pos(800,270,230,230),this.InterImage[7].pos(320,1040,320,90),this.ShowSkip>=3&&(1==platform.hasRAD()?this.InterImage[7].visible=!0:this.ShowSkip=2),this.LineImage.visible=!1,this.LineImage.width=3,this.LineImage.anchorOffsetX=1.5,this.LineImage.anchorOffsetY=0,this.HeroImage[0].visible=!1,this.HeroImage[0].pos(130,200,20,46);for(var s=1;9>s;s++)this.HeroImage[s].visible=!1,this.HeroImage[s].pos(130,200,86,83);for(var s=0;4>s;s++)this.NodeImage[s].pos(-100,-100,this.NodeImage[s].width,this.NodeImage[s].height);egret.Tween.get(this.NodeImage[1],{loop:!0}).to({rotation:360},5e3),this.PlayGame();var w=new particle.GravityParticleSystem(RES.getRes("texiao1_png"),RES.getRes("texiao1_json"));if(this.MapLayer.addChildAt(w,0),w.start(),this.NumGate<=3){for(var s=0;3>s;s++)this.HelpImage[s]=new egret.Bitmap(RES.getRes("showtips"+(s+1)+"_png")),this.addChild(this.HelpImage[s]);this.HelpImage[0].pos(385,800,64,64),this.HelpImage[1].pos(380,730,310,29),this.HelpImage[2].pos(392,856,93,121),egret.Tween.get(this.HelpImage[0],{loop:!0}).to({alpha:0},0).to({alpha:0},600).to({alpha:1},0).to({alpha:1},250),egret.Tween.get(this.HelpImage[2],{loop:!0}).to({scaleX:1.1,scaleY:1.1},300).to({scaleX:1,scaleY:1},300).to({},250)}}},e.prototype.LoadResource=function(){if(0==this.choose)this.RankLayer=new eui.Group,this.Scroller=new egret.ScrollView,this.InterImage[0]=new egret.Bitmap(RES.getRes("titlebg_png")),this.InterImage[1]=new egret.Bitmap(RES.getRes("title1_png")),this.InterImage[2]=new egret.Bitmap(RES.getRes("titlebtn1_png")),this.InterImage[3]=new egret.Bitmap(RES.getRes("choosenew1_png")),this.InterImage[5]=new egret.Bitmap(RES.getRes("titlebtn4_png")),this.InterImage[6]=new egret.Bitmap(RES.getRes("rankbg1_png")),this.Connect.hasPurchasedRemoveAD()||!this.Connect.suportIAP()?this.InterImage[4]=new egret.Bitmap(RES.getRes("titlebtn3_png")):this.InterImage[4]=new egret.Bitmap(RES.getRes("titlebtn5_png")),this.LineImage=new egret.Bitmap(RES.getRes("heroline_png"));else if(100==this.choose){this.MapLayer=new eui.Group,this.Scroller=new egret.ScrollView,this.InterImage[0]=new egret.Bitmap(RES.getRes("titlebg_png")),this.InterImage[1]=new egret.Bitmap(RES.getRes("choosebtn1_png")),this.InterImage[2]=new egret.Bitmap(RES.getRes("titlebtn1_png")),this.InterImage[3]=new egret.Bitmap(RES.getRes("choosebg_png")),this.InterImage[4]=new egret.Bitmap(RES.getRes("chooselight_png")),this.InterImage[5]=new egret.Bitmap(RES.getRes("chooseman"+this.NowHeroTT+"1_png")),this.InterImage[6]=new egret.Bitmap(RES.getRes("chooseman"+this.NowHeroTT+"2_png")),this.InterImage[7]=new egret.Bitmap(RES.getRes("choosenow_png"));for(var t=0;15>t;t++)this.HeroImage[t]=new egret.Bitmap(RES.getRes("chooserole"+(t+1)+"_png"));for(var t=0;15>t;t++)this.HeroImage2[t]=new egret.Bitmap(RES.getRes("chooselock_png"));this.FriendsLabel=new egret.BitmapText,this.UILabel[0]=new egret.TextField}else if(110==this.choose)this.RankLayer=new eui.Group,this.Scroller=new egret.ScrollView,this.InterImage[0]=new egret.Bitmap(RES.getRes("titlebg_png")),this.InterImage[1]=new egret.Bitmap(RES.getRes("ranktitle2_png")),this.InterImage[2]=new egret.Bitmap(RES.getRes("choosebtn1_png"));else if(1==this.choose){this.MapLayer=new eui.Group,this.HeroLayer=new eui.Group;for(var t=0;2>t;t++)for(var e=0;2>e;e++)this.MapImage[t][e]=new egret.Bitmap(RES.getRes("gamebg"+(t+1)+"_png"));this.InterImage[0]=new egret.Bitmap(RES.getRes("gamebg_png")),this.InterImage[1]=new egret.Bitmap(RES.getRes("gamebtn2_png")),this.InterImage[2]=new egret.Bitmap(RES.getRes("gamebtn2_png")),this.InterImage[3]=new egret.Bitmap(RES.getRes("inter1_png")),this.InterImage[4]=new egret.Bitmap(RES.getRes("inter2_png")),this.InterImage[5]=new egret.Bitmap(RES.getRes("inter3_png")),this.InterImage[6]=new egret.Bitmap(RES.getRes("moon_png")),this.InterImage[7]=new egret.Bitmap(RES.getRes("gamebtn3_png")),this.LineImage=new egret.Bitmap(RES.getRes("heroline_png")),this.HeroImage[0]=new egret.Bitmap(RES.getRes("herocheck_png"));for(var t=1;9>t;t++)this.HeroImage[t]=new egret.Bitmap(RES.getRes("hero"+this.NowHeroTT+t+"_png"));this.NodeImage[0]=new egret.Bitmap(RES.getRes("node2_png")),this.NodeImage[1]=new egret.Bitmap(RES.getRes("node3_png")),this.NodeImage[2]=new egret.Bitmap(RES.getRes("node4_png")),this.NodeImage[3]=new egret.Bitmap(RES.getRes("node5_png")),this.UILabel[0]=new egret.TextField,this.UILabel[1]=new egret.TextField,this.ScoreLabel=new egret.BitmapText}},e.prototype.PutThePicture=function(){if(this.LoadResource(),0==this.choose){for(var t=0;7>t;t++)this.addChild(this.InterImage[t]);this.addChild(this.Scroller),this.addChildAt(this.LineImage,1)}else if(100==this.choose){for(var t=0;7>t;t++)this.addChild(this.InterImage[t]);for(var t=0;15>t;t++)this.MapLayer.addChild(this.HeroImage[t]),this.MapLayer.addChild(this.HeroImage2[t]);this.MapLayer.addChild(this.InterImage[7]),this.addChild(this.Scroller),this.addChild(this.FriendsLabel),this.addChild(this.UILabel[0])}else if(110==this.choose)this.addChild(this.InterImage[0]),this.addChild(this.InterImage[1]),this.addChild(this.InterImage[2]),this.addChild(this.Scroller);else if(1==this.choose){this.addChild(this.InterImage[0]),this.addChild(this.InterImage[6]),this.addChild(this.MapLayer),this.addChild(this.HeroLayer);for(var t=1;6>t;t++)this.addChild(this.InterImage[t]);this.addChild(this.InterImage[7]);for(var t=0;2>t;t++)for(var e=0;2>e;e++)this.MapLayer.addChild(this.MapImage[t][e]);for(var t=0;4>t;t++)this.HeroLayer.addChild(this.NodeImage[t]);this.HeroLayer.addChild(this.LineImage);for(var t=0;9>t;t++)this.HeroLayer.addChild(this.HeroImage[t]);this.addChild(this.UILabel[0]),this.addChild(this.UILabel[1]),this.addChild(this.ScoreLabel)}},e.prototype.ReleaseGame=function(){0==this.choose?this.world.clear():1==this.choose&&this.world.clear(),egret.Tween.removeAllTweens(),this.removeChildren()},e.prototype.TimerTick=function(){0==this.choose||100==this.choose||1==this.choose&&(0==this.GameState||1==this.GameState)},e.prototype.DrawAction=function(){if(-1!=this.VideoState&&this.NumTimeAD++,(1==this.NumGate||2==this.NumGate)&&(this.NumTimeAD=0),0==this.choose){if(this.HeroNumState++,this.HeroNumState>3){this.HeroNumState=0;var t=Math.floor(10*Math.random()+1);t==this.HeroTitle&&(10>t?t++:t=5),this.HeroTitle=t,this.InterImage[3].texture=RES.getRes("choosenew"+t+"_png")}}else 100==this.choose||1==this.choose&&0==this.GameState&&2!=this.HitState&&(this.NumTime++,this.ScoreLabel.text=Math.floor(this.NumTime/10)+"d"+this.NumTime%10+"s",this.ScoreLabel.anchorOffsetX=this.ScoreLabel.width/2);if(-1==this.VideoState)if(this.VideoState=this.Connect.GetADVideoState(),console.log(this.VideoState+"LALA"),0==this.VideoState)1==this.choose&&4==this.GameState&&this.MoveOrNot(),this.RewordVideo=0;else if(1==this.VideoState)if(this.NumTimeAD=0,this.VideoState=0,100==this.choose){this.NumVideos++,this.FriendsLabel.visible=!0;var e=0;e=4==this.BuyHero?2:5==this.BuyHero?6:6==this.BuyHero?12:20,this.FriendsLabel.text=this.NumVideos+"l"+e,this.FriendsLabel.anchorOffsetX=this.FriendsLabel.width/2,this.NumVideos>=2&&0==this.NumLockTT[3]?(this.NumLockTT[3]=1,this.HeroImage2[3].visible=!1,4==this.BuyHero&&(this.FriendsLabel.visible=!1,this.UILabel[0].visible=!1,this.NowHeroTT=this.BuyHero,this.InterImage[2].texture=RES.getRes("titlebtn1_png"),this.ShowTipView("Unlock Success!"))):this.NumVideos>=6&&0==this.NumLockTT[4]?(this.NumLockTT[4]=1,this.HeroImage2[4].visible=!1,5==this.BuyHero&&(this.FriendsLabel.visible=!1,this.UILabel[0].visible=!1,this.NowHeroTT=this.BuyHero,this.InterImage[2].texture=RES.getRes("titlebtn1_png"),this.ShowTipView("Unlock Success!"))):this.NumVideos>=12&&0==this.NumLockTT[5]?(this.NumLockTT[5]=1,this.HeroImage2[5].visible=!1,6==this.BuyHero&&(this.FriendsLabel.visible=!1,this.UILabel[0].visible=!1,this.NowHeroTT=this.BuyHero,this.InterImage[2].texture=RES.getRes("titlebtn1_png"),this.ShowTipView("Unlock Success!"))):this.NumVideos>=20&&0==this.NumLockTT[6]&&(this.NumLockTT[6]=1,this.HeroImage2[6].visible=!1,7==this.BuyHero&&(this.FriendsLabel.visible=!1,this.UILabel[0].visible=!1,this.NowHeroTT=this.BuyHero,this.InterImage[2].texture=RES.getRes("titlebtn1_png"),this.ShowTipView("Unlock Success!"))),this.SaveGameScore()}else if(1==this.choose)if(0==this.GameState)this.ShowSkip=0,this.NumGate>this.NumGateTT&&(this.NumGateTT=this.NumGate,this.SaveGameScore(),this.Connect.UpLoadScore(this.NumGateTT)),this.MoveOrNot(),this.ShowTipView("Next Level!");else if(4==this.GameState)this.MoveOrNot();else if(2==this.GameState)if(1==this.RewordVideo);else{this.NumVideos++,this.FriendsLabel.visible=!0;var i=0;i=4==this.BuyHero?2:5==this.BuyHero?6:6==this.BuyHero?12:20,this.FriendsLabel.text="v"+this.NumVideos+"l"+i,this.FriendsLabel.anchorOffsetX=this.FriendsLabel.width/2,this.FriendsLabel.anchorOffsetY=this.FriendsLabel.height/2,this.NumVideos>=2&&0==this.NumLockTT[3]?(this.NumLockTT[3]=1,4==this.BuyHero&&(this.FriendsLabel.visible=!1,this.NowHeroTT=this.BuyHero,this.ShowTipView("Unlock Success!"))):this.NumVideos>=6&&0==this.NumLockTT[4]?(this.NumLockTT[4]=1,5==this.BuyHero&&(this.FriendsLabel.visible=!1,this.NowHeroTT=this.BuyHero,this.ShowTipView("Unlock Success!"))):this.NumVideos>=12&&0==this.NumLockTT[5]?(this.NumLockTT[5]=1,6==this.BuyHero&&(this.FriendsLabel.visible=!1,this.NowHeroTT=this.BuyHero,this.ShowTipView("Unlock Success!"))):this.NumVideos>=20&&0==this.NumLockTT[6]&&(this.NumLockTT[6]=1,7==this.BuyHero&&(this.FriendsLabel.visible=!1,this.NowHeroTT=this.BuyHero,this.ShowTipView("Unlock Success!"))),this.SaveGameScore()}},e.prototype.DrawMap=function(){if(this.InterImage[4].width=-this.HeroLayer.x/this.NumDistance*220,this.InterImage[4].width>220&&(this.InterImage[4].width=220),2!=this.HitState&&(this.HeroLayer.x=(130-this.HeroImage[0].x)*this.HeroLayer.scaleX),this.HeroLayer.x<-this.NumDistance+1e3&&0==this.HitState&&(this.HitState=1,this.ShowEnd()),1==this.HitState&&this.HeroImage[0].x>this.HitImage[0].x){this.HitState=2,this.HitImage[0].visible=!1,this.WorldStep=5,this.ShowSkip=0;var t=new particle.GravityParticleSystem(RES.getRes("texiao2_png"),RES.getRes("texiao2_json"));this.HeroLayer.addChild(t),t.x=this.HitImage[0].x,t.y=this.HitImage[0].y,t.start(),t.emissionTime=500,this.InterImage[5].visible=!0,egret.setTimeout(this.ShowResult,this,1500),egret.Tween.get(this.HeroLayer).to({x:320-this.HitImage[1].x},1200);var e=RES.getRes("soundwin1_mp3");e.play(0,1)}this.InterImage[6].x=760-.04*this.HeroImage[0].x;for(var i=0;2>i;i++)for(var a=0;2>a;a++)this.MapImage[i][a].x=300-this.HeroImage[0].x/(10-5*i)+1598*this.MapState[i][a],this.MapImage[i][a].x<-this.MapImage[i][a].width/2-100&&(this.MapImage[i][a].x+=2*this.MapImage[i][a].width-4,this.MapState[i][a]+=2)},e.prototype.DrawHero=function(){this.HeroNumState++;for(var t=1;9>t;t++)this.HeroImage[t].visible=!1;for(var t=1;9>t;t++)this.HeroImage[t].x=this.HeroImage[0].x,this.HeroImage[t].y=this.HeroImage[0].y;if(this.SetNode(),0==this.HeroState?(this.HeroNumState>=41&&(this.HeroNumState=0),this.HeroImage[Math.floor(this.HeroNumState/7)+3].visible=!0):1==this.HeroState&&(this.HeroImage[0].x>this.GuaiImage[this.NodeNow-1].x+100?this.HeroImage[2].visible=!0:this.HeroImage[1].visible=!0,this.LineX1=this.HeroImage[0].x-12,this.LineY1=this.HeroImage[0].y-41,this.DrawLine()),this.HeroImage[0].y>this.StageHeight+80&&2!=this.HitState&&4!=this.GameState){this.GameState=4,this.Connect.onDead(this.NumGate);var e=RES.getRes("soundhurt2_mp3");e.play(0,1),this.ShowADNow(2)}},e.prototype.DrawLine=function(){if(1==this.HeroState){this.LineImage.x=this.LineX1,this.LineImage.y=this.LineY1;var t=this.LineX1-this.LineX2,e=this.LineY1-this.LineY2,i=Math.atan(e/t)/Math.PI*180+90;0>t&&(i=-180+i),-180>i?i+=360:i>180&&(i-=360),this.LineImage.rotation=i,this.LineImage.height=Math.sqrt(t*t+e*e)+4}},e.prototype.SetNode=function(){for(var t=100,e=0;e<this.GuaiNum;e++){var i=Math.abs(this.HeroBody.position[0]+4-this.GuaiBody[e].position[0]);t>i&&(t=i,this.NodeNext=e+1)}for(var e=0;2>e;e++)this.NodeImage[e].x=this.GuaiImage[this.NodeNext-1].x,this.NodeImage[e].y=this.GuaiImage[this.NodeNext-1].y;this.NodeNext==this.NodeNow&&1==this.HeroState?(this.NodeImage[0].visible=!1,this.NodeImage[1].visible=!1):(this.NodeImage[0].visible=!0,this.NodeImage[1].visible=!0)},e.prototype.GetNode=function(){if(!(Math.abs(this.HeroBody.position[0]-this.GuaiBody[this.NodeNext-1].position[0])>15)){this.HeroState=1,this.NodeNow=this.NodeNext,this.LineImage.visible=!0,this.LineX2=this.GuaiImage[this.NodeNext-1].x,this.LineY2=this.GuaiImage[this.NodeNext-1].y;for(var t=0;2>t;t++)this.NodeImage[t+2].visible=!0,this.NodeImage[t+2].x=this.GuaiImage[this.NodeNext-1].x,this.NodeImage[t+2].y=this.GuaiImage[this.NodeNext-1].y;this.LineConstraint=new p2.DistanceConstraint(this.HeroBody,this.GuaiBody[this.NodeNext-1],0);var e=this.HeroBody.position[0]-this.GuaiBody[this.NodeNext-1].position[0],i=this.HeroBody.position[1]-this.GuaiBody[this.NodeNext-1].position[1];this.LineConstraint.distance=Math.sqrt(e*e+i*i)-.4,this.world.addConstraint(this.LineConstraint)}},e.prototype.PlayGame=function(){this.UILabel[0].x=205,this.UILabel[0].y=50-.5*this.iPhoneH,this.UILabel[0].size=18,this.UILabel[0].bold=!0,this.UILabel[0].text=""+this.NumGate,this.UILabel[0].textColor=0,this.UILabel[0].anchorOffsetX=this.UILabel[0].width/2,this.UILabel[0].anchorOffsetY=this.UILabel[0].height/2,this.UILabel[1].x=435,this.UILabel[1].y=50-.5*this.iPhoneH,this.UILabel[1].size=18,this.UILabel[1].bold=!0,this.UILabel[1].text=""+(this.NumGate+1),this.UILabel[1].textColor=0,this.UILabel[1].anchorOffsetX=this.UILabel[1].width/2,this.UILabel[1].anchorOffsetY=this.UILabel[1].height/2,this.ScoreLabel.font=RES.getRes("numimage_fnt"),this.ScoreLabel.x=320,this.ScoreLabel.y=60,this.ScoreLabel.scaleX=.3,this.ScoreLabel.scaleY=.3,this.ScoreLabel.text="0d0s",this.ScoreLabel.anchorOffsetX=this.ScoreLabel.width/2,this.CreateHero();for(var t=0;t<this.GameDate.GetLengthMessage();t++)if(this.GameDate.GetBlockMessageY(t)>-100)if(8==this.GameDate.GetBlockMessage(t))this.NumDistance=this.GameDate.GetBlockMessageX(t);else if(7==this.GameDate.GetBlockMessage(t)){this.GuaiNum++,this.GuaiState[this.GuaiNum-1]=1;var e=this.GameDate.GetBlockMessageX(t),i=this.StageHeight-2*this.iPhoneH-this.GameDate.GetBlockMessageY(t);this.CreateGuai(e,i,21,"node1_png")}else{var e=this.GameDate.GetBlockMessageX(t),i=this.StageHeight-this.iPhoneH-this.GameDate.GetBlockMessageY(t),a=-this.GameDate.GetBlockMessageR(t),s=this.GameDate.GetBlockMessage(t);this.CreateRect(e,i,a,s,"map"+s+"_png")}},e.prototype.ShowADNow=function(t){var e=this;if(0==t)1==platform.hasRAD()?(this.RewordVideo=0,this.Connect.ShowADVideo(),this.VideoState=-1):this.ShowTipView("Ad is not ready");else if(1==t){if(this.NumTimeAD>=600)if(this.NumTimeAD=0,this.NumStyleAD++,this.NumStyleAD>=2){if(this.NumStyleAD=0,this.Connect.hasPurchasedRemoveAD())return;1==platform.hasRAD()?(this.RewordVideo=1,this.Connect.ShowADVideo(),this.VideoState=-1):this.Connect.ShowADChaping().then(function(){e.NumTimeAD=0})}else this.Connect.ShowADChaping().then(function(){e.NumTimeAD=0})}else if(2==t)if(this.NumTimeAD>=600)if(this.NumTimeAD=0,this.NumStyleAD++,this.NumStyleAD>=2){if(this.NumStyleAD=0,this.Connect.hasPurchasedRemoveAD())return;console.log("展示视频广告"),1==platform.hasRAD()?(this.Connect.ShowADVideo(),this.VideoState=-1):this.Connect.ShowADChaping().then(function(){e.NumTimeAD=0,e.MoveOrNot()})["catch"](function(){e.MoveOrNot()})}else this.Connect.ShowADChaping().then(function(){e.NumTimeAD=0,e.MoveOrNot()})["catch"](function(){e.MoveOrNot()});else this.MoveOrNot()},e.prototype.LoginReward=function(){this.NumDays=this.Connect.getLoginDays(),this.NumDays>=5&&0==this.NumLockTT[14]?(this.NumLockTT[14]=1,this.ShowTipView("You Get New Role!")):this.NumDays>=2&&0==this.NumLockTT[13]&&(this.NumLockTT[13]=1,this.ShowTipView("You Get New Role!"))},e.prototype.OverReward=function(){this.NumGateTT>=10&&0==this.NumLockTT[9]?(this.NumLockTT[9]=1,this.ShowReward(9),this.ShowTipView("You Get New Role!")):this.NumGateTT>=50&&0==this.NumLockTT[10]?(this.NumLockTT[10]=1,this.ShowReward(10),this.ShowTipView("You Get New Role!")):this.NumGateTT>=100&&0==this.NumLockTT[11]?(this.NumLockTT[11]=1,this.ShowReward(11),this.ShowTipView("You Get New Role!")):this.NumGateTT>=200&&0==this.NumLockTT[12]&&(this.NumLockTT[12]=1,this.ShowReward(12),this.ShowTipView("You Get New Role!"))},e.prototype.ShowReward=function(t){this.GameState=5,this.NumReward=t+1,this.RewardImage[0]=new egret.Bitmap(RES.getRes("interbg_png")),this.RewardImage[1]=new egret.Bitmap(RES.getRes("viewbg_png")),this.RewardImage[2]=new egret.Bitmap(RES.getRes("viewtitle_png")),this.RewardImage[3]=new egret.Bitmap(RES.getRes("chooselight_png")),this.RewardImage[4]=new egret.Bitmap(RES.getRes("chooseman"+(t+1)+"1_png")),this.RewardImage[5]=new egret.Bitmap(RES.getRes("chooseman"+(t+1)+"2_png")),this.RewardImage[6]=new egret.Bitmap(RES.getRes("viewbtn_png"));
for(var e=0;7>e;e++)this.addChild(this.RewardImage[e]);this.RewardImage[0].pos(320,568,this.StageWidth,1136),this.RewardImage[1].pos(320,568,380,500),this.RewardImage[2].pos(320,380,310,22),this.RewardImage[3].pos(320,550,360,360),this.RewardImage[4].pos(320,550,232,250),this.RewardImage[5].pos(320,550,232,250),this.RewardImage[6].pos(320,755,288,88),egret.Tween.get(this.RewardImage[3],{loop:!0}).to({rotation:360},3e3),egret.Tween.get(this.RewardImage[4],{loop:!0}).to({alpha:0},0).to({alpha:0},200).to({alpha:1},0).to({alpha:1},200),egret.Tween.get(this.RewardImage[5],{loop:!0}).to({alpha:1},0).to({alpha:1},200).to({alpha:0},0).to({alpha:0},200)},e.prototype.CloseReward=function(){for(var t=0;7>t;t++)this.removeChild(this.RewardImage[t])},e.prototype.ShowRole=function(t,e){if(1==e)if(this.BuyHero=t+1,1==this.NumLockTT[t])this.FriendsLabel.visible=!1,this.UILabel[0].visible=!1,this.NowHeroTT=t+1,this.InterImage[2].texture=RES.getRes("titlebtn1_png");else if(1==t||2==t||7==t||8==t){this.FriendsLabel.visible=!0;var i=0;i=1==t?1:2==t?5:7==t?10:20,this.FriendsLabel.text=this.NumFriends+"l"+i,this.FriendsLabel.anchorOffsetX=this.FriendsLabel.width/2,this.UILabel[0].visible=!0,this.UILabel[0].text="Refer "+i+" friends \n Only new player login could you get it",this.UILabel[0].textAlign="center",this.UILabel[0].anchorOffsetX=this.UILabel[0].width/2,this.UILabel[0].anchorOffsetY=this.UILabel[0].height/2,this.InterImage[2].texture=RES.getRes("choosebtn2_png")}else if(3==t||4==t||5==t||6==t){var a=0;a=3==t?2:4==t?6:5==t?12:20,this.FriendsLabel.visible=!0,this.FriendsLabel.text=this.NumVideos+"l"+a,this.FriendsLabel.anchorOffsetX=this.FriendsLabel.width/2,this.UILabel[0].visible=!0,this.UILabel[0].text="Watch "+a+" Ads could you get it",this.UILabel[0].anchorOffsetX=this.UILabel[0].width/2,this.UILabel[0].anchorOffsetY=this.UILabel[0].height/2,this.InterImage[2].texture=RES.getRes("choosebtn3_png")}else if(9==t||10==t||11==t||12==t){var s=0;s=9==t?10:10==t?50:11==t?100:200,this.FriendsLabel.visible=!0,this.FriendsLabel.text=this.NumGateTT+"l"+s,this.FriendsLabel.anchorOffsetX=this.FriendsLabel.width/2,this.UILabel[0].visible=!0,this.UILabel[0].text="Pass Level "+s+" could you get it",this.UILabel[0].anchorOffsetX=this.UILabel[0].width/2,this.UILabel[0].anchorOffsetY=this.UILabel[0].height/2,this.InterImage[2].texture=RES.getRes("choosebtn4_png")}else{var o=0;o=13==t?2:5,this.FriendsLabel.visible=!0,this.FriendsLabel.text=this.NumDays+"l"+o,this.FriendsLabel.anchorOffsetX=this.FriendsLabel.width/2,this.UILabel[0].visible=!0,this.UILabel[0].text="Play "+o+" consecutive days",this.UILabel[0].anchorOffsetX=this.UILabel[0].width/2,this.UILabel[0].anchorOffsetY=this.UILabel[0].height/2,this.InterImage[2].texture=RES.getRes("choosebtn5_png")}},e.prototype.ShareForRole=function(t){this.NumFriends=this.Connect.getInviteCount(),this.FriendsLabel.visible=!0;var e=0;e=2==this.BuyHero?1:3==this.BuyHero?5:8==this.BuyHero?10:20,1==t?(this.FriendsLabel.text=this.NumFriends+"l"+e,this.FriendsLabel.anchorOffsetX=this.FriendsLabel.width/2,this.NumFriends>=1&&0==this.NumLockTT[1]?(this.NumLockTT[1]=1,this.HeroImage2[1].visible=!1,2==this.BuyHero&&(this.FriendsLabel.visible=!1,this.NowHeroTT=this.BuyHero,this.InterImage[2].texture=RES.getRes("titlebtn1_png"),this.ShowTipView("Unlock Success!"))):this.NumFriends>=5&&0==this.NumLockTT[2]?(this.NumLockTT[2]=1,this.HeroImage2[2].visible=!1,3==this.BuyHero&&(this.FriendsLabel.visible=!1,this.NowHeroTT=this.BuyHero,this.InterImage[2].texture=RES.getRes("titlebtn1_png"),this.ShowTipView("Unlock Success!"))):this.NumFriends>=10&&0==this.NumLockTT[7]?(this.NumLockTT[7]=1,this.HeroImage2[7].visible=!1,8==this.BuyHero&&(this.FriendsLabel.visible=!1,this.NowHeroTT=this.BuyHero,this.InterImage[2].texture=RES.getRes("titlebtn1_png"),this.ShowTipView("Unlock Success!"))):this.NumFriends>=20&&0==this.NumLockTT[8]&&(this.NumLockTT[8]=1,this.HeroImage2[8].visible=!1,9==this.BuyHero&&(this.FriendsLabel.visible=!1,this.NowHeroTT=this.BuyHero,this.InterImage[2].texture=RES.getRes("titlebtn1_png"),this.ShowTipView("Unlock Success!")))):2==t&&(this.FriendsLabel.text="p"+this.NumFriends+"l"+e,this.FriendsLabel.anchorOffsetX=this.FriendsLabel.width/2,this.NumFriends>=1&&0==this.NumLockTT[1]?(this.NumLockTT[1]=1,2==this.BuyHero&&(this.FriendsLabel.visible=!1,this.NowHeroTT=this.BuyHero,this.ShowTipView("Unlock Success!"))):this.NumFriends>=5&&0==this.NumLockTT[2]?(this.NumLockTT[2]=1,3==this.BuyHero&&(this.FriendsLabel.visible=!1,this.NowHeroTT=this.BuyHero,this.ShowTipView("Unlock Success!"))):this.NumFriends>=10&&0==this.NumLockTT[7]?(this.NumLockTT[7]=1,8==this.BuyHero&&(this.FriendsLabel.visible=!1,this.NowHeroTT=this.BuyHero,this.ShowTipView("Unlock Success!"))):this.NumFriends>=20&&0==this.NumLockTT[8]&&(this.NumLockTT[8]=1,9==this.BuyHero&&(this.FriendsLabel.visible=!1,this.NowHeroTT=this.BuyHero,this.ShowTipView("Unlock Success!")))),this.SaveGameScore()},e.prototype.CreateWorld=function(){this.world=new p2.World({gravity:[0,-9.8]}),this.world.sleepMode=p2.World.BODY_SLEEPING,this.world.on("beginContact",this.BeginContact,this),egret.Ticker.getInstance().register(function(t){this.world.step(this.WorldStep/1e3);for(var e=this.world.bodies.length,i=0;e>i;i++){var a=this.world.bodies[i],s=a.displays[0];s&&(s.x=a.position[0]*this.factor,s.y=this.StageHeight-a.position[1]*this.factor,s.rotation=360-180*a.angle/Math.PI)}if(0==this.choose){this.LineX1=this.HeroBody.position[0]*this.factor,this.LineY1=this.StageHeight-this.HeroBody.position[1]*this.factor,this.LineImage.x=this.LineX1,this.LineImage.y=this.LineY1;var o=this.LineX1-this.LineX2,r=this.LineY1-this.LineY2,n=Math.atan(r/o)/Math.PI*180+90;0>o&&(n=-180+n),-180>n?n+=360:n>180&&(n-=360),this.LineImage.rotation=n,this.LineImage.height=Math.sqrt(o*o+r*r)}else 1==this.choose&&(0==this.GameState||2==this.GameState)&&(this.DrawMap(),this.DrawHero())},this)},e.prototype.BeginContact=function(t){var e=t.bodyA,i=t.bodyB;if(e.id>=100||i.id>=100){var a=RES.getRes("soundjump_mp3");a.play(0,1)}if((105==e.id||105==i.id)&&1==this.NodeImage[2].visible){for(var s=0;2>s;s++)this.NodeImage[s+2].visible=!1;this.HeroState=0,this.LineImage.visible=!1,this.world.removeConstraint(this.LineConstraint)}if((106==e.id||106==i.id)&&4!=this.GameState){this.GameState=4,this.Connect.onDead(this.NumGate);var a=RES.getRes("soundhurt_mp3");a.play(0,1),this.ShowADNow(2)}},e.prototype.CreateHero=function(){this.HeroBody=new p2.Body({mass:1,position:[this.HeroImage[0].x/this.factor,(this.StageHeight-this.HeroImage[0].y)/this.factor]}),this.HeroShape=new p2.Rectangle(this.HeroImage[0].width/this.factor,this.HeroImage[0].height/this.factor),this.HeroBody.addShape(this.HeroShape),this.HeroShape.material=this.Stuff[0],this.HeroBody.displays=[this.HeroImage[0]],this.HeroBody.id=-1,this.HeroBody.damping=0,this.world.addBody(this.HeroBody),this.HeroBody.fixedRotation=!0},e.prototype.CreateGuai=function(t,e,i,a){this.GuaiImage[this.GuaiNum-1]=new egret.Bitmap(RES.getRes(a)),this.HeroLayer.addChildAt(this.GuaiImage[this.GuaiNum-1],0),this.GuaiImage[this.GuaiNum-1].pos(t,e,2*i,2*i),this.GuaiBody[this.GuaiNum-1]=new p2.Body({mass:0,position:[t/this.factor,(this.StageHeight-e)/this.factor]}),this.GuaiShape[this.GuaiNum-1]=new p2.Circle(i/this.factor),this.GuaiBody[this.GuaiNum-1].addShape(this.GuaiShape[this.GuaiNum-1]),this.GuaiBody[this.GuaiNum-1].displays=[this.GuaiImage[this.GuaiNum]],this.GuaiBody[this.GuaiNum-1].id=this.GuaiNum,this.GuaiShape[this.GuaiNum-1].sensor=!0,this.world.addBody(this.GuaiBody[this.GuaiNum-1])},e.prototype.CreateRole=function(t,e,i,a,s,o){var r=new egret.Bitmap(RES.getRes(o));r.pos(t,e,i,a),this.addChild(r);var n=new p2.Body({mass:s,position:[t/this.factor,(this.StageHeight-e)/this.factor],sensor:1}),h=new p2.Rectangle(i/this.factor,a/this.factor);return n.addShape(h),n.damping=0,n.displays=[r],this.world.addBody(n),n},e.prototype.CreateRect=function(t,e,i,a,s){var o=new egret.Bitmap(RES.getRes(s));this.HeroLayer.addChild(o),o.pos(t,e,o.width,o.height);var r=new p2.Body({mass:0,position:[t/this.factor,(this.StageHeight-e)/this.factor],sensor:1}),n=new p2.Rectangle(o.width/this.factor,o.height/this.factor);r.addShape(n);var h=1;h=3>=a?1:4==a?2:3,n.material=this.Stuff[h],r.displays=[o],r.id=100+a,r.angle=i/180*Math.PI,this.world.addBody(r)},e.prototype.CreateTriangle=function(t,e,i,a,s,o){var r=new egret.Bitmap(RES.getRes(o));r.pos(t,e,i,a),this.MapLayer.addChild(r);var n=[[0,a/2/this.factor],[-(i/2)/this.factor,-(a/2)/this.factor],[i/2/this.factor,-(a/2)/this.factor]],h=new p2.Convex(n,[]),c=(new p2.Convex(n,[]),new p2.Body({mass:1,position:[t/this.factor,(this.StageHeight-e)/this.factor]}));c.addShape(h),c.displays=[r],this.world.addBody(c)},e.prototype.CreateLine=function(t,e,i,a,s,o){var r=new egret.Bitmap(RES.getRes(o));r.pos(t,e,i,a),this.MapLayer.addChild(r);var n=new p2.Body({mass:s,position:[t/this.factor,(this.StageHeight-e)/this.factor]}),h=new p2.Rectangle(i/this.factor,a/this.factor);n.addShape(h),n.displays=[r],this.world.addBody(n)},e.prototype.MoveOrNot=function(){this.ReleaseGame(),this.choose=1,this.InitGame()},e.prototype.ShowTipView=function(t){var e=new egret.Bitmap(RES.getRes("showtipsbg_png"));this.addChild(e),e.alpha=0,e.scaleX=.3,e.scaleY=.3,e.pos(320,500,543,60);var i=new egret.TextField;this.addChild(i),i.size=30,i.x=320,i.y=500,i.text=t,i.bold=!0,i.textColor=862853,i.alpha=0,i.anchorOffsetX=i.width/2,i.anchorOffsetY=i.height/2,egret.Tween.get(e).to({scaleX:1,scaleY:1},600,egret.Ease.getBackOut(3)),egret.Tween.get(e).to({alpha:1},300).to({},1e3).to({y:e.y-120,alpha:0},500),egret.Tween.get(i).to({alpha:1},600).to({},700).to({y:i.y-120,alpha:0},500);var a=RES.getRes("soundwarn_mp3");a.play(0,1)},e.prototype.ShowAgain=function(){this.GameState=1,this.TimeState=6,this.OverImage[0].visible=!0,this.OverImage[1].visible=!0,this.OverImage[2].visible=!0,this.OverImage[6].visible=!0,this.OverImage[0].alpha=0,egret.Tween.get(this.OverImage[0]).to({alpha:1},800)},e.prototype.EndAgain=function(t){this.OverImage[1].visible=!1,this.OverImage[2].visible=!1,this.OverImage[6].visible=!1,0==t&&egret.Tween.get(this.OverImage[0]).to({alpha:0},500),this.Lizi2.stop(),this.removeChild(this.Lizi2)},e.prototype.ShowEnd=function(){this.HitImage[0]=new egret.Bitmap(RES.getRes("overwin_png")),this.HitImage[1]=new egret.Bitmap(RES.getRes("overtitle_png"));for(var t=0;5>t;t++)this.HitImage[t+2]=new egret.Bitmap(RES.getRes("showrank1_png"));for(var t=0;7>t;t++)this.HeroLayer.addChild(this.HitImage[t]);this.HitImage[0].pos(this.NumDistance,this.StageHeight/2,8,this.StageHeight),this.HitImage[1].pos(this.NumDistance+320,150,415,118),this.HitImage[2].pos(this.NumDistance+200,410,200,70),this.HitImage[3].pos(this.NumDistance+440,490,200,70),this.HitImage[4].pos(this.NumDistance+230,650,200,70),this.HitImage[5].pos(this.NumDistance+470,730,200,70),this.HitImage[6].pos(this.NumDistance+170,880,200,70)},e.prototype.ShowRankEnd=function(){var t=this;console.log("coming");var e=this.NumGate-1,i=this.NumTime;e>=80&&(e=(e-80)%60+20),0==this.ChallengeMode&&1==this.Connect.canAutoChallengePost()&&this.Connect.challengePost(this.NumGate,this.NumTime/10),this.Connect.getLevelRanks(this.NumGate,i,1==this.ChallengeMode).then(function(a){if(1==t.choose&&2==t.GameState){t.ShowFriend=1;var s=0,o=[],r=[],n=[],h=[],c=[],l=[];if(t.UserID3=[],o[0]=t.Connect.GetMyName(),r[0]=t.NumTime,l[0]=t.Connect.GetMyImage(),n[0]=t.NowHeroTT,c[0]=0,t.UserID3[0]="0",null!=a){var u=a;console.log(u.map(function(t){return t.name}));for(var d=u.map(function(t){return t.id}),p=u.map(function(t){return t.name}),g=u.map(function(t){return t.score}),m=u.map(function(t){return t.photo}),f=0;f<d.length;f++)if(d[f]==t.Connect.GetMyID());else if(g[f]>=999);else if(s++,o[s]=p[f],r[s]=g[f],l[s]=m[f],n[s]=Math.abs(8-f+t.NumGate%3)%15+1,c[s]=1,t.UserID3[s]=d[f],s>=4){console.log("取到前4名好友成绩了");break}}var y=t.GameDate.GetRankHighScore(e);if(4>s)for(var f=s+1;5>f;f++)o[f]=t.Connect.GetEndUserName(f),y>=i?r[f]=t.NumTime+.02*y*(f-3):r[f]=t.NumTime+.05*y*(f-3),l[f]="flag"+t.Connect.GetEndUserCountry(f)+"_png",n[f]=Math.floor(15*Math.random()+1),c[f]=2,t.UserID3[f]="0";for(var f=0;4>f;f++)for(var _=0;4-f>_;_++)if(r[_]>r[_+1]){var I=r[_];r[_]=r[_+1],r[_+1]=I;var S=o[_];o[_]=o[_+1],o[_+1]=S;var v=l[_];l[_]=l[_+1],l[_+1]=v;var w=n[_];n[_]=n[_+1],n[_+1]=w;var R=c[_];c[_]=c[_+1],c[_+1]=R;var k=t.UserID3[_];t.UserID3[_]=t.UserID3[_+1],t.UserID3[_+1]=k}var B=1;if(y>=i?(B=10-Math.floor(20*(y-i)/y),1>=B&&(B=1)):(B=10+Math.floor(50*(i-y)/y),B>=100&&(B=100)),0==c[0]&&1!=B){for(var f=4;f>0;f--)o[f]=o[f-1],r[f]=r[f-1],l[f]=l[f-1],n[f]=n[f-1],c[f]=c[f-1],t.UserID3[f]=t.UserID3[f-1];o[0]=t.Connect.GetEndUserName(0),r[0]=t.NumTime-.02*y,l[0]="flag"+t.Connect.GetEndUserCountry(0)+"_png",n[0]=Math.floor(15*Math.random()+1),c[0]=2,t.UserID3[0]="0"}for(var f=0;5>f;f++)y>=i?h[f]=B+Math.floor(20*(r[f]-i)/y):h[f]=B+Math.floor(50*(r[f]-i)/y),h[f]<1&&(h[f]=1);for(var f=0;5>f;f++){0==c[f]&&(t.HitImage[f+2].texture=RES.getRes("showrank2_png")),t.yyName="showman"+n[f];var b=new egret.Bitmap(RES.getRes(t.yyName+"1_png")),C=new egret.Bitmap(RES.getRes(t.yyName+"2_png"));t.addChild(b),t.addChild(C),b.pos(t.HitImage[f+2].x+t.HeroLayer.x,-100,122.4,132.3),C.pos(t.HitImage[f+2].x+t.HeroLayer.x,-100,122.4,132.3);var N=10*Math.floor(10*Math.random()+1)+180;egret.Tween.get(b,{loop:!0}).to({alpha:0},0).to({alpha:0},N).to({alpha:1},0).to({alpha:1},N),egret.Tween.get(C,{loop:!0}).to({alpha:1},0).to({alpha:1},N).to({alpha:0},0).to({alpha:0},N),egret.Tween.get(b).to({y:t.HitImage[f+2].y-80},300+100*f),egret.Tween.get(C).to({y:t.HitImage[f+2].y-80},300+100*f)}for(var L,T,E,x,G=function(e){if(L=new egret.BitmapText,t.addChild(L),L.font=RES.getRes("numimage_fnt"),L.x=t.HitImage[e+2].x+t.HeroLayer.x,L.y=t.HitImage[e+2].y-4,L.text=Math.floor(r[e]/10)+"d"+Math.floor(r[e]%10)+"s",L.scaleX=.27,L.scaleY=.27,L.anchorOffsetX=L.width/2,L.anchorOffsetY=L.height/2,T=new egret.TextField,t.addChild(T),T.size=20,T.bold=!0,T.x=t.HitImage[e+2].x+t.HeroLayer.x,T.y=t.HitImage[e+2].y-160,T.text=o[e],T.anchorOffsetX=T.width/2,T.anchorOffsetY=T.height/2,E=new egret.TextField,t.addChild(E),E.size=23,E.bold=!0,E.textColor=6225883,E.x=t.HitImage[e+2].x+t.HeroLayer.x,E.y=t.HitImage[e+2].y+16,E.text=h[e]+"",E.anchorOffsetX=E.width/2,E.anchorOffsetY=E.height/2,c[e]<=1){var i=new egret.Bitmap;t.addChild(i),i.pos(T.x-T.width/2-23,T.y,30,30),RES.getResByUrl(l[e],function(e){i.texture=e;var a=new egret.Shape;a.graphics.beginFill(255),a.graphics.drawCircle(i.x,i.y,15),a.graphics.endFill(),t.addChild(a),i.mask=a},t,RES.ResourceItem.TYPE_IMAGE)}else x=new egret.Bitmap(RES.getRes(l[e])),t.addChild(x),x.pos(T.x-T.width/2-23,T.y,26,26);0==t.ChallengeMode&&1==c[e]&&(t.HitImage[e+2].texture=RES.getRes("showrank3_png"),L.x+=40,L.y+=37,E.x-=50,E.y+=20,E.size=19,1==h[e]?E.text=h[e]+"st":2==h[e]?E.text=h[e]+"nd":3==h[e]?E.text=h[e]+"rd":E.text=h[e]+"th")},f=0;5>f;f++)G(f);0==t.ChallengeMode&&t.OverReward()}})["catch"](function(t){console.log("AAAAA"+t)})},e.prototype.ShowFire=function(){if(1==this.choose&&2==this.GameState){var t=new particle.GravityParticleSystem(RES.getRes("lihua"+Math.floor(2*Math.random()+1)+"_png"),RES.getRes("lihua_json"));this.addChild(t),t.x=50*Math.floor(10*Math.random()+1)+50,t.y=10*Math.floor(10*Math.random()+1)+100,t.start(),t.emissionTime=200;var e=RES.getRes("soundbomb_mp3");e.play(0,1)}},e.prototype.ShowResult=function(){this.GameState=2,this.ShowADNow(1),this.InterImage[1].visible=!1,this.Connect.onGameOver(this.NumGate);for(var t=0;5>t;t++)egret.setTimeout(this.ShowFire,this,500+600*t);for(var e=[],i=0,t=0;9>t;t++)0==this.NumLockTT[t]&&(e[i]=t+1,i++);if(0==this.Connect.isSuper()){i=0,e=[];for(var t=3;7>t;t++)0==this.NumLockTT[t]&&(e[i]=t+1,i++)}var a=1;0!=i&&(a=e[Math.floor(Math.random()*i)],this.NumGate<=2&&0==this.NumLockTT[1]&&1==this.Connect.isSuper()&&(a=2));var s=new egret.Bitmap(RES.getRes("overlight_png"));this.addChild(s),s.pos(490,860,162,162),egret.Tween.get(s,{loop:!0}).to({alpha:.5},450).to({alpha:1},80),this.OverImage[0]=new egret.Bitmap(RES.getRes("overbtn1_png")),this.OverImage[2]=new egret.Bitmap(RES.getRes("overbtn3_png")),this.OverImage[3]=new egret.Bitmap(RES.getRes("overbtn4_png")),1==this.ChallengeMode?this.OverImage[1]=new egret.Bitmap(RES.getRes("overbtn5_png")):this.OverImage[1]=new egret.Bitmap(RES.getRes("overbtn2_png")),this.OverImage[4]=new egret.Bitmap(RES.getRes("chooserole"+a+"_png"));for(var t=0;5>t;t++)this.addChild(this.OverImage[t]);1==a&&(this.OverImage[4].visible=!1,s.visible=!1),this.OverImage[0].pos(70-this.iPhoneW,70,108,98),this.OverImage[1].pos(320,1200,288,98),this.OverImage[2].pos(530,1200,108,98),this.OverImage[3].pos(110,1200,136,98),this.OverImage[4].pos(490,860,120,120);for(var t=1;4>t;t++)egret.Tween.get(this.OverImage[t]).to({y:1040},800);if(egret.Tween.get(this.OverImage[4],{loop:!0}).to({scaleX:.95,scaleY:.95},450).to({scaleX:1,scaleY:1},80),this.BuyHero=a,1!=a){if(this.FriendsLabel=new egret.BitmapText,this.addChild(this.FriendsLabel),this.FriendsLabel.font=RES.getRes("numimage_fnt"),this.FriendsLabel.x=490,this.FriendsLabel.y=940,this.FriendsLabel.scaleX=.4,this.FriendsLabel.scaleY=.4,this.BuyHero>=8||this.BuyHero<=3)this.ShareForRole(2);else{var o=0;o=4==this.BuyHero?2:5==this.BuyHero?6:6==this.BuyHero?12:20,this.FriendsLabel.text="v"+this.NumVideos+"l"+o}this.FriendsLabel.anchorOffsetX=this.FriendsLabel.width/2,this.FriendsLabel.anchorOffsetY=this.FriendsLabel.height/2}this.ShowRankEnd(),this.Connect.RequestUserData(),this.NumGate>this.NumGateTT&&0==this.ChallengeMode&&(this.NumGateTT=this.NumGate,this.SaveGameScore(),this.Connect.UpLoadScore(this.NumGateTT)),1==this.RecommendReady&&(this.RecommendImage=new egret.Bitmap(this.RecommendTextrue),this.addChild(this.RecommendImage),this.RecommendImage.pos(this.StageWidth-100-this.iPhoneW,190,130,166),egret.Tween.get(this.RecommendImage,{loop:!0}).to({scaleX:.95,scaleY:.95},600).to({scaleX:1,scaleY:1},600));var r=RES.getRes("soundwin2_mp3");r.play(0,1);var r=RES.getRes("soundwin3_mp3");r.play(0,1)},e.prototype.FightFriendsPress=function(t){if(0!=this.ShowFriend&&"0"!=this.UserID3[t]){this.SetColor(this.HitImage[2+t],2);var e=RES.getRes("soundpress_mp3");e.play(0,1)}},e.prototype.FightFriendsEnd=function(t){var e=this;0!=this.ShowFriend&&"0"!=this.UserID3[t]&&(console.log("挑战"+this.UserID3[t]),this.Connect.ChallengeGame(this.UserID3[t]).then(function(i){i&&(e.Connect.challengePost(e.NumGate,e.NumTime/10),e.HitImage[t+2].texture=RES.getRes("showrank4_png"),e.UserID3[t]="0")}))},e.prototype.PointInImage=function(t,e,i){return t>i.x-i.width/2&&t<i.x+i.width/2&&e>i.y-i.height/2&&e<i.y+i.height/2?!0:!1},e.prototype.ImageInImage=function(t,e){return t.x-t.width/2<e.x+e.width/2&&t.x+t.width/2>e.x-e.width/2&&t.y-t.height/2<e.y+e.height/2&&t.y+t.height/2>e.y-e.height/2?!0:!1},e.prototype.PointInRect=function(t,e,i,a,s){return s.x>t&&s.x<t+i&&s.y>e&&s.y<e+a?!0:!1},e.prototype.randomsort=function(t,e){return Math.random()>.5?-1:1},e.prototype.SetColor=function(t,e){var i=[];1==e?i=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]:2==e&&(i=[1,0,0,0,-60,0,1,0,0,-60,0,0,1,0,-60,0,0,0,1,0]);var a=new egret.ColorMatrixFilter(i);t.filters=[a]},e.prototype.SaveGameScore=function(){var t={NowHeros:this.NowHeroTT,NumGates:this.NumGateTT,NumVideos:this.NumVideos,NumLocks:this.NumLockTT};this.Connect.setData(t),this.Connect.setCurentScore(this.NumGateTT)},e.prototype.LoadGameScore=function(){var t=this.Connect.readData();if(console.log(t),0==t.NumGates||void 0==t.NumGates){console.log("Fuck"),this.NumGateTT=0,this.NowHeroTT=1,this.NumVideos=0,this.NumLockTT[0]=1;for(var e=1;15>e;e++)this.NumLockTT[e]=0;this.SaveGameScore()}else if(this.NowHeroTT=t.NowHeros,this.NumGateTT=t.NumGates,this.NumVideos=t.NumVideos,this.NumLockTT=t.NumLocks,void 0==this.NumLockTT[10])for(var e=9;15>e;e++)this.NumLockTT[e]=0;this.Connect.setCurentScore(this.NumGateTT)},e.prototype.TouchBegin=function(t){if(0==this.MoveCanNot){var e=new egret.Point(t.stageX/2-this.iPhoneW/2,t.stageY/2);if(0==this.choose)if(this.PointInRect(102,399,112,70,e)){this.SetColor(this.InterImage[2],2);var i=RES.getRes("soundpress_mp3");i.play(0,1)}else if(this.PointInRect(27,480,68,68,e)){this.SetColor(this.InterImage[3],2);var i=RES.getRes("soundpress_mp3");i.play(0,1)}else if(this.PointInRect(127,480,68,68,e)){this.SetColor(this.InterImage[4],2);var i=RES.getRes("soundpress_mp3");i.play(0,1)}else if(this.PointInRect(227,480,68,68,e)){this.SetColor(this.InterImage[5],2);var i=RES.getRes("soundpress_mp3");i.play(0,1)}else if(this.PointInRect(0-this.iPhoneW/2,53,56,85,e)&&1==this.RecommendReady){this.RecommendImage.alpha=.6;var i=RES.getRes("soundpress_mp3");i.play(0,1)}else for(var a=0;a<this.UserID2.length;a++){var s=this.RankImage[a].x-60-this.Scroller.scrollLeft,o=this.RankImage[a].y-30+500;if(this.PointInRect(s/2-this.iPhoneW/2,o/2,60,32,e)){this.SetColor(this.RankImage[a],2);var i=RES.getRes("soundpress_mp3");i.play(0,1)}}else if(100==this.choose){if(this.TouchNow=e.y,this.PointInRect(68,470,66,66,e)){this.SetColor(this.InterImage[1],2);var i=RES.getRes("soundpress_mp3");i.play(0,1)}else if(this.PointInRect(152,470,100,66,e)){this.SetColor(this.InterImage[2],2);var i=RES.getRes("soundpress_mp3");i.play(0,1)}else for(var a=0;15>a;a++)if(this.PointInRect(50+a%3*80,220+90*Math.floor(a/3)-this.Scroller.scrollTop/2,60,60,e)){this.SetColor(this.HeroImage[a],2);var i=RES.getRes("soundpress_mp3");i.play(0,1)}}else if(110==this.choose){if(this.PointInRect(127,480,67,65,e)){this.SetColor(this.InterImage[2],2);var i=RES.getRes("soundpress_mp3");i.play(0,1)}}else if(1==this.choose)if(0==this.GameState){if(this.NumGate<=3&&1==this.HelpImage[0].visible)for(var a=0;3>a;a++)this.HelpImage[a].visible=!1;if(this.PointInRect(0-this.iPhoneW/2,0-this.iPhoneH/2,50,50,e)){this.SetColor(this.InterImage[1],2);var i=RES.getRes("soundpress_mp3");i.play(0,1)}else if(this.PointInRect(75,500,170,50,e)&&this.ShowSkip>=3){this.SetColor(this.InterImage[7],2);var i=RES.getRes("soundpress_mp3");i.play(0,1)}else if(this.ShowSkip>=3&&1==this.InterImage[7].visible&&(this.InterImage[7].visible=!1),0==this.HeroState){this.GetNode();var i=RES.getRes("soundhit_mp3");i.play(0,1)}}else if(1==this.GameState);else if(2==this.GameState)if(this.TouchNow=1,this.PointInRect(209,387,73,80,e)&&1!=this.BuyHero){this.SetColor(this.OverImage[4],2);var i=RES.getRes("soundpress_mp3");i.play(0,1)}else if(this.PointInRect(3-this.iPhoneW/2,3,65,60,e)){this.SetColor(this.OverImage[0],2);var i=RES.getRes("soundpress_mp3");i.play(0,1)}else if(this.PointInRect(18,490,65,60,e)){this.SetColor(this.OverImage[3],2);var i=RES.getRes("soundpress_mp3");i.play(0,1)}else if(this.PointInRect(85,490,150,60,e)){this.SetColor(this.OverImage[1],2);var i=RES.getRes("soundpress_mp3");i.play(0,1)}else if(this.PointInRect(236,490,60,60,e)){this.SetColor(this.OverImage[2],2);var i=RES.getRes("soundpress_mp3");i.play(0,1)}else if(this.PointInRect(this.StageWidth/2-82-this.iPhoneW/2,53,65,85,e)&&1==this.RecommendReady){this.RecommendImage.alpha=.6;var i=RES.getRes("soundpress_mp3");i.play(0,1)}else this.PointInRect(55,120,90,100,e)?this.FightFriendsPress(0):this.PointInRect(175,156,90,100,e)?this.FightFriendsPress(1):this.PointInRect(70,238,90,100,e)?this.FightFriendsPress(2):this.PointInRect(191,280,90,100,e)?this.FightFriendsPress(3):this.PointInRect(40,353,90,100,e)&&this.FightFriendsPress(4);else if(5==this.GameState&&this.PointInRect(87,352,147,50,e)){this.SetColor(this.RewardImage[6],2);var i=RES.getRes("soundpress_mp3");i.play(0,1)}}},e.prototype.TouchMoved=function(t){new egret.Point(t.stageX/2-this.iPhoneW/2,t.stageY/2);1==this.choose},e.prototype.TouchEnded=function(t){var e=this;if(0==this.MoveCanNot){var i=new egret.Point(t.stageX/2-this.iPhoneW/2,t.stageY/2);if(0==this.choose){for(var a=0;4>a;a++)this.SetColor(this.InterImage[a+2],1);if(this.PointInRect(102,399,112,70,i))this.Connect.onGameStart().then(function(){e.MoveOrNot()});else if(this.PointInRect(27,480,68,68,i))this.ReleaseGame(),this.choose=100,this.InitGame();else if(this.PointInRect(0-this.iPhoneW/2,53,65,85,i)&&1==this.RecommendReady)this.RecommendImage.alpha=1,this.Connect.onRecommendGameTapped(this.RecommendID);else if(this.PointInRect(127,480,68,68,i))this.Connect.hasPurchasedRemoveAD()||!this.Connect.suportIAP()?this.Connect.ShareGame():this.Connect.purchaseRemoveAD().then(function(t){t?(e.InterImage[4].texture=RES.getRes("titlebtn3_png"),e.ShowTipView("Thanks!")):e.Connect.hasPurchasedRemoveAD()?(e.InterImage[4].texture=RES.getRes("titlebtn3_png"),e.ShowTipView("Thanks!")):e.ShowTipView("Buy Fail!")});else if(this.PointInRect(227,480,68,68,i))this.ReleaseGame(),this.choose=110,this.InitGame();else{for(var a=0;a<this.UserID2.length;a++)this.SetColor(this.RankImage[a],1);for(var a=0;a<this.UserID2.length;a++){var s=this.RankImage[a].x-60-this.Scroller.scrollLeft,o=this.RankImage[a].y-30+500;this.PointInRect(s/2-this.iPhoneW/2,o/2,60,32,i)&&(console.log("挑战"+this.UserID2[a]),this.Connect.ChallengeGame(this.UserID2[a]).then(function(t){t&&e.MoveOrNot()}))}}}else if(100==this.choose){for(var a=0;15>a;a++)this.SetColor(this.HeroImage[a],1);if(this.SetColor(this.InterImage[1],1),this.SetColor(this.InterImage[2],1),Math.abs(this.TouchNow-i.y)>30)return;if(this.TouchNow=0,this.PointInRect(68,470,66,66,i))this.ReleaseGame(),this.choose=0,this.InitGame();else if(this.PointInRect(152,470,100,66,i))1==this.NumLockTT[this.BuyHero-1]?(this.ReleaseGame(),this.choose=1,this.InitGame()):this.BuyHero>=8||this.BuyHero<=3?(this.Connect.inviteForSkin(),this.Connect.pullInviteCount()):this.ShowADNow(0);else for(var a=0;15>a;a++)this.PointInRect(50+a%3*80,220+90*Math.floor(a/3)-this.Scroller.scrollTop/2,60,60,i)&&(this.InterImage[5].texture=RES.getRes("chooseman"+(a+1)+"1_png"),this.InterImage[6].texture=RES.getRes("chooseman"+(a+1)+"2_png"),this.InterImage[7].pos(this.HeroImage[a].x,this.HeroImage[a].y,140,140),this.ShowRole(a,1))}else if(110==this.choose)this.SetColor(this.InterImage[2],1),this.PointInRect(127,480,67,65,i)&&(this.ReleaseGame(),this.choose=0,this.InitGame());else if(1==this.choose)if(0==this.GameState){if(this.SetColor(this.InterImage[1],1),this.SetColor(this.InterImage[2],1),this.SetColor(this.InterImage[7],1),this.PointInRect(0-this.iPhoneW/2,0-this.iPhoneH/2,50,50,i)?(this.ReleaseGame(),this.choose=1,this.InitGame()):this.PointInRect(75,500,170,50,i)&&this.ShowSkip>=3&&this.ShowADNow(0),1==this.NodeImage[2].visible){for(var a=0;2>a;a++)this.NodeImage[a+2].visible=!1;this.HeroState=0,this.LineImage.visible=!1,this.world.removeConstraint(this.LineConstraint)}}else if(1==this.GameState);else if(2==this.GameState){if(this.SetColor(this.OverImage[0],1),this.SetColor(this.OverImage[1],1),this.SetColor(this.OverImage[2],1),this.SetColor(this.OverImage[3],1),this.SetColor(this.OverImage[4],1),0==this.TouchNow)return;if(this.TouchNow=0,this.PointInRect(209,387,73,80,i)&&1!=this.BuyHero)1==this.NumLockTT[this.BuyHero-1]?(this.NowHeroTT=this.BuyHero,this.MoveOrNot()):this.BuyHero>=8||this.BuyHero<=3?(this.Connect.inviteForSkin(),this.Connect.pullInviteCount()):this.ShowADNow(0);else if(this.PointInRect(3-this.iPhoneW/2,3,65,60,i))1==this.ChallengeMode&&this.Connect.challengePost(this.NumGate,this.NumTime/10),this.ChallengeMode=0,this.ChallengeGate=0,this.ReleaseGame(),this.choose=0,this.InitGame();else if(this.PointInRect(18,490,65,60,i))1==this.ChallengeMode&&this.Connect.challengePost(this.NumGate,this.NumTime/10),this.Connect.challengeShare(this.NumGate,this.NumTime/10).then(function(t){t&&(e.ShowTipView("Challenge Sent"),e.SendMessage=1,e.Connect.challengePost(e.NumGate,e.NumTime/10))});else if(this.PointInRect(85,490,150,60,i))1==this.ChallengeMode?(this.Connect.challengePost(this.NumGate,this.NumTime/10),this.ReleaseGame(),1==this.ChallengeMode?this.choose=0:this.choose=1,this.ChallengeMode=0,this.ChallengeGate=0,this.InitGame(),0==this.choose&&this.ShowTipView("Score Send")):(this.ReleaseGame(),this.choose=1,this.InitGame());else if(this.PointInRect(236,490,60,60,i))0==this.ChallengeMode&&this.NumGateTT--,this.ReleaseGame(),this.choose=1,this.InitGame();else if(this.PointInRect(this.StageWidth/2-82-this.iPhoneW/2,53,65,85,i)&&1==this.RecommendReady)this.RecommendImage.alpha=1,this.Connect.onRecommendGameTapped(this.RecommendID);else{for(var a=0;5>a;a++)this.SetColor(this.HitImage[2+a],1);this.PointInRect(55,120,90,100,i)?this.FightFriendsEnd(0):this.PointInRect(175,156,90,100,i)?this.FightFriendsEnd(1):this.PointInRect(70,238,90,100,i)?this.FightFriendsEnd(2):this.PointInRect(191,280,90,100,i)?this.FightFriendsEnd(3):this.PointInRect(40,353,90,100,i)&&this.FightFriendsEnd(4)}}else 5==this.GameState&&(this.SetColor(this.RewardImage[6],1),this.PointInRect(87,352,147,50,i)?(this.NowHeroTT=this.NumReward,this.CloseReward(),this.GameState=2):(this.CloseReward(),this.GameState=2))}},e}(egret.Sprite);__reflect(GameScene.prototype,"GameScene");var BasePlatform=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.challenge_info=null,e.isNewPlayer=!1,e.playerType="old",e.appId="242594136487850",e.appName="Swing Swing",e.switchGameInfo=null,e.invite_skin_data=null,e.entry="normal",e.$remoteData=null,e}return __extends(e,t),e.prototype.needAccount=function(){return!1},e.prototype.initSDK=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,this.initRemoteData()];case 1:return t.sent(),[2]}})})},e.prototype.setLoadingProgress=function(t){},e.prototype.startGame=function(t,e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},e.prototype.getToken=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,null]})})},Object.defineProperty(e.prototype,"userInfo",{get:function(){return{name:"terran",id:"122",photo:"",friends:[],lang:"en_US"}},enumerable:!0,configurable:!0}),e.prototype.getContextId=function(){return""},e.prototype.getPlayerId=function(){return"terran"},e.prototype.hasIAD=function(){return!0},e.prototype.showIAD=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},e.prototype.hasRAD=function(){return!0},e.prototype.showRAD=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},e.prototype.suportAD=function(){return!0},e.prototype.getFriends=function(){return[]},e.prototype.invite=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},e.prototype.share=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,!0]})})},e.prototype.choose=function(t,e,i){return void 0===e&&(e=!1),void 0===i&&(i="default"),__awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,!1]})})},e.prototype.switchCtx=function(t,e){return void 0===e&&(e="default"),__awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,!0]})})},e.prototype.createCtx=function(t,e){return void 0===e&&(e="default"),__awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,!0]})})},e.prototype.getContextPlayers=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,[]]})})},e.prototype.switchGame=function(t,e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},e.prototype.updateStatues=function(t,e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},e.prototype.listResponse=function(){return[]},e.prototype.doResponse=function(t,e){},e.prototype.log=function(t,e,i){void 0===i&&(i=1),console.log("name",t,"data",JSON.stringify(e))},e.prototype.getWorldEntries=function(){return[]},e.prototype.getWorldEntriesAsync=function(){return Promise.resolve([])},e.prototype.getWorldFriendEntries=function(){return[]
},e.prototype.getWorldFriendEntriesAsync=function(){return Promise.resolve([])},e.prototype.getHighScore=function(){return+egret.localStorage.getItem("hight_score1")||0},e.prototype.setHighScore=function(t,e){egret.localStorage.setItem("hight_score1",t+"")},e.prototype.initRemoteData=function(){return __awaiter(this,void 0,void 0,function(){var t,e,i,a,s;return __generator(this,function(o){switch(o.label){case 0:return[4,this.getData(["user_info1"])];case 1:t=o.sent(),e={};try{e=JSON.parse(t.user_info1)}catch(r){}i=null;try{i=JSON.parse(localStorage.getItem("local_user_info_"+this.getPlayerId()))}catch(r){}return a=i&&+i.w__tsp||-1,s=e&&+e.w__tsp||0,a>s&&(e=i,console.log("use local user_info",a,s)),this.$remoteData=e||{},[2]}})})},e.prototype.syncRemoteData=function(t){return void 0===t&&(t=!1),__awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(i){switch(i.label){case 0:return this.$remoteData.w__tsp=Date.now(),e=JSON.stringify(this.$remoteData),[4,this.setData({user_info1:e},t)];case 1:return i.sent(),localStorage.setItem("local_user_info_"+this.getPlayerId(),e),[2]}})})},e.prototype.cr=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return this.$remoteData={},[4,this.syncRemoteData(!0)];case 1:return t.sent(),this.emit("cr_data"),[2]}})})},Object.defineProperty(e.prototype,"remoteData",{get:function(){return this.$remoteData},enumerable:!0,configurable:!0}),e.prototype.getData=function(t){return __awaiter(this,void 0,void 0,function(){var e,i,a,s;return __generator(this,function(o){for(e={},i=0,a=t;i<a.length;i++)s=a[i],e[s]=egret.localStorage.getItem(s);return[2,e]})})},e.prototype.setData=function(t,e){return void 0===e&&(e=!1),__awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(i){for(e in t)egret.localStorage.setItem(e,t[e]);return[2]})})},e.prototype.canAdd2HomeScreen=function(){return!0},e.prototype.add2HomeScreen=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{res:!0,code:""}]})})},e.prototype.checkBotSubscribe=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{result:!0}]})})},e.prototype.suportIAP=function(){return!1},e.prototype.purchaseAsync=function(t,e){return void 0===e&&(e=""),__awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,!1]})})},e.prototype.hasPurchased=function(t){return!1},e}(Emiter);__reflect(BasePlatform.prototype,"BasePlatform",["IResponder"]);var GameMessage=function(t){function e(){var e=t.call(this)||this;return e.RankScore=[13,17,38,44,62,54,71,55,53,80,70,65,79,52,103,48,66,64,69,49,61,58,62,59,82,79,66,63,64,58,95,63,54,78,72,86,91,57,50,104,69,76,92,90,66,60,95,89,88,94,77,81,100,79,74,84,62,91,113,77,72,79,90,77,84,141,96,86,86,116,82,68,101,79,58,53,83,113,82,84,88,101,112,119,127,159,122,95,125,136,104,180,110,117,102,159,203,268,306,240],e.BlockState=[],e.BlockRotate=[],e.BlockStateX=[],e.BlockStateY=[],e}return __extends(e,t),e.prototype.SetGateMessage=function(t){switch(t){case 1:this.BlockState=[1,1,7,8],this.BlockRotate=[0,0,0,0],this.BlockStateX=[232,119,465,843],this.BlockStateY=[-426,178,746,565];break;case 2:this.BlockState=[1,1,7,8,7],this.BlockRotate=[0,0,0,0,0],this.BlockStateX=[232,119,454,1476,1039],this.BlockStateY=[-426,178,945,553,911];break;case 3:this.BlockState=[1,7,8,7,5,7,7,7,5,7,7,5],this.BlockRotate=[0,0,0,0,0,0,0,0,0,0,0,0],this.BlockStateX=[119,423,3996,1056,1493,1667,1817,2274,2625,2981,3674,3413],this.BlockStateY=[178,965,536,968,-50,-222,920,817,-30,863,729,1150];break;case 4:this.BlockState=[1,7,7,7,7,7,7,7,7,8,7,7,7,7,7],this.BlockRotate=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.BlockStateX=[105,329,695,1093,1425,1726,1672,1956,2249,4637,2616,3101,3486,3906,4392],this.BlockStateY=[122,914,852,897,860,940,-219,732,732,548,883,874,871,920,857];break;case 5:this.BlockState=[4,5,5,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8],this.BlockRotate=[20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.BlockStateX=[119,1519,224,823,1161,1539,1828,2181,2598,2973,3374,3666,4054,4684,5221,5681,6017,6488,6940,7368,7673],this.BlockStateY=[445,-293,79,806,781,931,903,971,883,920,798,721,923,917,905,874,874,982,908,888,573];break;case 6:this.BlockState=[1,4,3,3,3,4,3,4,4,4,4,4,4,3,3,7,7,7,7,7,7,7,7,7,3,3,3,3,8,7,7],this.BlockRotate=[40,20,0,0,0,0,0,5,5,0,5,0,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.BlockStateX=[273,173,957,1235,1513,1246,1789,2078,2369,1980,2659,1952,2949,3233,3512,1346,2186,2658,3007,3477,3932,4363,4794,5424,4825,5103,5382,5660,6980,6202,6661],this.BlockStateY=[-431,380,14,14,14,-177,14,165,139,-177,113,-179,85,-103,-103,820,1045,1028,985,903,1025,1036,789,942,-63,-63,-63,-63,550,815,891];break;case 7:this.BlockState=[5,5,5,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8],this.BlockRotate=[-40,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.BlockStateX=[105,1516,295,641,948,1232,1669,1979,2439,2970,3427,3897,4352,4883,5417,5894,6388,6875,7321,7795,8193,8514],this.BlockStateY=[613,-310,90,920,761,860,959,812,940,817,905,820,854,834,979,928,908,959,786,877,874,573];break;case 8:this.BlockState=[1,3,1,7,7,7,7,7,7,7,2,7,7,7,7,8],this.BlockRotate=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.BlockStateX=[119,2425,1019,582,1337,1689,2005,2611,3074,3608,3264,4214,4680,5123,5487,5825],this.BlockStateY=[144,120,80,800,763,954,942,934,783,900,0,1033,891,931,866,559];break;case 9:this.BlockState=[4,6,6,7,7,3,3,3,7,7,7,7,7,7,8],this.BlockRotate=[25,25,25,0,0,0,0,0,0,0,0,0,0,0,0],this.BlockStateX=[150,430,710,1607,2107,2885,3160,3436,3931,4431,4948,5334,2488,6028,6599],this.BlockStateY=[500,370,240,951,744,139,139,139,914,917,1050,761,792,894,505];break;case 10:this.BlockState=[1,2,7,7,7,7,2,7,7,7,4,7,7,7,7,7,7,4,7,8,7,7],this.BlockRotate=[0,0,10,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.BlockStateX=[122,880,384,894,1388,1746,1346,1951,2257,2905,3283,3635,4064,4607,5109,5563,6940,7376,6255,8222,7694,7947],this.BlockStateY=[0,-80,802,732,962,803,30,391,1008,871,346,758,817,871,999,894,789,360,891,553,905,732];break;case 11:this.BlockState=[1,7,7,4,4,4,7,4,7,7,7,7,7,7,7,7,3,3,3,3,3,3,3,3,3,7,7,7,7,8],this.BlockRotate=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.BlockStateX=[113,545,1669,1118,817,1434,1445,1720,2214,2481,2961,3424,3793,4418,4946,5418,3124,3390,3965,3678,4249,5893,6177,6461,6736,5897,6885,7568,8082,8515],this.BlockStateY=[102,871,-236,79,76,8,781,8,951,877,732,843,948,832,948,971,-80,-80,-80,-80,-80,80,80,80,80,823,923,877,695,539];break;case 12:this.BlockState=[1,7,7,3,3,7,7,7,7,3,7,7,3,7,5,5,5,7,7,7,7,8],this.BlockRotate=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,90,0,0,0,0,0,0,0],this.BlockStateX=[130,576,1482,914,1194,2022,2584,3144,3841,4772,4364,5216,5049,5821,6039,5137,5748,6322,6816,7338,7807,8196],this.BlockStateY=[28,823,684,-18,-18,931,843,951,985,116,954,781,-43,928,1059,1349,1351,869,965,812,942,556];break;case 13:this.BlockState=[1,7,5,7,7,7,7,5,7,7,4,4,7,7,7,7,5,7,4,7,7,7,8,7],this.BlockRotate=[0,0,0,0,0,0,0,0,-10,0,0,0,0,0,0,0,0,0,-15,0,0,0,0,0],this.BlockStateX=[127,599,1167,1093,1232,1661,2154,3275,2692,3588,4117,4398,4965,5550,6013,6532,6280,7290,8056,7894,8475,8968,9598,9365],this.BlockStateY=[147,877,965,860,860,772,1011,937,888,656,136,136,727,877,673,752,940,741,105,940,823,920,576,695];break;case 14:this.BlockState=[1,8,7,7,3,7,4,7,7,7,7,4,4,7,3,3],this.BlockRotate=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.BlockStateX=[129,6290,553,967,1048,1977,2406,1459,3860,4535,5272,2702,3e3,5820,1328,1607],this.BlockStateY=[183,556,984,809,3,631,280,889,834,899,667,280,282,870,3,3];break;case 15:this.BlockState=[1,7,7,7,5,7,7,7,3,2,3,5,7,7,7,7,2,7,7,6,7,7,3,3,3,3,3,3,3,3,7,7,7,6,7,7,7,7,8,7],this.BlockRotate=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-25,0,5,0,0,0,0,0,0,0,0,0,0,0,15,0,0,0,0,0,0],this.BlockStateX=[119,471,894,1757,1749,1391,2315,2781,2970,3228,3484,3507,3387,3867,4606,5066,5492,5732,6357,7074,7025,7620,6735,7014,7293,7571,7846,8125,8722,9001,8223,8697,9262,11300,9747,10340,10860,11405,12297,11964],this.BlockStateY=[5,775,871,1013,80,959,795,690,-54,0,-46,1110,789,749,1011,1045,-50,1042,860,656,1019,955,8,8,8,8,8,8,-77,-77,968,888,985,764,687,937,834,954,573,766];break;case 16:this.BlockState=[1,7,7,7,7,7,7,7,7,7,7,7,8],this.BlockRotate=[0,0,0,0,0,0,0,0,0,0,0,0,0],this.BlockStateX=[130,500,1e3,1400,1800,2300,2700,3200,3800,4100,4600,5300,5500],this.BlockStateY=[190,900,700,950,800,700,600,900,800,900,950,1e3,700,300];break;case 17:this.BlockState=[1,2,2,2,2,2,3,7,7,7,7,7,7,7,7,7,8],this.BlockRotate=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.BlockStateX=[130,1e3,1240,1480,1720,1960,4500,500,2300,2800,3200,3800,4100,4600,5300,5700,6e3],this.BlockStateY=[190,150,150,150,150,150,180,900,700,850,900,800,900,950,1e3,700,800,300];break;case 18:this.BlockState=[1,2,2,2,3,2,2,7,7,7,7,7,7,7,7,7,8],this.BlockRotate=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.BlockStateX=[130,1500,1740,1960,3500,5500,5740,600,1200,2300,2700,3200,3800,4100,4600,5300,6e3],this.BlockStateY=[190,100,200,100,150,50,150,1e3,900,700,850,900,800,900,950,1e3,700,300];break;case 19:this.BlockState=[1,2,2,2,2,2,2,2,2,7,7,7,7,7,7,8],this.BlockRotate=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.BlockStateX=[130,4760,5e3,5240,5480,5720,5960,6200,6440,500,1800,2800,3200,3800,4300,6600],this.BlockStateY=[190,50,50,50,50,50,50,50,50,900,880,600,900,500,760,950];break;case 20:this.BlockState=[4,7,7,7,7,7,7,7,7,7,8],this.BlockRotate=[25,0,0,0,0,0,0,0,0,0,0],this.BlockStateX=[130,1600,2300,2700,3200,3800,4100,4600,5500,6200,6500],this.BlockStateY=[190,1e3,700,850,900,800,900,950,1e3,700,800,300];break;case 21:this.BlockState=[1,7,7,5,5,7,7,5,5,5,5,4,7,7,7,7,7,6,7,7,7,8,7],this.BlockRotate=[0,0,0,-85,0,0,0,-85,-85,-80,0,0,0,0,0,0,0,-90,0,0,0,0,0],this.BlockStateX=[126,431,916,2434,773,1573,2233,3025,3614,4200,5467,4746,2700,3012,3739,3356,1951,4461,4608,5228,5726,6493,6145],this.BlockStateY=[167,968,922,574,94,832,1021,502,429,331,0,102,365,977,914,217,461,116,1038,965,852,562,785];break;case 22:this.BlockState=[1,4,4,4,7,7,2,2,7,7,7,4,7,7,7,8,7,5,3],this.BlockRotate=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.BlockStateX=[129,2626,1297,2332,945,2016,4745,4980,2758,3284,3744,3882,4780,4384,5330,5669,414,3271,5237],this.BlockStateY=[137,227,278,227,804,943,5,5,878,1026,985,210,1030,673,927,526,878,85,97];break;case 23:this.BlockState=[1,7,7,8,2,2,2,7,5,7,4,4,7,7,7,7,7,6,3],this.BlockRotate=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.BlockStateX=[121,479,1571,5854,929,1167,1405,1998,2196,2487,2881,3179,3498,4035,4639,5165,5628,2186,4907],this.BlockStateY=[-24,733,893,569,154,154,154,659,1031,774,91,94,1091,957,801,1063,863,213,127];break;case 24:this.BlockState=[1,7,7,8,2,2,2,7,5,7,4,4,7,7,7,7,7,6,3,4,6],this.BlockRotate=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.BlockStateX=[128,449,1571,6002,1558,1796,5066,2260,2728,2629,2881,3179,3387,4035,4639,5165,5693,1176,5317,862,4243],this.BlockStateY=[62,792,893,567,116,116,79,727,1013,545,91,94,1040,957,801,1063,862,278,172,278,371];break;case 25:this.BlockState=[1,4,7,7,7,2,7,7,7,5,5,7,8],this.BlockRotate=[0,23,0,0,0,0,0,0,0,0,0,0,0],this.BlockStateX=[1331,165,2450,3369,3960,4421,5070,5635,6309,7127,7505,7870,8201],this.BlockStateY=[162,142,891,754,881,134,869,377,580,194,1046,520,566];break;case 26:this.BlockState=[1,8,7,7,2,3,7,7,6,6,6,7,7,5,7,5,7,7,4,4,7,7],this.BlockRotate=[0,0,0,0,0,0,0,0,0,-10,0,0,0,0,0,0,0,0,0,0,0,0],this.BlockStateX=[121,7662,348,738,1045,1303,1501,2106,1810,2113,2414,2822,3349,3606,4776,4433,4116,5260,5915,6213,6620,7259],this.BlockStateY=[77,555,804,921,11,104,929,959,285,310,339,818,935,178,716,927,618,632,214,216,836,769];break;case 27:this.BlockState=[1,4,4,4,7,7,2,2,7,7,7,4,7,7,7,8,7,5,3,5,5],this.BlockRotate=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.BlockStateX=[128,3023,1374,2724,952,1801,3591,3824,2523,3361,4181,4635,5540,4988,6299,6626,508,1927,5839,2141,1721],this.BlockStateY=[164,101,297,101,799,902,-56,-56,838,989,804,135,767,977,862,553,924,-43,162,130,-171];break;case 28:this.BlockState=[1,8,7,7,3,7,4,7,7,7,7,4,4,7,3,3,3],this.BlockRotate=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.BlockStateX=[119,6290,408,967,1861,3033,942,1649,4043,4944,5451,4617,3640,5950,2679,2124,2399],this.BlockStateY=[102,556,821,809,-49,541,297,686,704,835,592,261,138,751,-49,-49,-49];break;case 29:this.BlockState=[1,2,2,2,2,2,5,7,7,4,4,8,4,7,7,7,7,7,7,5],this.BlockRotate=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.BlockStateX=[127,706,945,1181,1418,1656,2076,406,2076,2427,2724,6458,3021,3173,3853,4391,5013,5603,6171,5409],this.BlockStateY=[110,-73,-73,-73,-73,-73,989,744,296,60,61,550,61,795,1009,934,959,1079,760,170];break;case 30:this.BlockState=[1,4,4,4,7,7,2,2,7,7,7,4,7,7,7,8,7],this.BlockRotate=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.BlockStateX=[129,840,1279,1702,1017,1812,2322,2561,2839,3239,3846,4245,4561,5220,5833,6283,438],this.BlockStateY=[137,94,94,97,894,733,-13,-15,676,910,717,258,890,727,888,556,821];break;case 31:this.BlockState=[1,2,2,2,7,7,7,7,7,5,5,6,6,3,1,2,7,7,4,7,7,6,8,7],this.BlockRotate=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-90,0,0],this.BlockStateX=[127,1465,1702,1939,525,2628,3459,3964,4576,4940,844,3328,2648,5884,5146,5625,5453,6728,7359,7658,8151,7879,9293,8762],this.BlockStateY=[45,66,66,66,938,796,498,706,840,100,200,-53,200,151,-225,58,899,694,247,853,716,369,579,951];break;case 32:this.BlockState=[1,7,7,8,2,2,2,7,5,7,4,4,7,7,7,7,7,6,3,4,6,5,1,7,1,6],this.BlockRotate=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,90,0,0,0,0,0,0,0,90],this.BlockStateX=[128,500,1539,5935,983,1217,1455,2320,3579,2880,2907,3205,3386,4003,4549,4959,5589,2425,4625,1966,3506,5206,385,923,131,2426],this.BlockStateY=[62,1019,792,567,-119,145,-119,914,987,727,137,137,729,811,968,830,804,-12,24,349,138,87,62,907,415,289];break;case 33:this.BlockState=[1,8,7,7,3,7,4,7,7,7,7,4,4,7,3,3,3,2],this.BlockRotate=[0,0,0,0,0,0,15,0,0,0,0,0,0,0,0,0,0,0],this.BlockStateX=[122,6290,408,967,1861,2489,578,1351,3172,4348,5244,4638,3640,5802,4121,2124,2399,1600],this.BlockStateY=[150,556,821,809,-49,671,194,753,792,833,823,120,138,770,36,-49,-49,108];break;case 34:this.BlockState=[1,1,7,7,5,4,3,3,3,3,7,7,7,5,4,7,8,7,7,5],this.BlockRotate=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.BlockStateX=[126,126,364,1080,1669,2095,2555,2828,3380,3103,2645,3623,4369,4577,3927,5093,6587,5737,6176,6091],this.BlockStateY=[131,474,965,817,200,320,-57,-57,-57,-57,735,910,885,-2,75,852,563,758,601,967];break;case 35:this.BlockState=[1,1,7,7,5,4,3,3,3,3,7,7,7,5,4,7,8,7,7,5,2,2,7,4],this.BlockRotate=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.BlockStateX=[112,112,410,920,1015,1483,3110,6592,7145,6870,2320,2895,3574,1275,3934,5139,7340,5485,6324,2098,2615,2852,4639,4429],this.BlockStateY=[26,335,982,1054,202,239,7,123,123,123,975,898,710,1134,150,989,577,941,686,207,120,14,832,-152];break;case 36:this.BlockState=[1,1,7,7,5,4,3,3,3,3,7,7,7,5,4,7,8,7,7,5],this.BlockRotate=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.BlockStateX=[112,112,420,1240,790,1599,3018,5196,5753,5476,2320,3403,4538,2019,3714,4958,6815,6020,6479,3699],this.BlockStateY=[26,335,982,1e3,220,437,87,115,115,115,975,765,905,167,116,772,570,804,640,912];break;case 37:this.BlockState=[1,7,7,8,2,2,2,7,5,7,4,4,7,7,7,7,7,6,3,4,6,5],this.BlockRotate=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.BlockStateX=[128,449,1400,6002,1558,1796,5066,2260,2728,2629,2907,3205,3387,4035,4574,5040,5658,1176,5317,862,4243,4641],this.BlockStateY=[62,860,893,567,116,116,79,727,1013,545,137,137,1040,957,1011,905,753,278,172,278,371,215];break;case 38:this.BlockState=[1,7,7,8,2,2,2,7,5,7,4,4,7,7,7,7,7,6,3,4,6,5,1,7],this.BlockRotate=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,90,0,0,0,0,0,0],this.BlockStateX=[128,449,1483,5725,983,1220,1455,2260,1647,2629,2907,3205,3211,3812,4430,4807,5403,2338,4365,1864,4071,4977,385,954],this.BlockStateY=[62,792,744,564,-119,-119,-119,727,997,545,137,137,1028,837,985,673,905,104,46,147,219,-65,62,956];break;case 39:this.BlockState=[1,4,4,4,7,7,2,2,7,7,7,4,7,7,7,8,7],this.BlockRotate=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.BlockStateX=[129,2841,1352,2541,1173,2384,903,1828,2839,3160,3771,3882,4482,4967,5424,5669,438],this.BlockStateY=[137,212,130,210,770,797,-61,-87,676,857,912,210,811,680,871,526,821];break;case 40:this.BlockState=[1,6,5,7,7,7,4,6,6,6,7,7,7,8,7,7,7,7,4,4,4,7,5,6,6,6,3],this.BlockRotate=[0,0,0,0,0,0,15,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,0,10,10,10,0],this.BlockStateX=[126,1315,1856,420,826,1519,520,2617,2917,3214,2196,2932,3683,7426,4456,5138,5771,6348,4677,4977,5278,6993,6048,3523,3823,4121,6643],this.BlockStateY=[151,318,137,885,796,968,300,381,381,381,935,1069,885,563,1019,760,952,837,121,123,124,880,11,356,304,252,135];break;case 41:this.BlockState=[1,6,5,7,7,7,4,6,6,6,7,7,7,8,7,7,7,7,4,4,4,7,5,6,6,6,3,1],this.BlockRotate=[0,-10,0,0,0,0,0,-10,0,0,0,0,0,0,0,0,0,0,0,0,0,5,0,10,10,0,0,0],this.BlockStateX=[126,1515,3566,490,1374,2016,896,1814,2116,2418,2775,3443,3876,7426,4456,5215,5742,6182,4677,4977,6419,6739,5700,2724,3021,4362,7231,126],this.BlockStateY=[151,130,212,1014,908,1006,205,181,258,258,850,1023,903,563,1019,873,1021,943,121,123,290,1030,87,231,178,120,145,468];break;case 42:this.BlockState=[1,1,7,7,5,4,3,3,3,3,7,7,7,5,4,7,8,7,7,5],this.BlockRotate=[0,0,0,0,30,0,0,0,0,0,0,0,0,-30,0,0,0,0,0,0],this.BlockStateX=[112,112,491,1015,1e3,1640,3018,5196,5755,5477,2115,3120,4369,1400,3800,4823,6815,6020,6479,6659],this.BlockStateY=[26,335,949,946,237,227,87,115,115,115,951,1018,885,237,113,876,570,804,640,896];break;case 43:this.BlockState=[1,7,7,4,4,7,7,7,7,5,5,6,6,6,7,7,7,7,7,8,5,7,7],this.BlockRotate=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.BlockStateX=[124,517,1096,1415,1715,2383,3264,3914,4547,4918,5561,6360,6666,7102,5193,5905,6629,7480,8066,9249,8495,8498,9e3],this.BlockStateY=[175,856,1003,358,358,1006,831,1036,896,195,216,962,964,187,1009,681,795,631,810,577,900,542,829];break;case 44:this.BlockState=[1,5,5,7,7,4,4,2,2,7,6,7,7,7,4,4,4,4,7,7,3,2,7,7,8,6,7,7],this.BlockRotate=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,30,0,0,0,0,0,0,0,-90,0,0],this.BlockStateX=[129,932,935,510,1304,1778,2072,2440,2676,3208,3636,3785,4227,4945,4342,4476,4421,4960,6208,6878,7592,7337,7709,8380,10105,9230,9225,9809],this.BlockStateY=[140,146,1012,870,861,206,206,231,231,806,249,965,787,907,-86,-59,-150,179,691,886,138,45,930,657,563,336,938,522];break;case 45:this.BlockState=[1,2,2,2,2,2,5,7,7,4,4,8,4,7,7,7,7,7,7,5,1],this.BlockRotate=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.BlockStateX=[129,705,945,1181,1418,2426,3517,464,1593,1990,2958,6454,4297,2778,3245,3947,4758,5211,6095,5569,129],this.BlockStateY=[-5,260,-73,-73,-73,109,106,1048,697,109,225,569,132,867,862,1057,914,1006,837,97,297];break;case 46:this.BlockState=[4,7,7,2,7,8,7,6,7,5,7,4,6,7,7,7,3,3,3,3,3,7],this.BlockRotate=[25,-10,0,0,0,0,0,-90,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.BlockStateX=[162,987,1771,990,2606,9135,3388,2689,3924,4317,4762,5127,4802,5401,5996,6638,6900,7176,7455,7734,8014,8667],this.BlockStateY=[72,1031,803,198,1101,576,858,-147,1101,454,771,322,320,1006,769,959,126,126,126,126,126,847];break;case 47:this.BlockState=[2,2,2,7,1,7,7,7,7,7,4,4,7,7,7,7,5,5,7,7,5,4,7,7,8],this.BlockRotate=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,25,0,0,0],this.BlockStateX=[1169,1623,1396,430,133,1007,1989,2611,3298,3936,4073,4363,4742,5411,6801,7756,7268,8205,8488,8959,9360,9363,9323,9966,10622],this.BlockStateY=[125,-118,5,857,125,1026,775,659,864,821,147,145,948,768,867,984,840,31,925,827,671,104,779,840,586];break;case 48:this.BlockState=[1,7,7,4,4,7,7,7,7,5,5,7,7,7,7,7,8,5,7,7,6,7,6,5,4],this.BlockRotate=[0,0,0,-20,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.BlockStateX=[124,443,1082,1343,1603,2383,2936,3566,4311,4586,4899,5167,5600,6308,7029,7698,9191,8056,8324,8884,884,1922,1968,2345,7409],this.BlockStateY=[175,950,960,250,250,800,528,859,1060,62,202,1072,837,1050,837,784,559,1e3,705,897,564,900,212,200,191];break;case 49:this.BlockState=[4,7,7,7,6,7,6,6,6,7,2,2,2,7,7,7,4,7,7,8,7],this.BlockRotate=[30,0,0,0,90,0,0,0,0,0,0,0,0,0,0,0,18,0,0,0,0],this.BlockStateX=[146,2e3,2563,3355,1803,548,1660,1075,1358,3918,4235,4473,4710,5760,6380,7187,7490,9e3,9400,9694,5230],this.BlockStateY=[71,867,694,894,700,828,71,69,67,850,134,134,134,839,648,866,131,864,820,550,800];break;case 50:this.BlockState=[7,7,4,5,1,2,3,7,7,7,7,7,6,6,6,7,7,6,6,7,7,7,7,8],this.BlockRotate=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.BlockStateX=[440,1075,773,1078,126,1965,2223,1669,2840,3477,4047,4558,4815,5381,5959,5197,5959,6534,7067,6573,7121,7863,8337,8855],this.BlockStateY=[837,848,438,300,124,80,173,938,741,839,667,806,283,361,487,970,790,334,164,940,634,866,621,583];break;case 51:this.BlockState=[1,1,7,7,7,5,7,7,6,6,7,7,6,6,7,7,7,8,7,3,3,3],this.BlockRotate=[0,0,0,0,0,0,-5,0,90,90,0,0,-90,90,0,0,0,0,0,0,0,0],this.BlockStateX=[122,122,454,982,1562,1498,2173,3038,2509,2514,3945,4657,3504,3538,5473,6245,6825,8250,7857,5491,5769,7385],this.BlockStateY=[85,399,1057,929,1011,129,868,937,1033,77,941,898,729,75,1045,797,907,567,850,109,109,115];break;case 52:this.BlockState=[7,1,3,3,3,3,3,5,7,5,7,7,6,7,7,7,6,7,4,7,4,3,3,8,7,7],this.BlockRotate=[0,0,0,0,0,0,0,0,0,0,0,0,90,0,0,0,90,0,0,0,0,0,0,0,0,0],this.BlockStateX=[500,126,558,837,1116,1396,1702,2050,1707,2432,2410,3019,3526,3489,4048,4739,4468,5586,5248,6232,6358,6768,7045,7742,6900,7412],this.BlockStateY=[900,126,112,112,112,112,112,150,945,200,1058,724,373,1080,897,926,915,960,187,839,195,175,175,569,1005,855];break;case 53:this.BlockState=[1,7,7,4,4,7,7,7,7,5,5,6,6,6,7,7,7,7,7,8,5,7,7,6,7,6,5,4,7,3,3,3],this.BlockRotate=[0,0,0,-30,35,0,0,0,0,0,0,-30,-30,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.BlockStateX=[124,368,893,902,1183,2800,3428,3941,4451,4600,4860,5912,6175,5628,5165,5798,6337,7089,7851,9694,4858,8549,9182,1970,2157,1968,4589,8076,1528,3921,3644,3364],this.BlockStateY=[175,973,1042,460,460,985,686,937,855,-8,87,315,465,230,948,973,1030,937,867,565,1207,801,943,1054,806,212,1183,215,905,128,128,128];break;case 54:this.BlockState=[1,2,2,4,7,7,7,7,5,7,4,4,7,7,7,2,2,4,7,7,6,8],this.BlockRotate=[0,0,0,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,90,0],this.BlockStateX=[128,1420,1659,788,530,2178,2756,3599,3265,4195,5190,4907,5095,5690,6530,7404,7640,7034,8347,9175,9737,9829],this.BlockStateY=[138,19,19,187,878,864,535,838,738,594,-56,2,871,615,811,133,133,193,789,972,268,562];break;case 55:this.BlockState=[8,1,7,7,4,4,7,7,6,7,3,7,7,7,7,4,6,7,2,7,7,7],this.BlockRotate=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.BlockStateX=[7800,126,490,984,1292,1642,2173,2771,3036,3323,3713,3904,4371,4753,5093,5409,5918,5902,6823,6370,7180,7640],this.BlockStateY=[560,180,760,923,509,509,875,618,896,604,156,822,479,793,744,339,171,959,120,721,844,793];break;case 56:this.BlockState=[7,1,7,7,7,6,6,6,7,7,6,6,7,7,7,7,7,7,7,6,7,8,7,6],this.BlockRotate=[0,0,0,0,0,0,0,0,0,0,90,0,0,0,0,0,0,0,0,0,0,0,0,90],this.BlockStateX=[500,129,1027,1595,2115,1660,1955,2249,2788,3550,801,4049,4242,4840,5567,6288,6607,7303,7968,8623,8691,9805,9228,9533],this.BlockStateY=[852,145,645,863,724,168,168,168,911,651,473,208,926,713,668,883,525,806,642,208,881,569,626,455];break;case 57:this.BlockState=[1,4,4,4,4,4,4,4,4,4,7,7,7,2,2,2,7,7,6,6,6,6,7,6,6,7,7,8,7,7,7],this.BlockRotate=[0,15,0,0,15,0,15,0,15,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.BlockStateX=[130,416,1233,1148,701,1273,987,1210,1273,1559,402,1925,2651,2153,2386,2624,3315,3751,4484,4497,4791,4795,4243,5100,5101,4739,5430,7530,6100,6741,7287],this.BlockStateY=[183,326,-185,-60,249,-147,170,-176,93,58,891,960,1017,219,219,29,948,959,160,858,219,923,773,269,965,806,904,568,1019,888,725];break;case 58:this.BlockState=[1,7,7,4,4,7,7,7,7,5,5,6,6,6,7,7,7,7,7,8,5,7,7],this.BlockRotate=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.BlockStateX=[124,517,1096,1715,2012,2383,3264,3914,4547,4918,5561,6360,6666,7102,5193,5905,6629,7480,8066,9249,8495,8498,9e3],this.BlockStateY=[175,856,1003,358,359,1006,831,1036,896,195,216,962,964,187,1009,681,795,631,810,577,900,542,829];break;case 59:this.BlockState=[1,7,7,5,5,7,7,4,6,6,7,7,2,7,2,4,2,7,7,7,7,7,6,6,7,7,7,7,7,3,3,7,7,7,7,8],this.BlockRotate=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.BlockStateX=[122,445,761,1096,1519,1370,1840,2034,2626,2626,2851,3246,3783,3953,4647,4218,5419,4672,5220,5766,6388,6857,7216,6111,7693,8297,8672,9170,9671,9705,10370,10164,10587,11197,11753,12275],this.BlockStateY=[85,854,735,1070,-29,1016,809,269,925,215,1053,874,181,925,238,193,85,1033,959,994,959,533,528,542,877,948,809,945,670,36,28,976,945,923,741,553];break;case 60:this.BlockState=[1,5,7,7,7,4,7,7,7,7,7,3,3,3,4,4,4,4,7,7,7,8,5,7,7],this.BlockRotate=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.BlockStateX=[126,1244,433,883,1530,1248,2037,2615,3119,3702,4228,2976,3255,3534,4689,4981,5271,5564,4905,5891,6497,7700,6232,6950,7439],this.BlockStateY=[138,987,852,781,781,224,989,829,1082,964,987,132,132,132,230,197,167,129,938,921,960,574,-23,867,978];break;case 61:this.BlockState=[8,1,7,3,3,7,4,7,7,7,6,6,6,6,6,6,7,7,7,5,7,7,7],this.BlockRotate=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.BlockStateX=[7089,127,509,913,1348,1298,1848,2098,2607,3115,3734,3733,4034,4036,4336,4337,3779,4239,4728,5152,5527,6235,6736],this.BlockStateY=[565,138,1028,55,56,842,377,1016,680,956,932,287,287,932,287,932,784,681,1023,236,945,984,831];break;case 62:this.BlockState=[1,5,7,7,7,4,7,7,7,7,7,3,3,3,4,4,4,4,7,7,7,8,5,7,7,5,6,6,6],this.BlockRotate=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.BlockStateX=[126,1422,324,852,1762,860,2224,2858,3566,4131,5419,2976,3255,4172,4776,5070,7147,6853,4905,5958,6436,7700,6232,6948,7439,1423,3568,3873,4469],this.BlockStateY=[138,55,1033,1031,912,191,961,838,978,1030,1038,132,132,121,290,292,133,132,938,936,1076,574,-23,898,978,1182,297,297,292];break;case 63:this.BlockState=[1,4,7,4,2,6,4,7,7,7,7,5,5,5,7,3,3,7,7,5,7,8,7,7,5,7],this.BlockRotate=[0,0,0,0,0,0,0,0,0,0,0,35,-90,-35,0,0,0,0,0,0,0,0,0,0,0,0],this.BlockStateX=[126,774,367,952,1778,2204,2562,1974,2554,3188,3761,3300,3766,4232,4521,4997,5275,5453,5962,6077,6555,8778,7155,7767,7517,8432],this.BlockStateY=[149,946,809,290,227,263,261,886,795,976,1068,213,457,218,916,94,94,776,514,913,776,579,1001,896,91,812];break;case 64:this.BlockState=[1,1,7,7,7,5,7,7,6,6,7,7,6,6,7,7,7,8,7,3,3,3],this.BlockRotate=[0,0,0,0,0,0,-5,0,90,90,0,0,-90,90,0,0,0,0,0,0,0,0],this.BlockStateX=[122,122,454,982,1562,1498,2173,3038,2509,2514,3945,4657,3504,3538,5473,6245,6825,8250,7857,5491,5769,7385],this.BlockStateY=[85,399,1057,929,1011,129,868,937,1033,77,941,898,729,75,1045,797,907,567,850,109,109,115];break;case 65:this.BlockState=[8,1,7,7,4,4,7,7,6,7,3,7,7,7,7,4,6,7,2,7,7,7],this.BlockRotate=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.BlockStateX=[7800,126,490,984,1292,1642,2173,2771,3036,3323,3713,3904,4371,4753,5093,5409,5918,5902,6823,6370,7180,7640],this.BlockStateY=[560,180,760,923,509,509,875,618,896,604,156,822,479,793,744,339,171,959,205,721,844,793];break;case 66:this.BlockState=[1,7,7,7,3,3,3,3,3,3,3,7,7,7,7,7,5,5,2,7,7,7,8,2,7,7,7,5,2,2,7,7,7],this.BlockRotate=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.BlockStateX=[126,566,1222,1690,1762,2040,2320,2600,2875,3154,3431,3125,3897,4787,5664,6409,7164,7862,7501,7153,8209,8944,13859,9230,9847,10516,11205,10277,11803,12665,12211,12870,13456],this.BlockStateY=[143,803,640,557,-102,-102,-102,-102,-102,-102,-102,750,750,775,634,809,179,600,110,1019,709,905,560,90,743,458,796,1e3,80,80,999,1019,801];break;case 67:this.BlockState=[6,7,4,7,7,7,5,7,3,1,7,7,7,8,4,4,7,7,5,7,7],this.BlockRotate=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.BlockStateX=[133,638,1283,1329,1966,2764,2453,3346,4418,4150,3962,5006,5629,9497,5735,6025,7110,7974,9295,9174,8599],this.BlockStateY=[138,801,244,953,748,883,67,688,143,128,922,734,897,529,210,210,847,727,87,835,900];break;case 68:this.BlockState=[2,2,2,7,2,2,7,7,7,4,7,8,6,6,7,7,3,4,7,7,7],this.BlockRotate=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.BlockStateX=[118,353,590,514,1075,1312,1938,2697,3427,3898,4555,9071,7924,7921,5221,5828,6423,7127,6579,7664,8697],this.BlockStateY=[124,124,124,957,130,130,864,956,675,168,844,544,331,691,629,714,156,325,995,960,736];break;case 69:this.BlockState=[5,5,5,5,7,7,7,7,7,5,5,7,7,7,5,7,5,7,7,7,5,7,7,7,8],this.BlockRotate=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.BlockStateX=[777,1953,927,1929,487,1413,2409,2857,3399,3650,3649,4138,4750,5577,5170,6055,6627,6519,7076,7692,7402,8274,8820,9532,9962],this.BlockStateY=[162,102,1107,1128,867,1044,888,984,855,-56,845,751,886,675,137,949,964,468,618,727,665,572,888,785,587];break;case 70:this.BlockState=[1,4,7,4,4,4,4,4,5,7,7,5,7,7,7,3,6,7,7,6,6,7,7,2,7,7,7,8,5,7],this.BlockRotate=[0,5,0,0,0,0,0,0,90,0,0,-90,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.BlockStateX=[129,812,459,1104,1402,1701,1996,2294,1795,2697,3400,2295,4017,4823,5395,5385,5998,5845,6065,6700,7374,6697,7502,8536,7971,9227,9840,11211,10277,10697],this.BlockStateY=[164,57,796,46,46,48,48,46,956,673,914,956,639,844,997,104,628,365,1067,162,808,762,582,159,804,751,1018,569,236,884];break;case 71:this.BlockState=[1,1,1,1,2,7,7,7,4,7,7,7,7,6,6,6,6,6,5,5,7,5,5,7,7,7,8,3,7],this.BlockRotate=[0,0,0,0,0,0,0,0,0,0,0,0,-10,0,0,0,25,-25,0,0,0,0,0,0,0,0,0,0,0],this.BlockStateX=[129,389,649,910,1156,350,738,2058,1579,2703,3398,4140,4817,2583,2883,3183,3488,2295,5303,5306,5662,6384,6378,6144,6771,7339,8578,7881,8244],this.BlockStateY=[157,157,157,157,239,844,957,981,361,758,981,847,979,222,222,222,159,31,1136,100,831,1134,-26,930,739,902,571,165,831];break;case 72:this.BlockState=[1,7,5,5,6,6,6,7,7,7,7,4,2,7,7,7,7,7,2,2,7,8,6,6,7],this.BlockRotate=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,90,90,0],this.BlockStateX=[130,455,1009,1017,1232,1533,1834,1159,1822,2372,2976,2766,3417,3617,4215,4893,5553,6148,6209,6445,6706,7682,7376,7371,7171],this.BlockStateY=[142,874,1044,-117,167,167,167,781,1020,889,981,195,244,1031,694,982,1031,801,121,244,946,566,990,135,861];break;case 73:this.BlockState=[7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,5,5,7,8],this.BlockRotate=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.BlockStateX=[571,1203,1831,2444,3284,4030,4893,5694,6554,7290,8048,8650,9341,10003,10666,11777,11777,11331,11932],this.BlockStateY=[749,531,795,635,856,654,814,998,713,552,910,552,747,512,659,130,960,946,556];break;case 74:this.BlockState=[1,7,7,7,2,7,7,7,7,8,6,6,3,3,7,5,7,7,7,7,7,6,7,7,7,4,3],this.BlockRotate=[0,0,0,0,0,0,-10,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-70,0,0,0,0,0],this.BlockStateX=[124,369,963,1483,1981,2255,2848,3490,4087,9173,1982,2944,4043,5588,4958,5565,5421,5965,7532,6416,7034,7991,6730,8470,8910,942,7988],this.BlockStateY=[160,948,801,987,176,995,724,645,934,566,553,198,45,94,874,1046,711,852,758,818,994,714,531,809,598,207,40];break;case 75:this.BlockState=[1,7,7,7,7,7,7,6,6,6,7,6,7,7,6,7,7,7,7,8],this.BlockRotate=[0,0,0,0,0,5,0,0,0,0,0,90,0,0,90,0,0,0,0,0],this.BlockStateX=[124,653,1053,1360,1820,2171,2484,2510,2542,2138,2771,3487,3145,3825,3616,3421,4393,4963,5426,5867],this.BlockStateY=[187,886,633,982,860,480,1016,522,71,951,616,826,846,911,71,641,781,849,860,550];break;case 76:this.BlockState=[1,7,7,7,7,7,7,6,6,6,7,6,7,7,6,7,7,7,7,8],this.BlockRotate=[0,0,0,0,0,5,0,0,0,0,0,90,0,0,90,0,0,0,0,0],this.BlockStateX=[124,653,1053,1360,1820,2171,2519,2510,2542,2138,2826,3487,3154,3825,3616,3421,4393,4963,5426,5867],this.BlockStateY=[187,886,633,982,860,480,1067,522,71,951,670,826,854,911,71,641,781,849,860,550];break;case 77:this.BlockState=[1,2,5,2,7,7,7,7,7,7,7,4,7,7,3,3,7,7,7,7,8,7],this.BlockRotate=[0,0,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.BlockStateX=[119,1428,1333,2365,420,840,1371,1959,2616,3156,3797,4195,4410,5080,5401,5680,5757,6541,7049,7819,8631,8327],this.BlockStateY=[139,110,181,119,840,951,894,894,971,815,948,124,869,996,107,107,985,840,905,840,539,724];break;case 78:this.BlockState=[5,5,4,7,7,4,7,6,6,7,7,7,7,3,3,3,3,3,3,3,7,7,7,7,5,6,6,6,6,6,6,6,7,7,7,8,7,7],this.BlockRotate=[-45,0,0,0,0,0,0,90,90,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.BlockStateX=[175,383,850,1431,2016,2044,2629,2378,2736,3335,3979,2216,4556,3475,3754,4032,4682,4961,5239,5514,5338,5798,6473,7285,6922,7933,8231,8527,8825,9122,9421,9719,7914,8423,8945,10389,9569,10088],this.BlockStateY=[627,125,79,1030,888,-179,971,800,204,812,962,613,721,-66,-66,-66,17,17,17,17,1033,951,959,1016,68,73,73,73,73,73,73,73,880,783,920,570,712,937];
break;case 79:this.BlockState=[1,3,7,7,7,7,5,5,7,7,5,5,6,4,7,7,7,7,7,7,7,8,7,3,7],this.BlockRotate=[0,0,0,0,0,-10,0,0,0,-5,0,0,-90,15,0,0,0,0,0,0,0,0,0,0,0],this.BlockStateX=[127,1031,396,921,1514,2102,2517,2512,2801,3442,3784,3779,3779,3608,4071,4619,5132,5539,6029,6602,7510,8538,7005,7780,8138],this.BlockStateY=[131,-27,779,676,829,804,1047,23,798,829,1136,-142,3,462,971,852,951,825,998,973,837,565,959,121,790];break;case 80:this.BlockState=[1,2,7,7,7,6,6,6,6,3,3,3,3,3,3,7,7,7,4,4,7,7,7,7,7,7,5,7,7,8,6,7,7,7,7],this.BlockRotate=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.BlockStateX=[127,373,351,832,1269,1867,2164,2459,2758,1774,2049,2319,2599,2875,3153,1896,2408,3014,3350,3546,3701,4336,5041,6097,2238,1623,4524,5584,6638,8943,6959,7290,7705,8234,8752],this.BlockStateY=[123,211,952,747,905,550,550,550,550,-77,-77,-77,-77,-77,-77,1040,1060,1021,-60,84,746,905,907,857,396,355,60,637,719,553,685,698,803,666,779];break;case 81:this.BlockState=[1,7,5,5,4,6,7,2,2,7,6,6,7,4,4,7,6,6,6,7,5,7,7,3,2,6,6,6,4,4,7,5,8,7],this.BlockRotate=[0,0,0,0,0,0,0,0,0,0,90,90,0,20,20,0,-60,60,0,0,0,0,0,0,0,90,90,90,10,10,0,0,0,0],this.BlockStateX=[134,560,1110,1118,1601,2012,2232,2750,2988,3567,4097,4097,4717,5279,5548,6506,7475,7623,7548,7326,8565,8351,9301,8926,8670,9908,9908,9907,10496,10774,11364,10958,11801,6107],this.BlockStateY=[160,934,947,60,229,223,984,183,183,994,420,121,983,331,231,932,203,198,69,950,-431,1039,970,159,67,27,326,1001,177,128,773,1205,566,723];break;case 82:this.BlockState=[1,7,4,4,4,6,7,5,5,4,4,6,6,7,3,2,7,4,5,7,4,5,5,5,7,4,4,7,4,4,4,7,6,6,6,4,4,7,5,5,7,8,7,7],this.BlockRotate=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,90,0,0,0,0,-60,60,0,0,60,-60,0,5,5,0,0,0,0,0,0,0],this.BlockStateX=[124,530,1011,720,1592,1301,1336,2414,2422,3013,3305,3604,2717,3912,4714,4458,5153,6074,5987,5989,5355,6671,7252,6959,6974,7053,6762,7737,8323,8464,8394,8514,9217,9077,9153,9251,9535,9805,10674,10689,11023,11442,2022,10543],this.BlockStateY=[175,948,172,173,170,169,943,1070,96,165,165,169,162,978,172,80,962,91,1201,835,96,1062,1060,773,922,106,106,955,338,338,216,962,945,943,807,159,132,945,1163,27,983,574,927,939];break;case 83:this.BlockState=[1,7,2,2,2,7,6,7,7,5,5,7,7,6,6,7,4,4,7,6,6,4,4,7,7,5,7,3,7,6,6,6,4,4,4,7,8],this.BlockRotate=[0,0,0,0,0,0,-90,0,0,90,90,0,0,-90,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-90,-90,-90,0,0,0,0,0],this.BlockStateX=[128,472,1211,1449,1685,2277,3237,2985,3018,3101,3696,3674,3715,3240,10361,4423,4863,5150,5434,6054,6646,6349,6943,6645,7368,7979,8298,9666,9637,10167,10180,10180,10658,10951,11245,11318,11603],this.BlockStateY=[173,955,119,119,119,728,1065,958,543,594,594,940,546,766,270,676,169,169,804,129,131,129,136,866,886,833,572,182,827,998,118,214,270,272,272,865,572];break;case 84:this.BlockState=[1,7,6,6,6,6,4,4,4,7,7,2,2,2,7,5,5,5,7,6,6,7,4,4,4,4,7,6,6,7,5,5,6,6,7,2,2,2,4,7,7,5,5,4,4,7,4,4,4,8],this.BlockRotate=[0,0,0,-90,0,90,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-40,40,-40,40,0,0,0,0,-90,90,-90,-90,0,0,0,0,0,0,0,-45,30,0,0,0,0,0,0,0],this.BlockStateX=[129,641,1196,1200,1170,1177,1638,1930,2221,1815,2521,3145,3383,3621,4044,4698,4999,4409,5199,4580,4836,5766,6312,6511,6718,6918,6587,7207,6044,7530,8195,8191,8188,8196,8751,9072,9306,9541,8728,10011,10754,11142,11184,10927,10638,11833,11875,12166,12457,12650],this.BlockStateY=[182,942,226,219,1009,989,146,144,146,998,975,123,123,123,968,1052,93,106,937,50,50,939,169,169,167,162,937,72,87,953,331,792,975,160,978,121,121,121,82,945,948,1014,167,13,13,929,272,272,270,564];break;case 85:this.BlockState=[1,4,5,7,6,6,2,2,7,7,4,4,6,6,7,2,3,7,6,6,6,6,7,5,5,4,4,7,4,4,7,4,7,4,4,4,7,4,4,4,6,6,7,8,4,3],this.BlockRotate=[0,20,0,0,0,90,0,0,0,0,0,0,90,90,0,0,0,0,30,-55,35,-50,0,0,0,15,15,0,0,-120,0,-60,0,60,-60,0,0,-60,60,0,0,0,0,0,0,0],this.BlockStateX=[3748,144,1421,1422,2067,2074,1847,2082,2521,3335,2817,3108,3684,3669,4090,4371,4626,5050,5575,5572,5546,5541,6053,6580,7239,6763,7045,7449,8919,8986,8253,8851,8935,9489,9358,9428,9816,9796,9934,9865,7659,8266,10473,10764,3398,1277],this.BlockStateY=[-286,251,1200,840,929,919,1,1,883,875,170,170,136,991,935,70,162,952,285,282,947,939,984,142,-51,160,83,940,49,160,873,162,863,863,865,751,876,178,178,60,95,113,894,586,169,123];break;case 86:this.BlockState=[4,5,7,4,5,5,4,4,6,6,7,7,6,6,6,6,6,6,7,2,2,2,7,6,6,6,6,6,6,7,4,4,4,7,7,5,5,7,8,4,2,2,2,2],this.BlockRotate=[20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-90,90,0,0,0,0,0,0,-90,0,90,0,0,0,0,0,0,0,0,-45,40,0,0,0,0,0,0,0],this.BlockStateX=[177,2269,2268,2301,2955,2957,3325,3618,3912,4214,3563,4338,4972,5276,4968,5270,5127,5123,5812,6116,6353,6584,7116,7635,7633,7638,7631,7636,7635,8210,8500,9110,9652,9105,10038,10397,10391,10945,11517,2011,11396,11158,10923,10692],this.BlockStateY=[195,1157,822,49,1070,67,93,90,85,85,996,886,904,904,311,310,141,1070,945,62,62,62,852,187,178,24,935,1094,950,898,178,188,185,868,891,978,57,863,561,49,24,24,24,24];break;case 87:this.BlockState=[1,7,2,2,2,7,6,6,6,7,7,7,4,4,4,7,4,5,5,6,7,6,6,4,7,7,6,6,6,6,6,6,6,6,6,6,6,7,2,2,2,7,4,5,5,8],this.BlockRotate=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,90,0,0,0,0,0,0,0,-90,0,-90,-90,0,0,-90,0,0,0,0,0,5,0,0,0],this.BlockStateX=[128,517,1140,1378,1617,1950,2537,2836,3134,2840,3496,4286,3911,4509,5108,5618,5704,6251,6748,6507,6528,7538,7533,8234,7144,7934,5405,4809,4208,8924,8771,8917,9072,8776,8922,8924,9070,8922,9712,9945,10158,10434,9350,10902,10910,11227],this.BlockStateY=[128,893,88,88,88,912,203,203,203,898,896,896,200,198,196,870,195,98,85,37,955,280,277,185,986,984,193,195,201,1101,963,820,962,178,37,325,180,965,73,73,73,934,346,1094,128,595];break;case 88:this.BlockState=[1,7,4,4,5,7,2,2,6,6,6,6,6,6,7,4,4,7,7,4,4,4,4,7,7,6,6,7,5,5,7,6,6,4,4,4,7,7,8,2,2,7],this.BlockRotate=[0,0,10,10,0,0,0,0,0,-60,60,0,60,-60,0,0,0,0,0,-35,35,-35,35,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.BlockStateX=[128,384,753,1034,2335,2333,2148,2386,2969,3044,2890,2956,3029,2878,2965,3526,3813,4114,4841,4706,4921,5146,5358,5507,6181,6585,6591,7062,7638,7651,8019,9229,8636,8340,8933,9526,9045,9923,11312,10164,10401,10839],this.BlockStateY=[136,950,216,165,1170,847,52,52,1053,925,927,32,160,167,955,146,144,996,986,185,182,175,172,965,947,165,932,950,1093,121,921,78,73,70,77,78,952,971,586,47,47,889];break;case 89:this.BlockState=[4,6,6,7,7,2,2,7,5,6,6,5,7,6,6,6,6,7,6,6,6,6,7,7,2,2,2,7,7,4,4,4,6,6,7,5,5,7,7,7,7,6,6,7,8],this.BlockRotate=[15,90,-90,0,0,0,0,0,0,0,0,0,0,0,-90,0,-90,0,0,-90,-90,0,0,0,0,0,0,0,0,0,0,0,0,0,0,90,90,0,0,0,0,90,90,0,0],this.BlockStateX=[132,2698,2698,2694,2077,2009,1771,3305,3566,3739,4045,4212,3951,4955,4811,4955,5110,4957,4974,4828,5121,4978,4968,5735,6126,6362,6598,7047,8614,7597,7887,9008,8182,7301,9525,10310,10901,10291,10969,10258,11063,10636,10634,11782,12177],this.BlockStateY=[182,1144,848,659,952,37,37,860,54,27,27,64,953,1083,935,794,939,943,325,175,178,34,188,950,91,91,91,942,955,192,193,162,193,192,953,561,561,1025,1017,497,497,394,95,884,566];break;case 90:this.BlockState=[1,2,2,7,7,7,7,7,6,6,7,3,3,4,4,4,5,7,7,7,7,6,6,6,6,7,4,7,4,4,4,7,7,7,5,5,5,4,8],this.BlockRotate=[0,0,0,0,0,0,0,0,90,90,0,0,0,0,0,0,0,0,0,0,0,0,0,90,-90,0,0,0,0,-35,35,0,0,0,0,0,0,0,0],this.BlockStateX=[122,1931,1693,601,1362,2156,2946,3752,4783,4778,4477,6612,7555,5324,5617,5909,6445,6445,5822,7282,7900,8562,8863,8709,8709,8601,8125,9384,9837,9594,10096,10038,10750,11398,10762,11946,11718,12284,12923],this.BlockStateY=[138,9,-130,821,738,878,727,659,258,847,883,55,46,108,108,108,1091,763,657,726,820,229,229,381,77,989,128,744,186,108,108,936,984,825,70,1002,87,237,550];break;case 91:this.BlockState=[7,7,2,2,2,4,7,7,5,7,7,7,6,6,6,6,7,7,6,5,7,4,4,4,7,7,7,7,7,2,2,5,4,8,6,6],this.BlockRotate=[0,0,0,0,0,0,0,0,0,0,0,0,-55,0,55,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,25,0,90,90],this.BlockStateX=[525,1163,116,353,587,1785,1952,2718,2365,3326,3990,4489,3169,3169,3169,4376,5294,6078,5690,6704,7452,6408,6704,6987,8183,8675,9418,10092,11530,10745,10982,12043,11543,12284,9175,9739],this.BlockStateY=[874,673,70,70,70,109,927,939,46,1045,929,678,347,347,347,70,748,765,143,768,772,91,89,91,879,623,941,704,881,9,164,275,302,570,116,627];break;case 92:this.BlockState=[1,6,6,6,6,7,7,4,4,4,4,7,7,5,6,6,6,6,7,7,4,4,4,4,4,7,7,7,7,6,6,7,7,7,5,7,4,3,4,4,7,7,6,6,2,2,2,5,6,6,4,8,7,7],this.BlockRotate=[0,0,0,0,-90,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,-35,0,0,0,0,0,-25,25,0,0,0,0,0,-25,0,-25,0,0,0,0,0,0,0,0,0,-35,0,15,0,0,0],this.BlockStateX=[131,1333,1178,1482,1331,624,1384,2262,2547,2837,3128,3901,4437,4365,2263,2560,2857,3156,2362,3028,3415,4995,5458,5241,5692,6016,5082,6675,7328,7151,7414,8113,8673,9307,8672,9997,10385,10653,10142,9884,11121,12012,11553,11570,12645,12874,13111,13550,13684,13670,13481,14652,13549,12873],this.BlockStateY=[152,263,104,109,244,796,881,185,185,185,183,767,891,77,538,536,538,538,859,859,181,287,364,369,287,984,990,838,792,82,84,634,400,654,738,827,275,161,162,101,919,833,616,133,-125,21,154,806,1001,1091,56,565,483,990];break;case 93:this.BlockState=[1,2,7,7,2,4,4,4,7,7,4,7,7,7,5,5,7,6,6,6,6,6,6,7,7,7,6,6,7,7,6,7,4,4,4,7,7,8,5,5,7,4],this.BlockRotate=[0,0,0,0,0,20,0,-20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,20,20,20,0,0,0,0,0,0,0],this.BlockStateX=[126,1861,583,1207,1622,3508,2941,2661,2375,1740,3226,3255,3938,4460,5495,5488,5100,6181,6482,6782,6187,6487,6789,6014,6963,7417,7439,7441,8114,6475,8129,8871,9219,8828,9593,9387,9921,11370,10993,11151,10689,11095],this.BlockStateY=[174,106,922,727,106,50,99,51,898,881,97,833,893,738,1028,82,963,272,272,272,739,739,739,738,741,830,625,347,709,949,488,727,150,142,166,924,791,572,862,1062,787,84];break;case 94:this.BlockState=[4,5,5,7,5,5,7,7,2,4,4,4,2,7,5,7,7,4,4,7,7,7,7,5,5,5,5,4,7,4,7,8,7,7,5,5,3],this.BlockRotate=[-20,0,90,0,45,-45,0,0,0,0,10,0,0,0,0,0,0,90,90,0,0,0,0,0,0,-65,-65,0,0,0,0,0,0,0,-65,-65,0],this.BlockStateX=[192,3210,3502,522,1633,2043,1082,2550,1331,4216,771,2899,2361,1818,3791,3558,3034,4780,4776,4254,5434,5939,6518,7219,7221,7498,7489,8372,8741,6948,9438,11366,10282,10950,7899,8020,10259],this.BlockStateY=[154,-31,256,835,309,312,753,750,-138,213,212,176,-159,975,-31,861,977,318,813,852,809,644,844,1069,272,434,654,39,592,345,744,572,832,782,246,406,169];break;case 95:this.BlockState=[8,6,6,6,6,7,7,6,1,2,2,2,7,7,7,7,6,6,6,6,6,7,7,7,6,6,6,6,7,7,7,7,7,2,4,7,7],this.BlockRotate=[0,55,55,-60,-60,0,0,0,0,0,0,0,0,0,0,0,-30,0,0,0,30,0,0,0,90,0,0,90,0,0,0,0,0,0,0,0,0],this.BlockStateX=[11e3,10450,10757,10608,10916,10525,10832,10715,124,1377,1142,904,508,1584,2261,2994,2597,2867,3162,3011,3439,3634,4336,4996,5426,5436,5421,5418,5890,6475,7097,7704,8326,7709,8950,9227,9936],this.BlockStateY=[569,738,741,736,739,842,850,143,51,21,115,29,796,869,688,531,77,149,149,587,75,799,685,920,231,231,755,751,866,714,784,936,803,15,84,688,598];break;case 96:this.BlockState=[7,7,4,4,6,6,3,3,7,4,7,7,7,7,5,5,5,4,4,7,7,7,7,7,5,5,4,7,7,7,8,2,2,2],this.BlockRotate=[0,0,0,0,0,0,0,0,0,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,30,30,25,0,0,0,0,0,0,0],this.BlockStateX=[763,1292,1043,2049,746,1294,3194,2507,2011,155,2851,3630,4170,4754,4771,4271,5297,4580,5376,6096,5806,6385,6910,7545,7884,8438,8123,8998,9588,10298,11370,10764,11001,11238],this.BlockStateY=[750,741,379,43,813,808,125,125,729,99,736,804,538,888,186,891,876,118,128,-36,715,808,994,816,265,657,106,671,837,869,581,128,128,128];break;case 97:this.BlockState=[5,5,6,4,7,6,7,7,7,7,6,6,7,2,2,7,6,7,5,5,4,7,7,7,7,1,1,8,6,6,6,7,7],this.BlockRotate=[-35,-65,90,0,0,0,0,0,0,0,0,90,0,0,0,0,0,0,0,0,30,0,0,0,0,0,0,0,90,90,90,0,0],this.BlockStateX=[150,583,1846,1041,1389,1851,1845,2451,2986,3594,2986,2984,4207,4844,5081,4984,4982,5622,6148,6892,6076,7280,7743,8450,9107,8564,8308,10872,10790,10510,10198,9858,10508],this.BlockStateY=[579,215,369,27,695,377,545,420,746,616,579,567,681,19,17,738,533,813,572,-80,70,842,774,840,724,150,152,569,159,695,162,777,874];break;case 98:this.BlockState=[1,7,7,7,3,3,3,7,7,7,7,3,4,7,2,7,7,7,5,5,5,5,5,5,5,7,7,7,7,4,6,4,7,7,7,2,2,7,4,2,6,6,6,6,4,7,7,7,7,5,5,4,7,7,7,7,7,7,5,6,7,7,6,6,4,4,4,7,7,7,7,7,3,3,3,3,7,7,7,7,6,6,4,4,7,7,7,7,7,7,8,3],this.BlockRotate=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,50,0,-55,0,-50,0,-50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-45,40,40,-45,0,0,0,0,0,-50,-75,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.BlockStateX=[116,560,1060,1562,1978,2255,2533,2023,2318,2644,3290,2813,3244,3863,3802,4372,4806,5214,5139,5385,5606,5862,6094,6442,6676,5614,6167,6710,7061,7127,6803,7419,7453,8056,8588,9066,8964,9044,9469,9817,10403,10620,10401,10628,10491,10259,9656,10505,10963,11532,11694,12130,11966,11271,12513,12979,13608,14178,13912,13909,13902,14647,15089,15101,15393,14657,15681,15280,15787,16375,16807,17270,17711,17991,18271,18551,17712,18250,18796,19262,19261,19795,19812,20174,20202,20631,21015,21469,21790,22256,22674,21768],this.BlockStateY=[73,907,729,575,-77,-77,-77,946,765,799,902,-77,67,757,19,1001,985,997,118,5,149,154,251,0,96,777,984,796,989,260,255,261,678,965,970,191,-330,973,116,202,864,864,657,661,111,750,1043,997,775,757,137,26,914,511,989,683,1002,1002,1072,744,640,873,232,714,232,-172,232,724,1004,883,1004,1007,-19,-19,-19,-19,821,1030,987,726,803,208,451,272,861,671,1009,963,804,881,555,56];break;case 99:this.BlockState=[5,5,7,7,5,7,7,3,7,7,7,4,5,5,7,7,4,4,2,6,7,7,7,7,6,6,6,7,7,7,4,5,5,7,7,7,7,6,7,7,6,7,7,5,5,7,7,7,5,7,7,5,5,7,7,5,4,7,7,4,4,6,4,7,7,7,7,7,3,2,7,7,7,7,7,7,7,8],this.BlockRotate=[-40,0,0,0,0,0,0,0,0,0,0,0,-35,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-50,0,0,35,0,0,-60,-60,0,0,0,65,0,0,70,75,0,0,80,15,0,0,15,15,15,15,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.BlockStateX=[150,336,648,1009,648,1514,2065,2527,2567,2914,3248,1631,3945,3889,3853,4372,3508,4895,5727,6566,5009,5506,6174,6959,7042,7442,7659,7319,8099,7783,7879,8646,8643,8539,9063,9450,10010,10360,10244,10475,11185,11042,11316,12078,12589,11811,12266,12872,13192,13281,13789,13737,14298,14264,14615,14870,15102,15039,15541,15370,15640,15923,16203,16550,17077,17597,18140,18657,18317,18059,19166,19776,20339,20689,21126,21323,22008,22382],this.BlockStateY=[553,32,413,536,850,666,671,27,814,862,731,130,1007,589,425,507,45,82,84,748,844,946,632,895,190,954,379,668,873,285,56,67,1207,897,789,792,876,587,459,719,797,884,700,1013,719,982,727,550,116,838,973,342,519,1009,1065,647,430,1077,1089,357,284,207,128,1011,924,772,927,919,50,92,767,898,867,796,908,900,796,555];break;case 100:this.BlockState=[7,6,6,7,7,7,7,5,5,5,5,5,7,7,7,7,7,7,6,6,6,7,7,5,7,7,7,7,7,2,3,7,4,7,4,4,4,4,7,7,7,7,5,7,7,6,6,6,6,7,6,7,7,8],this.BlockRotate=[0,35,-30,0,0,0,0,-85,-80,-85,-70,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-30,30,0,0,0,0,0,0,0,0,0,15,0,15,0,0,15,0,0,0],this.BlockStateX=[544,163,418,945,1355,1800,2004,2014,2599,3183,3755,4350,2571,3039,3726,2294,2815,3381,3562,3889,4188,4154,4723,4832,5177,5684,6214,6738,7322,7938,8464,7837,9072,8505,9959,10201,9689,10463,9317,9624,10248,11735,11168,12228,12828,12454,12746,13037,13327,13330,13619,13788,14306,14717],this.BlockStateY=[883,142,132,1030,606,1084,507,698,622,545,420,17,522,444,377,1067,1033,1048,721,-420,312,984,897,101,1016,975,922,1037,895,186,68,1045,587,970,323,323,253,251,967,866,1038,997,205,910,719,321,280,242,203,731,161,980,873,536];break;default:this.BlockState=[1,7,4,4,5,7,2,2,6,6,6,6,6,6,7,4,4,7,7,4,4,4,4,7,7,6,6,7,5,5,7,6,6,4,4,4,7,7,8,2,2,7],this.BlockRotate=[0,0,10,10,0,0,0,0,0,-60,60,0,60,-60,0,0,0,0,0,-35,35,-35,35,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.BlockStateX=[128,384,753,1034,2335,2333,2148,2386,2969,3044,2890,2956,3029,2878,2965,3526,3813,4114,4841,4706,4921,5146,5358,5507,6181,6585,6591,7062,7638,7651,8019,9229,8636,8340,8933,9526,9045,9923,11312,10164,10401,10839],this.BlockStateY=[136,950,216,165,1170,847,52,52,1053,925,927,32,160,167,955,146,144,996,986,185,182,175,172,965,947,165,932,950,1093,121,921,78,73,70,77,78,952,971,586,47,47,889]}},e.prototype.GetLengthMessage=function(){return this.BlockState.length},e.prototype.GetBlockMessage=function(t){return this.BlockState[t]},e.prototype.GetBlockMessageR=function(t){return this.BlockRotate[t]},e.prototype.GetBlockMessageX=function(t){return this.BlockStateX[t]},e.prototype.GetBlockMessageY=function(t){return this.BlockStateY[t]},e.prototype.GetRankHighScore=function(t){return this.RankScore[t]},e}(eui.Component);__reflect(GameMessage.prototype,"GameMessage");var GameModel=function(){function t(){this.lastContextualScore=1,this.play_times=0,this.isSuper=!1,this.invite_skin_share_count=0}return t}();__reflect(GameModel.prototype,"GameModel");var App=function(t){function e(e){var i=t.call(this)||this;return i.stage=e,i._busyCount=0,i._busy_timer=0,i.event=new Emiter,i}return __extends(e,t),e.prototype.init=function(){this.http=new HttpService,this.storager=new Storager,this.model=new GameModel,this.connect=new GameConnect},e.startup=function(t){var i=new e(t);return Object.defineProperty(window,"app",{get:function(){return i},configurable:!0}),i.init(),i.registCommand(Constant.Notify.startup,StartupCmd),i.notify(Constant.Notify.startup),i},e.prototype.busy=function(){egret.clearTimeout(this._busy_timer),egret.setTimeout(this.busyTimerOut,this,2e4),0==this._busyCount++&&(this._busyInst=new BusyIndicator,this.stage.addChild(this._busyInst),this._busyInst.x=this.stage.stageWidth>>1,this._busyInst.y=this.stage.stageHeight>>1)},e.prototype.rmBusy=function(){--this._busyCount<=0&&this._busyInst&&(this._busyInst.removeFromParent(),this._busyInst=null)},e.prototype.busyTimerOut=function(){this._busyCount=0,this._busyInst&&(this._busyInst.removeFromParent(),this._busyInst=null)},e.prototype.toast=function(t,e,i){void 0===e&&(e=1e3),void 0===i&&(i=200);var a=new eui.Label(t);a.textColor=15471893,app.stage.addChild(a),a.x=app.stage.stageWidth-a.width>>1,a.y=app.stage.stageHeight-a.height>>1,egret.Tween.get(a).to({y:a.y-i/2,alpha:1},e>>1,egret.Ease.quadOut).to({alpha:0,y:a.y-i},e>>1,egret.Ease.quadIn).call(function(){return a.removeFromParent()})},e}(Facade);__reflect(App.prototype,"App");var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){this.LoadImage=new egret.Bitmap(RES.getRes("loading_png")),this.addChild(this.LoadImage),this.StageWidth=egret.MainContext.instance.stage.stageWidth,this.LoadImage.x=(this.StageWidth-920)/2,this.LoadImage.width=920,this.LoadImage.height=1136;var t=new egret.Bitmap(RES.getRes("loading3_png"));this.addChild(t),t.x=this.StageWidth/2,t.y=-20,t.width=120,t.height=640,t.anchorOffsetX=60,t.anchorOffsetY=0,t.rotation=20;var e=new egret.Bitmap(RES.getRes("loading2_png"));this.addChild(e),e.x=this.StageWidth/2,e.y=500,e.width=96,e.height=96,e.anchorOffsetX=48,e.anchorOffsetY=48,e.rotation=0,egret.Tween.get(t,{loop:!0}).to({rotation:-20},2e3,egret.Ease.getBackInOut(-1)).to({rotation:20},2e3,egret.Ease.getBackInOut(-1)),egret.Tween.get(e,{loop:!0}).to({rotation:360},2e3)},e.prototype.onProgress=function(t,e){},e}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var Main=function(t){function e(){var e=t.call(this)||this;e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),egret.ImageLoader.crossOrigin="anonymous";var i=new AssetAdapter;return egret.registerImplementation("eui.IAssetAdapter",i),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),e}return __extends(e,t),e.prototype.onAddToStage=function(t){this.applyConsole(),egret.lifecycle.addLifecycleListener(function(t){t.onUpdate=function(){}}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()},this.runGame()["catch"](function(t){console.log(t)})},e.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(i){switch(i.label){case 0:return App.startup(this.stage),platform=PlatformFactory.create(),platform.log(Constant.LogEvent.game_loading,{type:"initialized"}),[4,this.loadResource()];case 1:return i.sent(),[4,RES.getResAsync("description_json")];case 2:return i.sent(),[4,this.loadTheme()];case 3:return i.sent(),console.log("loading finished..."),platform.setLoadingProgress(1),[4,platform.initSDK()];case 4:return i.sent(),console.log("init"),[4,platform.startGame(["242594136487850_370254360388493","242594136487850_370254460388483","242594136487850_242594943154436"],["242594136487850_370254163721846","242594136487850_370254267055169","242594136487850_242595999820997"])];case 5:return i.sent(),[4,platform.checkBotSubscribe()];case 6:return i.sent(),[4,app.connect.addShortcut()];case 7:return i.sent(),t=new GameScene(app.connect),this.addChild(t),e=new egret.TextField,this.addChild(e),e.x=egret.MainContext.instance.stage.stageWidth/2,e.y=1111,e.size=16,e.textColor=7633807,e.text=$T_GAME_VERSION,e.anchorOffsetX=e.width/2,e.anchorOffsetY=e.height/2,this._loadingui&&this._loadingui.removeFromParent(),platform.log(Constant.LogEvent.game_loading,{type:"ready"}),app.notify(Constant.Notify.game_ready),[2]}})})},e.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return i.sent(),[4,RES.loadGroup("loading")];case 2:return i.sent(),platform.setLoadingProgress(.1),t=new LoadingUI,this.stage.addChild(t),this._loadingui=t,[4,RES.loadGroup("preload",0,t)];case 3:return i.sent(),platform.setLoadingProgress(.8),[3,5];case 4:return e=i.sent(),console.error(e),[3,5];case 5:return[2]}})})},e.prototype.loadTheme=function(){var t=this;return new Promise(function(e,i){var a=new eui.Theme("resource/default.thm.json",t.stage);a.addEventListener(eui.UIEvent.COMPLETE,e,t)})},e.prototype.applyConsole=function(){var t=this,e=(console.log,"e3sdsfs3eee"),i="true"==egret.localStorage.getItem(e),a=null,s=function(t){egret.Capabilities.runtimeType==egret.RuntimeType.WEB&&egret.Capabilities.isMobile&&(t?a?a.showSwitch():a=new window.VConsole:a&&a.hideSwitch())};s(i),Object.defineProperty(window,"$dev",{get:function(){return i},set:function(t){egret.localStorage.setItem(e,t),i=t,s(t)},configurable:!0});var o=0,r=0;this.stage.addEventListener(egret.TouchEvent.TOUCH_TAP,function(e){50==Math.abs(Math.clamp(e.stageX-t.stage.stageWidth/2,-50,50))||e.stageY>=50||(r++,clearTimeout(o),o=setTimeout(function(){r>=5&&($dev=!$dev),r=0},200))},this)},e}(egret.DisplayObjectContainer);__reflect(Main.prototype,"Main");var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,i,a){function s(t){e.call(a,t)}function o(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),i.call(a))}var r=this;if("undefined"!=typeof generateEUI)egret.callLater(function(){e.call(a,generateEUI)},this);else if("undefined"!=typeof generateEUI2)RES.getResByUrl("resource/gameEui.json",function(t,i){window.JSONParseClass.setData(t),egret.callLater(function(){e.call(a,generateEUI2)},r)},this,RES.ResourceItem.TYPE_JSON);else if("undefined"!=typeof generateJSON)if(t.indexOf(".exml")>-1){var n=t.split("/");n.pop();var h=n.join("/")+"_EUI.json";generateJSON.paths[t]?egret.callLater(function(){e.call(a,generateJSON.paths[t])},this):RES.getResByUrl(h,function(i){window.JSONParseClass.setData(i),egret.callLater(function(){e.call(a,generateJSON.paths[t])},r)},this,RES.ResourceItem.TYPE_JSON)}else egret.callLater(function(){e.call(a,generateJSON)},this);else RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),RES.getResByUrl(t,s,this,RES.ResourceItem.TYPE_TEXT)},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var GameOverCmd=function(){function t(){}return t.prototype.excute=function(t,e){var i=+t;console.log("enter GameOverCmd"),app.model.play_times++;var a=platform.isNewPlayer?"New_Play_Times":"Old_Play_Times";if(platform.log(Constant.LogEvent.play_times,{result:app.model.play_times,type:a}),platform.log(Constant.LogEvent.level,{result:i}),app.model.lastContextualScore=t,platform instanceof PlatformFB){if(FBInstant.context.getID()){var s=["challenge_leaderboard","challenge_result","challenge"].indexOf(platform.entry)>-1;s||ShareHelper.sendLeadboardUpdate(t)["catch"](function(t){console.log("challenge failed:",t)})}FBInstant.setSessionData({nickname:platform.userInfo.name,playerInfo:{head:platform.userInfo.photo,lang:platform.userInfo.lang,score:platform.getHighScore()}})}},t}();__reflect(GameOverCmd.prototype,"GameOverCmd",["ICommand"]);var GameReadyCmd=function(){function t(){this._lastContextId=null,this._contextLeaderBoard=null}return t.prototype.excute=function(t,e){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(i){switch(i.label){case 0:console.log("enter GameReadyCmd"),platform instanceof PlatformFB&&(console.log("platform.entry",platform.entry),t=["challenge_leaderboard","challenge_result","challenge"].indexOf(platform.entry)>-1,t||this.watchContextIfChanged()),platform.getContextId()&&0==platform.entry.indexOf("bot_")&&(app.connect.pendingChallengePost=!0),!platform.getContextId()||platform.entry!=Constant.context_template.auto_choose&&platform.entry!=Constant.context_template.skin_invite&&platform.entry!=Constant.context_template.home_share||(app.connect.pendingChallengePost=!0),platform.getContextId()&&"group_rank"==platform.entry&&(app.connect.pendingChallengePost=!0),app.http.reportSwitchGame()["catch"](function(t){}),app.http.reportFriends()["catch"](function(t){}),app.http.getRecommendGames()["catch"](function(t){}),app.http.reportIfFromSkinShare()["catch"](function(t){}),app.http.getSkinShareCount()["catch"](function(t){}),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,app.http.checkSuper()];case 2:return i.sent(),[3,4];case 3:return e=i.sent(),console.log("check super error"),[3,4];case 4:return app.model.isSuper&&this.showChoose(),[2]}})})},t.prototype.showChoose=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(i){switch(i.label){case 0:if(!(platform instanceof PlatformFB)||FBInstant.context.getID())return[3,5];app.busy(),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,platform.choose(["NEW_CONTEXT_ONLY"],!1,Constant.context_template.auto_choose)];case 2:return t=i.sent(),ShareHelper.sendGenericUpdate(Constant.context_template.auto_choose),[3,4];case 3:return e=i.sent(),[3,4];case 4:app.rmBusy(),i.label=5;case 5:return[2]}})})},t.prototype.watchContextIfChanged=function(){return __awaiter(this,void 0,void 0,function(){var t,e,i,a,s,o,r,n,h;return __generator(this,function(c){switch(c.label){case 0:t=FBInstant.player.getName(),e=app.model,c.label=1;case 1:if(i=FBInstant.context.getID(),!i)return[3,14];if(a="context."+i,i==this._lastContextId)return[3,9];console.log("context changes detected"),c.label=2;case 2:return c.trys.push([2,7,,8]),this._lastContextId=i,s=this,[4,FBInstant.getLeaderboardAsync(a)];case 3:return s._contextLeaderBoard=c.sent(),[4,this._contextLeaderBoard.getPlayerEntryAsync()];case 4:return o=c.sent(),e.lastContextualScore=o&&o.getScore()||1,console.log("seting score ..."+e.lastContextualScore),[4,this._contextLeaderBoard.setScoreAsync(e.lastContextualScore,"")];case 5:return c.sent(),console.log("sending update ..."),[4,FBInstant.updateAsync({action:"LEADERBOARD",name:a,text:t+" joined this game"})];case 6:return c.sent(),[3,8];case 7:return r=c.sent(),console.log("rank msg failed:",r),[3,8];case 8:console.log("all done!"),c.label=9;case 9:if(n=app.connect.getCurentScore()||0,!(n>e.lastContextualScore))return[3,14];c.label=10;case 10:return c.trys.push([10,13,,14]),console.log("score changed!"),e.lastContextualScore=n,console.log("seting score ..."),[4,this._contextLeaderBoard.setScoreAsync(e.lastContextualScore,"")];case 11:return c.sent(),console.log("sending update ..."),[4,FBInstant.updateAsync({action:"LEADERBOARD",name:a,text:t+" scored "+n,data:{ss:"hhh"}})];case 12:return c.sent(),console.log("all done!"),[3,14];case 13:return h=c.sent(),console.log("score changed update failed:",h),[3,14];case 14:return[4,waitAsync(3e3)];case 15:return c.sent(),[3,1];case 16:return[2]}})})},t}();__reflect(GameReadyCmd.prototype,"GameReadyCmd",["ICommand"]);var StartupCmd=function(){function t(){}return t.prototype.excute=function(t,e){app.registCommand(Constant.Notify.game_over,GameOverCmd),app.registCommand(Constant.Notify.game_ready,GameReadyCmd)},t}();__reflect(StartupCmd.prototype,"StartupCmd",["ICommand"]);var BusyIndicator=function(t){function e(){var e=t.call(this)||this;e.autoClose=!1;var i=RES.getRes("loading_indicator_png");return e._bmp=new egret.Bitmap(i),e._bmp.anchorOffsetX=i.textureWidth>>1,e._bmp.anchorOffsetY=i.textureHeight>>1,e.addChild(e._bmp),e.width=e.height=0,e}return __extends(e,t),e.prototype.$onAddToStage=function(e,i){t.prototype.$onAddToStage.call(this,e,i),egret.Tween.get(this._bmp,{loop:!0}).to({rotation:180},1e3).to({rotation:360},1e3)},e.prototype.$onRemoveFromStage=function(){t.prototype.$onRemoveFromStage.call(this),egret.Tween.removeTweens(this._bmp)},e}(egret.Sprite);__reflect(BusyIndicator.prototype,"BusyIndicator");var Constant;!function(t){var e;!function(t){t[t.startup=0]="startup",t[t.game_ready=1]="game_ready",t[t.game_over=2]="game_over"}(e=t.Notify||(t.Notify={})),t.context_template={heart:"heart",challenge:"challenge",challenge_result:"challenge_result",auto_choose:"auto_choose",skin_invite:"skin_invite",home_share:"home_share"},t.LogEvent={add_home_screen:"add_home_screen",game_loading:"game_loading",play_times:"play_times",level:"level",dead:"dead"},t.SAME_CONTEXT="SAME_CONTEXT",t.USER_INPUT="USER_INPUT"}(Constant||(Constant={})),Date.prototype.format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var i in e)new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[i]:("00"+e[i]).substr((""+e[i]).length)));return t},Date.week=function(t){void 0===t&&(t=2521);var e=-252e5,i=~~((Date.now()+e+864e5)/6048e5)-t-1;return i},Date.days=function(t){void 0===t&&(t=0);var e=-252e5,i=~~((Date.now()+e+864e5)/864e5)-t-1;return i},egret.DisplayObject.prototype.removeFromParent=function(){this.parent&&this.parent.removeChild(this)},String.prototype.substitute=function(t){return this.replace(/\{(.+?)\}/gi,function(e,i){return t[i]})},Array.prototype.random=function(t){if(void 0===t&&(t=!1),0==this.length)return null;var e=Math.floor(this.length*Math.random());this[e];return t&&this.splice(e,1),this[e]},Array.prototype.choice=function(t){if(0==this.length)return null;void 0==t&&(t=function(t){return t});for(var e=this.reduce(function(e,i){return e+t(i)},0)*Math.random(),i=this.length,a=0;i>a;a++){var s=t(this[a]);if(s>e)return this[a];e-=s}return this[i-1]},Array.prototype.unique=function(){for(var t=[],e=0;e<this.length;){this[e];t.indexOf(this[e])>=0?this.splice(e,1):t.push(this[e++])}return this},Array.prototype.sorton=function(t,e){return void 0===e&&(e=!0),this.sort(function(i,a){var s=i[t]||0,o=a[t]||0,r=s>o?1:o>s?-1:0;return e||(r*=-1),r})},Array.prototype.shuffle=function(){for(var t=this.length-1;t>0;t--){var e=Math.floor(Math.random()*(t+1));i=[this[e],this[t]],this[t]=i[0],this[e]=i[1]}return this;var i},Array.prototype.rm=function(t){for(var e="function"==typeof t?t:function(e){return e==t},i=0;i<this.length;){var a=this[i];if(e(a))return this.splice(i,1),!0;i++}return!1},Array.prototype.next=function(){return(void 0==this._iter_index||this._iter_index>=this.length)&&(this._iter_index=0),this[this._iter_index++]},Math.randInt=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=10),Math.floor(Math.random()*(e-t+1))+t},Math.clamp=function(t,e,i){return Math.max(e,Math.min(t,i))};var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,i){function a(a){e.call(i,a,t)}if(RES.hasRes(t)){var s=RES.getRes(t);s?a(s):RES.getResAsync(t,a,this)}else RES.getResByUrl(t,a,this,RES.ResourceItem.TYPE_IMAGE)
},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var Http=function(){function t(){}return t.prototype.encodeValue=function(t,e){return e instanceof Array?this.encodeArray(t,e):encodeURIComponent(t)+"="+encodeURIComponent(e)},t.prototype.encodeArray=function(t,e){return t?0==e.length?encodeURIComponent(t)+"=":e.map(function(e){return encodeURIComponent(t)+"="+encodeURIComponent(e)}).join("&"):""},t.prototype.toString=function(t){if(!t)return"";var e=[];for(var i in t)e.push(this.encodeValue(i,t[i]));return e.join("&")},t.prototype.request=function(t){var e=new XMLHttpRequest;e.responseType="arraybuffer"!==t.responseType?"text":"arraybuffer",e.timeout=t.timeout||0,e.onerror=function(i){console.log("[http]["+t.method+"][error] ["+e.status+":"+e.statusText+"] "+t.url),t.onerror&&t.onerror(i)},e.onabort=function(e){console.log("[http]["+t.method+"][abort] "+t.url),t.onabort&&t.onabort()},e.onprogress=function(e){e&&e.lengthComputable&&t.onprogress&&t.onprogress(e.loaded/e.total)},e.onload=function(i){var a=void 0!==e.status?e.status:200;if(200===a||204===a||0===a){var s=e.response||e.responseText;console.log("[http]["+t.method+"][loaded] "+t.url+":"+s),t.onload(s)}else console.log("[http]["+t.method+"][error] ["+e.status+":"+e.statusText+"] "+t.url),t.onerror&&t.onerror(i)};var i=this.toString(t.data),a=t.url;if("GET"==t.method&&i&&(a=t.url+"?"+i,i=null),e.open(t.method,a,!0),"POST"==t.method&&(t.rawData?(e.setRequestHeader("Content-Type","application/json"),i=JSON.stringify(t.rawData)):e.setRequestHeader("Content-Type","application/x-www-form-urlencoded")),t.headers)for(var s=0;s<t.headers.length;s++)e.setRequestHeader(t.headers[s++],t.headers[s]);return e.send(i),console.log("[http]["+t.method+"] "+t.url+":"+JSON.stringify(t.data)),e},t.prototype.post=function(t,e){var i=this;return new Promise(function(a,s){i.request({url:t,data:e,method:"POST",onload:a,onerror:s,ontimeout:s})})},t.prototype.get=function(t,e){var i=this;return new Promise(function(a,s){i.request({url:t,data:e,method:"GET",onload:a,onerror:s,ontimeout:s})})},t}();__reflect(Http.prototype,"Http");var Storager=function(){function t(t){void 0===t&&(t="global"),this.id=t}return t.prototype.set=function(t,e){"object"==typeof e&&(e=JSON.stringify(e)),egret.localStorage.setItem(this.id+"_"+t,e)},t.prototype.get=function(t,e){return egret.localStorage.getItem(this.id+"_"+t)||e||null},t.prototype.rm=function(t){egret.localStorage.removeItem(this.id+"_"+t)},t.prototype.json=function(t,e){void 0===e&&(e=null);var i,a=egret.localStorage.getItem(this.id+"_"+t);try{i=JSON.parse(a)}catch(s){$dev&&console.log("json failed")}return i||e||null},t.clear=function(){egret.localStorage.clear()},t}();__reflect(Storager.prototype,"Storager");var ad;!function(t){var e=function(t){function e(e,i){void 0===i&&(i=!0);var a=t.call(this)||this;return a.ids=e,a._adInstance=null,a._isStart=!1,a._watch_count=0,a.suportAD()&&i&&a.preloadAD(),a}return __extends(e,t),e.prototype.suportAD=function(){throw"should be implemented in subclass!"},e.prototype.getName=function(){throw"should be implemented in subclass!"},e.prototype.getADInstanceAsync=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,null]})})},e.prototype.hasAD=function(){return!!this._adInstance},e.prototype.preloadAD=function(){return __awaiter(this,void 0,void 0,function(){var t,e,i,a,s,o,r,n,h,c=this;return __generator(this,function(l){switch(l.label){case 0:if(this._isStart)return[2];this._isStart=!0,t="",e=this.ids.concat(),i=0,a=null,l.label=1;case 1:if(a)return[3,24];s=i++%e.length,l.label=2;case 2:return l.trys.push([2,22,,23]),[4,this.getADInstanceAsync(e[s])];case 3:a=l.sent(),t="",console.log(this.getName()+" create suc:"+s),o=0,l.label=4;case 4:if(this._adInstance||!a)return[3,21];l.label=5;case 5:return l.trys.push([5,14,,20]),[4,a.loadAsync()];case 6:l.sent(),t="",this._adInstance=a,this.emit("ad_ready"),console.log(this.getName()+" load suc"),l.label=7;case 7:return[4,new Promise(function(t,e){return c.once("show_ad",t)})];case 8:l.sent(),l.label=9;case 9:return l.trys.push([9,11,,12]),[4,this._adInstance.showAsync()];case 10:return l.sent(),t="",console.log(this.getName()+" show suc"),this.emit("show_result",{result:!0,level:s}),i=0,this._adInstance=null,a=null,[3,13];case 11:return r=l.sent(),console.log(this.getName()+" show failed,"+r.code+","+r.message),this.emit("ad_failed",{type:this.getName(),phase:2,code:r.code,msg:r.message,lastError:t}),t=r.code+":2",this.emit("show_result",{result:!1,err:r,level:s}),"ADS_NOT_LOADED"==r.code?(this._adInstance=null,o=0,[3,13]):"PENDING_REQUEST"!=r.code&&"UNKNOWN"!=r.code&&"RATE_LIMITED"!=r.code?(this._adInstance=null,a=null,[3,13]):[3,12];case 12:return[3,7];case 13:return[3,20];case 14:return n=l.sent(),console.log(this.getName()+" load failed,"+n.code+","+n.message),this.emit("ad_failed",{type:this.getName(),phase:1,code:n.code,msg:n.message,lastError:t}),t=n.code+":1","ADS_FREQUENT_LOAD"!=n.code?[3,16]:[4,new Promise(function(t){return setTimeout(t,18e5)})];case 15:return l.sent(),[3,21];case 16:return"INVALID_PARAM"!=n.code?[3,17]:(a=null,[3,21]);case 17:return[4,new Promise(function(t){return setTimeout(t,31e3)})];case 18:l.sent(),l.label=19;case 19:return[3,20];case 20:return[3,4];case 21:return[3,23];case 22:return h=l.sent(),console.log(this.getName()+" create failed,"+h.code+","+s),this.emit("ad_failed",{type:this.getName(),phase:0,code:h.code,msg:h.message,lastError:t}),t=h.code+":0","CLIENT_UNSUPPORTED_OPERATION"==h.code||"ADS_TOO_MANY_INSTANCES"==h.code?[2]:[3,23];case 23:return[3,1];case 24:return[2]}})})},e.prototype.showAD=function(){return __awaiter(this,void 0,void 0,function(){var t,e=this;return __generator(this,function(i){switch(i.label){case 0:if(!this.hasAD())throw"no ad ready";return t=this.emit("show_ad"),t?[4,new Promise(function(t,i){e.once("show_result",function(a){e.emit("ad_show",{type:e.getName(),result:++e._watch_count,level:a.level}),a.result?t():i(a.err)})})]:[2];case 1:return i.sent(),[2]}})})},e}(Emiter);__reflect(e.prototype,"Advertise");var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.getName=function(){return"iad"},e.prototype.suportAD=function(){var t=FBInstant.getSupportedAPIs();return t.indexOf("getInterstitialAdAsync")>-1},e.prototype.getADInstanceAsync=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,FBInstant.getInterstitialAdAsync(t)];case 1:return[2,e.sent()]}})})},e}(e);t.InterstitialAD=i,__reflect(i.prototype,"ad.InterstitialAD");var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.getName=function(){return"rad"},e.prototype.suportAD=function(){var t=FBInstant.getSupportedAPIs();return t.indexOf("getRewardedVideoAsync")>-1},e.prototype.getADInstanceAsync=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,FBInstant.getRewardedVideoAsync(t)];case 1:return[2,e.sent()]}})})},e}(e);t.RewardedVideoAD=a,__reflect(a.prototype,"ad.RewardedVideoAD")}(ad||(ad={}));var GameConnect=function(t){function e(){var e=t.call(this)||this;return e._deadCount=0,e.pendingChallengePost=!1,e.Init(),e}return __extends(e,t),e.prototype.Init=function(){e.iPhoneH=0,e.iPhoneW=0,e.NowLanguage=1,e.OpenAdWall=0,e.ADVideoState=0,e.NowGate=1,this.LoginGame()},e.prototype.LoginGame=function(){this.RequestUserData()},e.prototype.RequestUserData=function(){var t=new egret.URLLoader,e=new egret.URLRequest;e.url="resource/assets/image/userinfo.json",t.load(e),t.addEventListener(egret.Event.COMPLETE,this.RequestUserEnd,this)},e.prototype.RequestUserEnd=function(t){for(var i=JSON.parse(t.currentTarget.data),a=0;5>a;a++){var s=Math.floor(80*Math.random()+1);e.UserName[a]=i[s].nickName,e.UserCountry[a]=i[s].Country}},e.prototype.onGetIOError=function(t){console.log("get error : "+t)},e.prototype.GetEndUserName=function(t){return e.UserName[t]},e.prototype.GetEndUserCountry=function(t){return e.UserCountry[t]},e.prototype.OpenWallOrNot=function(){return e.OpenAdWall},e.prototype.GetiPhoneH=function(){var t=egret.MainContext.instance.stage.stageHeight;return(t-1136)/2},e.prototype.GetiPhoneW=function(){var t=egret.MainContext.instance.stage.stageWidth;return(t-640)/2},e.prototype.GetLanguage=function(){return e.NowLanguage},e.prototype.OpenUrl=function(t){},e.prototype.ShareGame=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return ShareHelper.sendGenericUpdate(Constant.context_template.home_share,null,!0),[2]})})},e.prototype.ChallengeGame=function(t){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(i){switch(i.label){case 0:return[4,platform.createCtx(t)];case 1:return e=i.sent(),this.pendingChallengePost=!0,[2,e]}})})},e.prototype.ShowADChaping=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return console.log("开启插屏广告"),this.hasPurchasedRemoveAD()?[2]:platform.hasIAD()?[4,platform.showIAD()]:[2];case 1:return t.sent(),[2]}})})},e.prototype.ShowADVideo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return console.log("开启视频广告"),e.ADVideoState=-1,platform.hasRAD()?platform.showRAD().then(function(){e.ADVideoState=1})["catch"](function(){e.ADVideoState=0}):e.ADVideoState=0,[2]})})},e.prototype.GetADVideoState=function(){return e.ADVideoState},e.prototype.SignInGameCenter=function(){console.log("登录排行榜")},e.prototype.UpLoadScore=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return console.log("上传分数"),[4,platform.setHighScore(t)];case 1:return e.sent(),[2]}})})},e.prototype.GetMyID=function(){return platform.userInfo.id},e.prototype.GetMyName=function(){return platform.userInfo.name},e.prototype.GetMyImage=function(){return platform.userInfo.photo},e.prototype.GetFriendRankList=function(){return platform.getWorldFriendEntries()},e.prototype.GetWorldRankList=function(){return platform.getWorldEntries()},e.prototype.GetUserName=function(t){return 1==t?this.GetWorldRankList().map(function(t){return t.name}):this.GetFriendRankList().map(function(t){return t.name})},e.prototype.GetUserID=function(t){return 1==t?this.GetWorldRankList().map(function(t){return t.id}):this.GetFriendRankList().map(function(t){return t.id})},e.prototype.GetUserImage=function(t){return 1==t?this.GetWorldRankList().map(function(t){return t.photo}):this.GetFriendRankList().map(function(t){return t.photo})},e.prototype.GetUserScore=function(t){return 1==t?this.GetWorldRankList().map(function(t){return t.score}):this.GetFriendRankList().map(function(t){return t.score})},e.prototype.canaAutoEnterGame=function(){return!platform.isNewPlayer&&!!platform.getContextId()},e.prototype.onGameStart=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},e.prototype.readData=function(){var t=platform.remoteData.game_db||{};return t},e.prototype.setData=function(t){platform.remoteData.game_db=t,platform.syncRemoteData()},e.prototype.showMessage=function(t){app.toast(t)},e.prototype.onGameOver=function(t){app.notify(Constant.Notify.game_over,t)},e.prototype.onDead=function(t){platform.log(Constant.LogEvent.dead,{result:++this._deadCount})},e.prototype.setCurentScore=function(t){e.NowGate=t},e.prototype.getCurentScore=function(){var t=e.NowGate;return t},e.prototype.getInviteCount=function(){return console.log("invite people："+app.model.invite_skin_share_count),app.model.invite_skin_share_count},e.prototype.pullInviteCount=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,app.http.getSkinShareCount()];case 1:return t.sent(),[2]}})})},e.prototype.inviteForSkin=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return platform.remoteData.skin_invites||(platform.remoteData.skin_invites=[]),[4,platform.choose(["NEW_CONTEXT_ONLY"],!0,Constant.context_template.skin_invite)];case 1:return t=e.sent(),t&&ShareHelper.sendGenericUpdate(Constant.context_template.skin_invite,{invite_skin_data:{playerId:platform.userInfo.id,skinId:1}}),[2,!0]}})})},e.prototype.suportIAP=function(){return!1},e.prototype.purchaseRemoveAD=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return[4,platform.purchaseAsync("1")];case 1:return t=e.sent(),[2,t]}})})},e.prototype.hasPurchasedRemoveAD=function(){return platform.hasPurchased("1")},e.prototype.addShortcut=function(){return __awaiter(this,void 0,void 0,function(){var t,e,i;return __generator(this,function(a){switch(a.label){case 0:return console.log("addShortcut...."),console.log(platform.remoteData.add_hs_refuse_count),console.log(platform.remoteData.add_hs),console.log(platform.canAdd2HomeScreen()),platform.remoteData.add_hs_refuse_count>=2?[2]:0!=platform.remoteData.add_hs?[2]:(t=platform.canAdd2HomeScreen())?(e=platform.playerType,platform.log(Constant.LogEvent.add_home_screen,{user_type:e,result:-1}),[4,platform.add2HomeScreen()]):[2];case 1:return i=a.sent(),i.res?(platform.remoteData.add_hs=1,platform.log(Constant.LogEvent.add_home_screen,{user_type:e,result:1})):(i.code==Constant.USER_INPUT?platform.remoteData.add_hs_refuse_count++:platform.remoteData.add_hs=2,platform.log(Constant.LogEvent.add_home_screen,{user_type:e,result:0,code:i.code})),platform.syncRemoteData(),[2]}})})},e.prototype.getLeaderboardByLevel=function(t){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(i){switch(i.label){case 0:this.leaderBoad&&this.leaderBoad.name=="level_l_"+t||(this.leaderBoad=new LeaderBoard("level_l_"+t,"LOWER_IS_BETTER",999),this.leaderBoad.setFriends(platform.getFriends())),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.leaderBoad.initializeAsync(!1,!0)];case 2:return i.sent(),[3,4];case 3:return e=i.sent(),console.log("fuck",e),[3,4];case 4:return[2,this.leaderBoad]}})})},e.prototype.onLevelStart=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return console.log("请求"+t+"关数据"),platform instanceof PlatformFB?[4,this.getLeaderboardByLevel(t)]:[2];case 1:return e.sent(),[2]}})})},e.prototype.getLevelRanks=function(t,e,i){return void 0===i&&(i=!1),__awaiter(this,void 0,void 0,function(){var a,s;return __generator(this,function(o){switch(o.label){case 0:return console.log("得到"+t+"关数据"),platform instanceof PlatformFB?[4,this.getLeaderboardByLevel(t)]:(platform.setHighScore(e),[2,platform.getWorldFriendEntries()]);case 1:return a=o.sent(),i||this.leaderBoad.setScore(e),s=a.getConnectedPlayerEntries(),console.log("getLevelRanks",s.length),[2,s.length>0?s:null]}})})},e.prototype.getVersion=function(){return $T_GAME_VERSION},e.prototype.challengePost=function(t,e){ShareHelper.challengePost(t,e)},e.prototype.challengeShare=function(t,e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(i){switch(i.label){case 0:return[4,ShareHelper.challengeShare(t,e)];case 1:return i.sent(),[2]}})})},e.prototype.getChallengeLevel=function(){return platform.challenge_info&&platform.challenge_info.level||-1},e.prototype.hasContext=function(){return!!platform.getContextId()},e.prototype.canAutoChallengePost=function(){var t=this.pendingChallengePost;return console.log("canAutoChallengePost",t),this.pendingChallengePost=!1,t},e.prototype.getRecommendGamesAsync=function(){return __awaiter(this,void 0,void 0,function(){var t=this;return __generator(this,function(e){switch(e.label){case 0:return app.model.recommendGames?[3,2]:[4,new Promise(function(e){app.event.on("game_recommend_ready",function(){e()},t)})];case 1:e.sent(),e.label=2;case 2:return[2,app.model.recommendGames]}})})},e.prototype.onRecommendGameTapped=function(t){platform.switchGame(t)},e.prototype.getLoginDays=function(){return platform.remoteData.login_day_count},e.prototype.isSuper=function(){return app.model.isSuper},e.UserName=[],e.UserCountry=[],e}(eui.Component);__reflect(GameConnect.prototype,"GameConnect");var HttpService=function(){function t(){this.game_id=49,this.host="https://fb-api.capjoy.com",this._server=new Http}return Object.defineProperty(t.prototype,"server",{get:function(){return this._server},enumerable:!0,configurable:!0}),t.prototype.reportFriends=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return platform instanceof PlatformFB&&platform.getFriends().length>0?(t={action:"friends",playerId:platform.getPlayerId(),payload:platform.getFriends().map(function(t){return t.getID()})},[4,this._server.post("https://fb-bot.capjoy.com/api/v0/upload_"+this.game_id,{data:JSON.stringify(t)})]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},t.prototype.reportSwitchGame=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return platform.switchGameInfo&&platform.isNewPlayer?[4,this._server.post(this.host+"/fbapi/v0/ads/report/"+platform.switchGameInfo.appId+"/"+platform.appId+"/"+platform.getPlayerId(),{v:$T_GAME_VERSION})["catch"](function(t){return console.log(t)})]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.checkSuper=function(){return __awaiter(this,void 0,void 0,function(){var t,e,i,a,s;return __generator(this,function(o){switch(o.label){case 0:t=this.host+"/fbapi/v0/testCase_"+this.game_id,o.label=1;case 1:return o.trys.push([1,3,,4]),a=(i=JSON).parse,[4,this._server.post(t,{nickname:platform.userInfo.name,locale:platform instanceof PlatformFB?FBInstant.getLocale():"en_US",timezoneOffset:(new Date).getTimezoneOffset(),playerId:platform.getPlayerId(),appId:platform.appId})];case 2:return e=a.apply(i,[o.sent()]),0==e.error&&(app.model.isSuper=1==+e.data),[3,4];case 3:return s=o.sent(),console.log("check super failed"),[3,4];case 4:return[2]}})})},t.prototype.getRecommendGames=function(){return __awaiter(this,void 0,void 0,function(){var t,e,i,a,s;return __generator(this,function(o){switch(o.label){case 0:return t=this.host+"/fbapi/v0/getRecommendGames",e={playerId:platform.userInfo.id,nickname:platform.userInfo.name,appId:platform.appId,locale:platform instanceof PlatformFB?FBInstant.getLocale():"en_US",deviceOS:platform instanceof PlatformFB?FBInstant.getPlatform():"IOS",timezoneOffset:(new Date).getTimezoneOffset()},s=(a=JSON).parse,[4,this._server.post(t,e)];case 1:return i=s.apply(a,[o.sent()]),0==i.error?(app.model.recommendGames=i.data&&i.data.ads||null,app.event.emit("game_recommend_ready")):console.log("getRecommendGames  error:",i.msg),[2]}})})},t.prototype.reportIfFromSkinShare=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return platform.invite_skin_data&&platform.isNewPlayer?(t=this.host+"/api/game/v0/shareUpdate_"+this.game_id,[4,this._server.post(t,{v:$T_GAME_VERSION,playerId:platform.getPlayerId(),sharePlayerId:platform.invite_skin_data.playerId,type:"share"})["catch"](function(t){return console.log(t)})]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},t.prototype.getSkinShareCount=function(){return __awaiter(this,void 0,void 0,function(){var t,e,i,a,s;return __generator(this,function(o){switch(o.label){case 0:t=0,o.label=1;case 1:return o.trys.push([1,3,,4]),e=this.host+"/api/game/v0/shareGet_"+this.game_id,[4,this._server.post(e,{v:$T_GAME_VERSION,playerId:platform.getPlayerId(),type:"share"})];case 2:return i=o.sent(),a=JSON.parse(i),t=+a.data.count||0,[3,4];case 3:return s=o.sent(),console.log(s),[3,4];case 4:return app.model.invite_skin_share_count=t,[2]}})})},t}();__reflect(HttpService.prototype,"HttpService");var LeaderBoard=function(t){function e(e,i,a){void 0===i&&(i="HIGHER_IS_BETTER"),void 0===a&&(a=0);var s=t.call(this)||this;return s.name=e,s.sortType=i,s.defaultScore=a,s._selfEntry=null,s._entries=null,s._friendEntries=null,s._preInitialized=!1,s._preInitializing=!1,s._initialized=!1,s._initializing=!1,s._friends=null,s}return __extends(e,t),e.prototype.preInitializeAsync=function(){return __awaiter(this,void 0,void 0,function(){var t,e,i=this;return __generator(this,function(a){switch(a.label){case 0:return this._preInitialized?[2]:this._preInitializing?[4,new Promise(function(t){i.once("preInitialized",t)})]:[3,2];case 1:return a.sent(),[2];case 2:return this._preInitializing=!0,t=this,[4,FBInstant.getLeaderboardAsync(this.name)];case 3:return t._leaderboard=a.sent(),[4,this._leaderboard.getPlayerEntryAsync()];case 4:return e=a.sent(),e?this._selfEntry=RankPlayerVO.createFromLeaderBoardEntry(e):this._selfEntry=RankPlayerVO.createFromContextPlayer(FBInstant.player),this._preInitialized=!0,this._preInitializing=!1,this.emit("preInitialized"),console.log("leaderboard preInitialized",this.name),[2]}})})},Object.defineProperty(e.prototype,"initialized",{get:function(){return this.initialized},enumerable:!0,configurable:!0}),e.prototype.initializeAsync=function(t,e){return __awaiter(this,void 0,void 0,function(){var i,a,s,o=this;return __generator(this,function(r){switch(r.label){case 0:return this._initialized?[2]:this._initializing?[4,new Promise(function(t){o.once("initialized",t)})]:[3,2];case 1:return r.sent(),[2];case 2:return this._initializing=!0,[4,this.preInitializeAsync()];case 3:r.sent(),r.label=4;case 4:return r.trys.push([4,9,,10]),i=t,i?[4,this.getEntriesAsync()]:[3,6];case 5:i=r.sent(),r.label=6;case 6:return console.log("rest..."),a=e,a?[4,this.getConnectedPlayerEntriesAsync()]:[3,8];case 7:a=r.sent(),r.label=8;case 8:return[3,10];case 9:return s=r.sent(),console.log("entries wrong.",s),[3,10];case 10:return this._initialized=!0,this._initializing=!1,this.emit("initialized"),console.log("leaderboard initialized",this.name),[2]}})})},e.prototype.getEntriesAsync=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(i){switch(i.label){case 0:return[4,this.preInitializeAsync()];case 1:return i.sent(),this._entries?[3,3]:(t=this._leaderboard,console.log("leaderboard",null==t),[4,t.getEntriesAsync(99,0)]);case 2:e=i.sent(),console.log("arr",e),this._entries=e.map(function(t){return RankPlayerVO.createFromLeaderBoardEntry(t)}),i.label=3;case 3:return[2,this._entries||[]]}})})},e.prototype.getEntries=function(){return this._entries||[]},e.prototype.getConnectedPlayerEntriesAsync=function(){return __awaiter(this,void 0,void 0,function(){var t,e,i,a;return __generator(this,function(s){switch(s.label){case 0:return[4,this.preInitializeAsync()];case 1:return s.sent(),this._friendEntries?[3,3]:(t=this._leaderboard,[4,t.getConnectedPlayerEntriesAsync(100,0)]);case 2:e=s.sent(),this._friendEntries=e.map(function(t){return RankPlayerVO.createFromLeaderBoardEntry(t)}),i=FBInstant.player.getID(),a=this._friendEntries.findIndex(function(t){return t.id==i}),-1==a&&(this._friendEntries.push(RankPlayerVO.createFromContextPlayer(FBInstant.player)),this._friendEntries.forEach(function(t,e){return t.originalRank=e+1})),this.bindFriends(),s.label=3;case 3:return[2,this._friendEntries||[]]}})})},e.prototype.getConnectedPlayerEntries=function(){return this._friendEntries||[]},e.prototype.refreshRankList=function(t,e,i){var a=FBInstant.player.getID(),s=t.findIndex(function(t){return t.id==a});if(-1!=s){var o=t[s];o.score=e,o.extraData=i,t.sorton("score","LOWER_IS_BETTER"==this.sortType),t.forEach(function(t,e){return t.originalRank=e+1})}else if(t.length>0&&e>t[t.length-1].score){var o=RankPlayerVO.createFromContextPlayer(FBInstant.player);o.score=e,o.extraData=i,t.push(o),t.sorton("score","LOWER_IS_BETTER"==this.sortType),t.forEach(function(t,e){return t.originalRank=e+1})}},e.prototype.setScore=function(t,e){var i=this;if(!this._preInitialized)throw"doesn't preInitialized";if(!(t<this._selfEntry.score)){this._selfEntry.score=t,this._selfEntry.extraData=e,this._entries&&this.refreshRankList(this._entries,t,e),this._friendEntries&&this.refreshRankList(this._friendEntries,t,e);var a=function(){return __awaiter(i,void 0,void 0,function(){var i;return __generator(this,function(a){switch(a.label){case 0:return[4,this.preInitializeAsync()];case 1:return a.sent(),console.log("setScoreAsync",t),[4,this._leaderboard.setScoreAsync(t,JSON.stringify(e))];case 2:return i=a.sent(),this._selfEntry=RankPlayerVO.createFromLeaderBoardEntry(i),console.log("setScoreAsync suc"),[2]}})})};a()}},e.prototype.getScore=function(){if(!this._preInitialized)throw"doesn't preInitialized";return this._selfEntry.score},e.prototype.setFriends=function(t){this._friends=t,this.bindFriends()},e.prototype.bindFriends=function(){if(this._friends&&this._friendEntries){var t={},e=this._friends;e.forEach(function(e){return t[e.getID()]=RankPlayerVO.createFromContextPlayer(e)}),t[FBInstant.player.getID()]=RankPlayerVO.createFromContextPlayer(FBInstant.player);var i=this._friendEntries;i.forEach(function(e){var i=t[e.id];i&&(e.name=i.name,e.photo=i.photo,delete t[e.id])});for(var a in t)i.push(t[a]),t[a].score=this.defaultScore;i.sorton("score","LOWER_IS_BETTER"==this.sortType),i.forEach(function(t,e){return t.originalRank=e+1})}},e.prototype.getSelfEntry=function(){return this._selfEntry},e}(Emiter);__reflect(LeaderBoard.prototype,"LeaderBoard");var PlatformDev=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.needAccount=function(){return!0},e.prototype.getWorldFriendEntries=function(){for(var t=[],e=1;t.length<1;){var i=new RankPlayerVO;i.id="player"+e,i.name="abc"+e,i.photo="https://scontent.xx.fbcdn.net/v/t1.0-1/p100x100/48085910_729877150720268_7517485265393287168_n.jpg?_nc_cat=107&_nc_ad=z-m&_nc_cid=0&_nc_ht=scontent.xx&oh=f64d74834d9acda51e9359186b6b55b9&oe=5C92D158",i.score=150+Math.floor(100*Math.random()),t.push(i),e++}return t},e}(BasePlatform);__reflect(PlatformDev.prototype,"PlatformDev");var PlatformFactory=function(){function t(){}return t.create=function(){return window.FBInstant?new PlatformFB:new PlatformDev},t}();__reflect(PlatformFactory.prototype,"PlatformFactory");var PlatformFB=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._canAdd2HomeScreen=!1,e._radID="198982457542294_238064930300713",e._isDateReady=!1,e._isFetching=!1,e._userInfo={name:"",id:"",photo:"",friends:[],lang:"en_US"},e._isPaymentsReady=!1,e}return __extends(e,t),e.prototype.getFriends=function(){return this._friends||[]},e.prototype.initSDK=function(){return __awaiter(this,void 0,void 0,function(){var t,e,i=this;return __generator(this,function(a){switch(a.label){case 0:return $T_FB_INITIALIZED?[3,2]:[4,FBInstant.initializeAsync()];case 1:a.sent(),a.label=2;case 2:return this._worldRank=new LeaderBoard("world"),t=function(t){t.code&&(t.nick=FBInstant.player.getName(),i.log("platform_error",t))},this._worldRank.on("error",t,this),e=function(t){i.log("platform_api",t)},this._worldRank.on("api",e,this),this.fetchData(),[2]}})})},e.prototype.fetchData=function(){return __awaiter(this,void 0,void 0,function(){var t,e=this;return __generator(this,function(i){switch(i.label){case 0:return this._isDateReady?[2]:this._isFetching?[4,new Promise(function(t,i){e.once("data_ready",t)})]:[3,2];case 1:return i.sent(),[2];case 2:return i.trys.push([2,4,,5]),this._isFetching=!0,[4,this.initRemoteData()];case 3:return i.sent(),this._isDateReady=!0,[3,5];case 4:return t=i.sent(),console.log("fetchData error",t.code||t.msg||t),[3,5];case 5:return this._isFetching=!1,this.emit("data_ready"),[2]}})})},e.prototype.setLoadingProgress=function(t){$T_PROGRESS=Math.max($T_PROGRESS,100*t)},e.prototype.startGame=function(t,e){return __awaiter(this,void 0,void 0,function(){var i,a,s,o,r,n,h,c,l,u=this;return __generator(this,function(d){switch(d.label){case 0:return[4,FBInstant.startGameAsync()];case 1:return d.sent(),this.initPayments(),console.log("startGameAsync",Date.now()),i=FBInstant.getEntryPointData(),console.log("entry_data",JSON.stringify(i)),this.challenge_info=i&&i.challenge_info,this.challenge_info?[4,FBInstant.context.getPlayersAsync()]:[3,3];case 2:a=d.sent(),s={},o={},a.forEach(function(t){s[t.getID()]=t.getPhoto(),o[t.getID()]=t.getName()}),this.challenge_info.opponents.forEach(function(t){t.name=o[t.playerId]||"unkonw",t.photo=s[t.playerId]||"default-portrait_png"}),d.label=3;case 3:return this.switchGameInfo=i&&i.switchGameInfo||null,this.invite_skin_data=i&&i.invite_skin_data,this.invite_skin_data&&this.invite_skin_data.playerId==FBInstant.player.getID()&&(this.invite_skin_data=null),r=this,[4,FBInstant.player.getConnectedPlayersAsync()];case 4:r._friends=d.sent()||[],n=this._friends.map(function(t){return t.getID()}),this._userInfo={id:FBInstant.player.getID(),name:FBInstant.player.getName(),photo:FBInstant.player.getPhoto(),friends:n,lang:FBInstant.getLocale()},d.label=5;case 5:return d.trys.push([5,7,,8]),h=this,[4,FBInstant.canCreateShortcutAsync()];case 6:return h._canAdd2HomeScreen=d.sent(),[3,8];case 7:return c=d.sent(),console.log("canCreateShortcutAsync failed"),[3,8];case 8:return console.log("can add sc",this._canAdd2HomeScreen),[4,this.fetchData()];case 9:return d.sent(),this.isNewPlayer=void 0==this.$remoteData.gold,this.playerType=this.isNewPlayer?"new":"old",this.isNewPlayer&&(this.$remoteData.gold=0,this.$remoteData.add_hs=0,this.$remoteData.add_hs_refuse_count=0,this.$remoteData.context_ids=[],this.$remoteData.h_score=0,this.$remoteData.iap_inventory=[],this.$remoteData.game_db={},this.$remoteData.skin_invites=[],this.syncRemoteData()),this.$remoteData.last_login_dayth?Date.days()!=this.$remoteData.last_login_dayth&&(this.$remoteData.login_day_count++,this.$remoteData.last_login_dayth=Date.days(),this.syncRemoteData()):(this.$remoteData.last_login_dayth=Date.days(),this.$remoteData.login_day_count=1,this.syncRemoteData()),console.log("login_days"),this._worldRank.setFriends(this._friends),[4,this._worldRank.initializeAsync(!0,!0)];case 10:return d.sent(),FBInstant.setSessionData({nickname:this._userInfo.name,playerInfo:{head:this._userInfo.photo,lang:this._userInfo.lang,score:this.$remoteData.h_score}}),-1==FBInstant.getPlatform().indexOf("WEB")?(this.iad=new ad.InterstitialAD(t,!0),this.iad.on("ad_failed",function(t){return u.log("ad_failed",t)}),this.iad.on("ad_show",function(t){return u.log("iad_times",t)}),this.rad=new ad.RewardedVideoAD(e,!0),this.rad.on("ad_failed",function(t){return u.log("ad_failed",t)}),this.rad.on("ad_show",function(t){return u.log("rad_times",t)})):console.log("WEB & MOBILE_WEB ad skiped!"),l=i?i.type:"normal","normal"==l&&FBInstant.context.getID()&&(l="group_rank"),platform.log("entry_point",{entry:l,play_type:this.playerType}),this.entry=l,console.log("entry",l),[2]}})})},e.prototype.getWorldEntries=function(){return this._worldRank.getEntries()},e.prototype.getWorldEntriesAsync=function(){return this._worldRank.getEntriesAsync()},e.prototype.getWorldFriendEntries=function(){return this._worldRank.getConnectedPlayerEntries()},e.prototype.getWorldFriendEntriesAsync=function(){return this._worldRank.getConnectedPlayerEntriesAsync()},e.prototype.getHighScore=function(){return this._worldRank.getScore()||this.$remoteData.h_score},e.prototype.setHighScore=function(t,e){console.log("seth",t),t>this.$remoteData.h_score&&(this.$remoteData.h_score=t,this.syncRemoteData()),this._worldRank.setScore(t,e)},e.prototype.hasAD=function(){return this.hasRAD()||this.hasIAD()},e.prototype.showAD=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return this.hasRAD()?[4,this.showRAD()]:[3,2];case 1:return t.sent(),[3,4];case 2:return this.hasIAD()?[4,this.showIAD()]:[3,4];
case 3:t.sent(),t.label=4;case 4:return[2]}})})},e.prototype.hasRAD=function(){return this.rad&&this.rad.hasAD()},e.prototype.showRAD=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return t=this.rad,t?[4,this.rad.showAD()]:[3,2];case 1:t=e.sent(),e.label=2;case 2:return[2]}})})},e.prototype.hasIAD=function(){return this.iad&&this.iad.hasAD()},e.prototype.showIAD=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return t=this.iad,t?[4,this.iad.showAD()]:[3,2];case 1:t=e.sent(),e.label=2;case 2:return[2]}})})},e.prototype.getToken=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(i){return t=FBInstant.player.getName()||"unknow",e={playerId:this._signedPlayerInfo.getPlayerID(),signature:this._signedPlayerInfo.getSignature(),photo:FBInstant.player.getPhoto(),nickname:t},[2,e]})})},Object.defineProperty(e.prototype,"userInfo",{get:function(){return this._userInfo},enumerable:!0,configurable:!0}),e.prototype.getContextId=function(){return FBInstant.context.getID()},e.prototype.getPlayerId=function(){return FBInstant.player.getID()},e.prototype.choose=function(t,e,i){return void 0===e&&(e=!1),void 0===i&&(i="default"),__awaiter(this,void 0,void 0,function(){var a;return __generator(this,function(s){switch(s.label){case 0:this.log("create_detail",{phase:0,place:i}),void 0==t&&(t=["NEW_CONTEXT_ONLY"]),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,FBInstant.context.chooseAsync({filters:t,minSize:e?3:2})];case 2:return s.sent(),[3,4];case 3:return a=s.sent(),console.log("choose result",JSON.stringify(a)),a.code==Constant.SAME_CONTEXT?[2,!0]:[2,!1];case 4:return this.log("create_detail",{phase:1,place:i}),this.emit("context_changed"),[2,!0]}})})},e.prototype.switchCtx=function(t,e){return void 0===e&&(e="default"),__awaiter(this,void 0,void 0,function(){var i;return __generator(this,function(a){switch(a.label){case 0:this.log("switch_detail",{phase:0,place:e}),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,FBInstant.context.switchAsync(t)];case 2:return a.sent(),[3,4];case 3:return i=a.sent(),console.log("switchCtx result",JSON.stringify(i)),i.code==Constant.SAME_CONTEXT?[2,!0]:[2,!1];case 4:return this.emit("context_changed"),this.log("switch_detail",{phase:1,place:e}),[2,!0]}})})},e.prototype.createCtx=function(t,e){return void 0===e&&(e="default"),__awaiter(this,void 0,void 0,function(){var i;return __generator(this,function(a){switch(a.label){case 0:this.log("create_detail",{phase:0,place:e}),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,FBInstant.context.createAsync(t)];case 2:return a.sent(),[3,4];case 3:return i=a.sent(),console.log("createCtx result",JSON.stringify(i)),i.code==Constant.SAME_CONTEXT?[2,!0]:[2,!1];case 4:return this.emit("context_changed"),this.log("create_detail",{phase:1,place:e}),[2,!0]}})})},e.prototype.getContextPlayers=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(i){switch(i.label){case 0:t=[],i.label=1;case 1:return i.trys.push([1,3,,4]),[4,FBInstant.context.getPlayersAsync()];case 2:return t=i.sent(),[3,4];case 3:return e=i.sent(),console.log("getContextPlayers error",JSON.stringify(e)),[3,4];case 4:return[2,t]}})})},e.prototype.switchGame=function(t,e){return __awaiter(this,void 0,void 0,function(){var i;return __generator(this,function(a){switch(a.label){case 0:return i={switchGameInfo:{appId:this.appId,appName:this.appName},type:this.appName},[4,FBInstant.switchGameAsync(t,Object.assign(i,e))];case 1:return a.sent(),[2]}})})},e.prototype.updateStatues=function(t,e){return __awaiter(this,void 0,void 0,function(){var i,a,s;return __generator(this,function(o){switch(o.label){case 0:i=0,o.label=1;case 1:if(!(3>i))return[3,8];a=!1,o.label=2;case 2:return o.trys.push([2,4,,5]),[4,FBInstant.updateAsync({action:e.action||"CUSTOM",cta:e.cta||"Play now",image:e.image,text:e.text||"Play with me!",template:e.template||"game_result",data:t,strategy:e.strategy||"IMMEDIATE",notification:e.notification||"NO_PUSH"})];case 3:return o.sent(),[3,5];case 4:return s=o.sent(),a=!0,console.log("updateStatues failed",i,JSON.stringify(s)),[3,5];case 5:return a?[4,waitAsync(500)]:[3,8];case 6:o.sent(),o.label=7;case 7:return i++,[3,1];case 8:return[2]}})})},e.prototype.share=function(t){return void 0===t&&(t={}),__awaiter(this,void 0,void 0,function(){var e,i;return __generator(this,function(a){switch(a.label){case 0:e=!0,a.label=1;case 1:return a.trys.push([1,3,,4]),console.log("share..."),[4,FBInstant.shareAsync({intent:"INVITE",image:t.img||RES.getRes("img_share_invite_png").toDataURL("image/png"),text:t.text||"Hey buddy, I found an awesome game. I'm sure you'll love it.",data:t.data||null})];case 2:return a.sent(),[3,4];case 3:return i=a.sent(),e=!1,[3,4];case 4:return[2,e]}})})},e.prototype.log=function(e,i,a){void 0===a&&(a=1),t.prototype.log.call(this,e,i,a),i=i||{},i._appVersion=$T_GAME_VERSION,i.playerId=FBInstant.player.getID(),i.playerName=FBInstant.player.getName(),FBInstant.logEvent(e,a,i)},e.prototype.getData=function(t){return __awaiter(this,void 0,void 0,function(){var e,i,a;return __generator(this,function(s){switch(s.label){case 0:e=null,i=5,s.label=1;case 1:if(e||!(i-->0))return[3,6];s.label=2;case 2:return s.trys.push([2,4,,5]),[4,FBInstant.player.getDataAsync(t)];case 3:return e=s.sent(),[3,5];case 4:return a=s.sent(),[3,5];case 5:return[3,1];case 6:return[2,e||{}]}})})},e.prototype.setData=function(t,e){return void 0===e&&(e=!1),__awaiter(this,void 0,void 0,function(){return __generator(this,function(i){switch(i.label){case 0:return[4,FBInstant.player.setDataAsync(t)];case 1:return i.sent(),e?[4,FBInstant.player.flushDataAsync()]:[3,3];case 2:i.sent(),i.label=3;case 3:return[2]}})})},e.prototype.canAdd2HomeScreen=function(){return this._canAdd2HomeScreen},e.prototype.add2HomeScreen=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,FBInstant.createShortcutAsync()];case 1:return e.sent(),[3,3];case 2:return t=e.sent(),console.log("add 2 Home Screen result",JSON.stringify(t)),[2,{res:!1,code:t.code}];case 3:return[2,{res:!0,code:""}]}})})},e.prototype.suportIAP=function(){return this._isPaymentsReady},e.prototype.getCatalogAsync=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(i){switch(i.label){case 0:t=null,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,FBInstant.payments.getCatalogAsync()];case 2:return t=i.sent(),console.log(JSON.stringify(t)),[3,4];case 3:return e=i.sent(),console.log("getCatalogAsync error:"+e.code||e.message||e),[3,4];case 4:return[2,t]}})})},e.prototype.purchaseAsync=function(t,e){return void 0===e&&(e=""),__awaiter(this,void 0,void 0,function(){var i,a,s,o,r;return __generator(this,function(n){switch(n.label){case 0:if(!this._isPaymentsReady)return[2,!1];i=!1,a=FBInstant.getPlatform(),this.log("buyProduct",{phase:0,productId:t,platform:a}),n.label=1;case 1:return n.trys.push([1,4,,5]),s={},s.productID=t,e&&(s.developerPayload=s.developerPayload),[4,FBInstant.payments.purchaseAsync(s)];case 2:return o=n.sent(),this.log("buyProduct",{phase:1,productId:t,platform:a}),[4,FBInstant.payments.consumePurchaseAsync(o.purchaseToken)];case 3:return n.sent(),this.addIAPInventroy(o.productID),this.log("buyProduct",{phase:2,productId:t,platform:a}),i=!0,[3,5];case 4:return r=n.sent(),console.log("purchaseAsync error:"+r.code||r.message||r),this.log("buyProduct",{phase:-1,productId:t,platform:a,code:r.code}),[3,5];case 5:return[2,i]}})})},e.prototype.checkPurchaseAsync=function(){return __awaiter(this,void 0,void 0,function(){var t,e,i,a,s,o,r;return __generator(this,function(n){switch(n.label){case 0:if(!this._isPaymentsReady)return[2,null];t=FBInstant.getPlatform(),e=null,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,FBInstant.payments.getPurchasesAsync()];case 2:return e=n.sent(),[3,4];case 3:return i=n.sent(),console.log("getPurchasesAsync error:"+i.code||i.message||i),[3,4];case 4:a=0,s=e,n.label=5;case 5:if(!(a<s.length))return[3,10];o=s[a],n.label=6;case 6:return n.trys.push([6,8,,9]),[4,FBInstant.payments.consumePurchaseAsync(o.purchaseToken)];case 7:return n.sent(),this.addIAPInventroy(o.productID),this.log("checkPurchase",{phase:1,productId:o.productID,platform:t}),[3,9];case 8:return r=n.sent(),console.log("checkPurchase error:"+r.code||r.message||r),this.log("checkPurchase",{phase:-1,platform:t,code:r.code}),[3,9];case 9:return a++,[3,5];case 10:return[2]}})})},e.prototype.initPayments=function(){var t=this;if(-1!=FBInstant.getSupportedAPIs().indexOf("payments.purchaseAsync")&&"IOS"!=FBInstant.getPlatform()){var e=FBInstant.getPlatform();this.log("paymentsReady",{phase:0,platform:e}),FBInstant.payments.onReady(function(){t._isPaymentsReady=!0,t.log("paymentsReady",{phase:1,platform:e}),t.checkPurchaseAsync()})}},e.prototype.addIAPInventroy=function(t){this.remoteData.iap_inventory||(this.remoteData.iap_inventory=[]),this.remoteData.iap_inventory.push(t),this.syncRemoteData()},e.prototype.hasPurchased=function(t){var e=this.remoteData.iap_inventory;return e&&-1!=e.indexOf(t)},e.prototype.checkBotSubscribe=function(){return __awaiter(this,void 0,void 0,function(){var t,e,i,a;return __generator(this,function(s){switch(s.label){case 0:t=null,s.label=1;case 1:return s.trys.push([1,5,,6]),[4,FBInstant.player.canSubscribeBotAsync()];case 2:return e=s.sent(),console.log("can subscribe:",e),e?(this.log("bot_subscribe",{result:-1}),[4,FBInstant.player.subscribeBotAsync()]):[3,4];case 3:i=s.sent(),this.log("bot_subscribe",{result:1}),t={result:!0},s.label=4;case 4:return[3,6];case 5:return a=s.sent(),this.log("bot_subscribe",{result:0}),t={result:!1,code:a.code,msg:a.message},[3,6];case 6:return[2,t]}})})},e}(BasePlatform);__reflect(PlatformFB.prototype,"PlatformFB");var RankPlayerVO=function(){function t(){this.name="",this.photo="",this.score=0,this.id="",this.tip="",this.originalRank=0}return Object.defineProperty(t.prototype,"skin",{get:function(){return this.extraData&&this.extraData.skin||1},enumerable:!0,configurable:!0}),t.prototype.toJSON=function(){return{id:this.id,score:this.score,extraData:this.extraData}},t.createFromJSON=function(e){var i=new t;if(i.id=e.id,i.score=e.score,"string"==typeof e.extraData)try{i.extraData=JSON.parse(e.extraData)}catch(a){}else i.extraData=e.extraData;return i},t.createFromLeaderBoardEntry=function(e){var i=e.getPlayer(),a=new t;a.name=i.getName(),a.photo=i.getPhoto(),a.id=i.getID(),a.score=e.getScore();var s=e.getExtraData();return a.extraData=s?JSON.parse(s):null,a.originalRank=e.getRank(),a},t.createFromContextPlayer=function(e){var i=new t;return i.name=e.getName(),i.photo=e.getPhoto(),i.id=e.getID(),i},t}();__reflect(RankPlayerVO.prototype,"RankPlayerVO");var CommonShareUI=function(t){function e(e){var i=t.call(this)||this;return i.data=e,i.initialized=!1,i._headReady=!1,i._bgReady=!1,i}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){var e=this;t.prototype.childrenCreated.call(this),this.initialized=!0,this.validateNow(),this.img_bg.source=null,this.img_bg.once(egret.Event.COMPLETE,function(){e._bgReady=!0,console.log("bg ready"),e.onReady()},this),this.img_bg.source=this.data.bg,this.node_head.once(egret.Event.COMPLETE,function(){e._headReady=!0,console.log("head ready"),e.onReady()},this),this.node_head.data={head:this.data.photo},console.log(this.data.bg,this.data.photo)},e.prototype.onReady=function(){this.initialized&&this._headReady&&this._bgReady&&(this.validateNow(),this.dispatchEventWith("ready_2_draw"))},e}(eui.Component);__reflect(CommonShareUI.prototype,"CommonShareUI",["eui.UIComponent","egret.DisplayObject"]);var HeadNode=function(t){function e(){var e=t.call(this)||this;return e._initialized=!1,e._data=null,e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this._initialized=!0,this.img_mask.visible=!0,this.img_icon.mask=this.img_mask,this.updateView()},e.prototype.updateView=function(){if(this._initialized&&this.data){this.img_icon.removeEventListener(egret.Event.COMPLETE,this.onHeadLoaded,this),this.img_icon.addEventListener(egret.Event.COMPLETE,this.onHeadLoaded,this);var t=this.data.head||"default-portrait_png";t!=this.img_icon.source?(this.img_icon.source=t,t instanceof egret.Texture&&this.img_icon.dispatchEventWith(egret.Event.COMPLETE)):this.img_icon.dispatchEventWith(egret.Event.COMPLETE)}},e.prototype.onHeadLoaded=function(t){this.dispatchEventWith(egret.Event.COMPLETE)},Object.defineProperty(e.prototype,"data",{get:function(){return this._data},set:function(t){this._data!=t&&(this._data=t,this.updateView())},enumerable:!0,configurable:!0}),e}(eui.Component);__reflect(HeadNode.prototype,"HeadNode",["eui.UIComponent","egret.DisplayObject"]);var ShareHelper;!function(t){function e(t){var e=this;return new Promise(function(i,a){t.once("ready_2_draw",function(){console.log("ready_2_draw");var e=new egret.RenderTexture;e.drawToTexture(t,new egret.Rectangle(0,0,600,314)),t.removeFromParent();var a=e.toDataURL("image/png");e.dispose(),i(a)},e),app.stage.addChildAt(t,0),t.y=app.stage.stageHeight+10})}function i(t,i,a){return __awaiter(this,void 0,void 0,function(){var s,o,r,n,h,c;return __generator(this,function(l){switch(l.label){case 0:return s={photo:FBInstant.player.getPhoto(),playerId:FBInstant.player.getID(),name:FBInstant.player.getName(),score:i},o={level:t,senderId:s.playerId,opponents:[s]},r=a?"Hey, "+a+", m":"M",n=r+"y score is "+i+"! Can you do better?",h=new ShareImage,[4,e(h.InitShareImage1(t,s.photo,i))];case 1:return c=l.sent(),console.log("r done"),o.opponents.forEach(function(t){delete t.photo,delete t.name}),[4,platform.updateStatues(Object.assign({type:"challenge"},{challenge_info:o}),{image:c,text:"[Level "+t+"] "+n,template:"challenge",cta:"CHALLENGE"})];case 2:return l.sent(),[2]}})})}function a(t,i,a,s){return __awaiter(this,void 0,void 0,function(){var o,r,n,h,c,l,u;return __generator(this,function(d){switch(d.label){case 0:return o={photo:FBInstant.player.getPhoto(),playerId:FBInstant.player.getID(),name:FBInstant.player.getName(),score:i},r=a||"you",n="you"==r?"you":"they",h=o.name+" has challenged "+r+", "+n+" are neck and neck!",o.score>s.score?h=o.name+" has failed to challenge "+r+", "+r+" win!":o.score<s.score&&(h=o.name+" has succeeded in passing "+r+". Come and challenge "+o.name),console.log("r image"),c=new ShareImage,[4,e(c.InitShareImage2(t,[o.photo,s.photo],[i,s.score]))];case 1:return l=d.sent(),console.log("r done"),u={level:t,senderId:o.playerId,opponents:[s,o]},u.opponents.forEach(function(t){delete t.photo,delete t.name}),[4,platform.updateStatues(Object.assign({type:"challenge_result"},{challenge_info:u}),{image:l,text:"[Level "+t+"] "+h,cta:"Play",template:"challenge_result"})];case 2:return d.sent(),[2]}})})}function s(t,i,a){return __awaiter(this,void 0,void 0,function(){var s,o,r,n,h,c,l;return __generator(this,function(u){switch(u.label){case 0:return s={photo:FBInstant.player.getPhoto(),playerId:FBInstant.player.getID(),name:FBInstant.player.getName(),score:i},o=a.find(function(t){return t.playerId==s.playerId}),o?s.score<o.score&&Object.assign(o,s):a.push(s),a.sorton("score",!0),a.forEach(function(t,e){return t.rankIndex=e}),r={level:t,senderId:s.playerId,opponents:a},n=a.findIndex(function(t){return t.playerId==s.playerId}),h=[],a.length<=6?h=a:6>n?h=a.slice(0,6):(h=a.slice(0,5),h.push(a[n]),n=5),c=new ShareImage,[4,e(c.InitShareImage(t,n,h))];case 1:return l=u.sent(),console.log("r done"),r.opponents.forEach(function(t){delete t.photo,delete t.name}),[4,platform.updateStatues(Object.assign({type:"challenge_leaderboard"},{challenge_info:r}),{image:l,text:"[Level "+t+"] "+platform.userInfo.name+" scored "+s.score+"s",cta:"Play",template:"challenge_leaderboard"})];case 2:return u.sent(),[2]}})})}function o(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(i){return t=[{playerId:"1838821619562248",name:"six",photo:"https://platform-lookaside.fbsbx.com/platform/instantgames/profile_pic.jpg?igpid=1999570236824571&height=256&width=256&ext=1549697352&ext=1549697352&hash=AeSu9vsQERgRqqFb",score:1.5},{playerId:"1999570236824571",name:"terran",photo:"https://platform-lookaside.fbsbx.com/platform/instantgames/profile_pic.jpg?igpid=1999570236824571&height=256&width=256&ext=1549697352&ext=1549697352&hash=AeSu9vsQERgRqqFb",score:1.8},{playerId:"1999570236824571",name:"terran",photo:"https://platform-lookaside.fbsbx.com/platform/instantgames/profile_pic.jpg?igpid=1999570236824571&height=256&width=256&ext=1549697352&ext=1549697352&hash=AeSu9vsQERgRqqFb",score:1.3},{playerId:"1999570236824571",name:"terran",photo:"https://platform-lookaside.fbsbx.com/platform/instantgames/profile_pic.jpg?igpid=1999570236824571&height=256&width=256&ext=1549697352&ext=1549697352&hash=AeSu9vsQERgRqqFb",score:2.3},{playerId:"1999570236824571",name:"terran",photo:"https://platform-lookaside.fbsbx.com/platform/instantgames/profile_pic.jpg?igpid=1999570236824571&height=256&width=256&ext=1549697352&ext=1549697352&hash=AeSu9vsQERgRqqFb",score:2.6},{playerId:"1999570236824571",name:"terran",photo:"https://platform-lookaside.fbsbx.com/platform/instantgames/profile_pic.jpg?igpid=1999570236824571&height=256&width=256&ext=1549697352&ext=1549697352&hash=AeSu9vsQERgRqqFb",score:.3}],e=new ShareImage,app.stage.addChild(e.InitShareImage(10,0,t)),[2]})})}function r(t,e){return __awaiter(this,void 0,void 0,function(){var o,r,n,h,c,l,u,d,l,p,g;return __generator(this,function(m){switch(m.label){case 0:return platform instanceof PlatformFB?"SOLO"==FBInstant.context.getType()?[2]:(o=app.model,r=platform.challenge_info,platform.challenge_info=null,n=FBInstant.context.isSizeBetween(3,null),h=n&&n.answer,[4,FBInstant.context.getPlayersAsync()]):[2];case 1:if(c=m.sent()||[],c=c.filter(function(t){return t.getID()!=FBInstant.player.getID()}),r&&!(r.senderId==platform.userInfo.id&&r.opponents.length<=2))return[3,6];l="",!h&&c.length>0&&(l=c[0].getName()),console.log("sending challenge"),m.label=2;case 2:return m.trys.push([2,4,,5]),[4,i(t,e,l)];case 3:return m.sent(),[3,5];case 4:return u=m.sent(),console.log("sending challenge failed",u),[3,5];case 5:return console.log("sending challenge done"),[3,16];case 6:if(1!=r.opponents.length)return[3,11];d=r.opponents[0],console.log("sending challenge result"),l=h?d.name:"",m.label=7;case 7:return m.trys.push([7,9,,10]),[4,a(t,e,l,d)];case 8:return m.sent(),[3,10];case 9:return p=m.sent(),console.log("sending challenge result failed",p),[3,10];case 10:return console.log("sending challenge result done"),[3,16];case 11:console.log("sending challenge leaderbooard"),m.label=12;case 12:return m.trys.push([12,14,,15]),[4,s(t,e,r.opponents)];case 13:return m.sent(),[3,15];case 14:return g=m.sent(),console.log("sending challenge leaderbooard failed",g),[3,15];case 15:console.log("sending challenge leaderbooard done"),m.label=16;case 16:return[2]}})})}function n(t,e){return __awaiter(this,void 0,void 0,function(){var i,a,s,o;return __generator(this,function(n){switch(n.label){case 0:i=new eui.Group,a=new eui.Image("bg_tips_png"),a.scale9Grid=new egret.Rectangle(27,50,5,5),s=new eui.Label("SENDING SCORE"),s.size=26,s.textColor=1191558,s.horizontalCenter=a.left=a.right=a.top=a.bottom=0,s.verticalCenter=-2,i.width=250,i.height=55,i.anchorOffsetX=i.width>>1,i.anchorOffsetY=i.height>>1,i.addChild(a),i.addChild(s),app.stage.addChild(i),i.x=app.stage.stageWidth>>1,i.y=200,egret.Tween.get(i).set({scaleX:.3,scaleY:.3}).to({scaleX:1,scaleY:1},300,egret.Ease.backOut),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,Promise.race([Promise.all([new Promise(function(t){return setTimeout(t,3e3)}),r(t,e)]),new Promise(function(t){return setTimeout(t,6e3)})])];case 2:return n.sent(),[3,4];case 3:return o=n.sent(),console.log("error",o),[3,4];case 4:return s.text="SCORE SENT",egret.Tween.get(i).wait(1e3).to({scaleX:0,scaleY:0},200,egret.Ease.backIn).call(function(t){t.removeFromParent()},null,[i]),egret.setTimeout(function(t){return t.removeFromParent()},null,1300,i),[2]}})})}function h(t){return __awaiter(this,void 0,void 0,function(){var e,i,a,s;return __generator(this,function(o){switch(o.label){case 0:if(!(platform instanceof PlatformFB))return[2];if("SOLO"==FBInstant.context.getType())return[2];e=app.model,i="context."+FBInstant.context.getID(),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,FBInstant.getLeaderboardAsync(i)];case 2:return a=o.sent(),a.setScoreAsync(t,""),[3,4];case 3:return s=o.sent(),[3,4];case 4:return[4,FBInstant.updateAsync({action:"LEADERBOARD",name:i})];case 5:return o.sent(),[2]}})})}function c(t,i,a){return void 0===a&&(a=!1),__awaiter(this,void 0,void 0,function(){var s,o,r,n;return __generator(this,function(h){switch(h.label){case 0:s=["Wow! I can't believe I did that.","God, what have I done?","Wow, it's cool.","Cool, that's great!","It's dangerous, but I enjoy it."],h.label=1;case 1:return h.trys.push([1,7,,8]),o=new CommonShareUI({bg:"bg-generic_"+Math.randInt(1,10)+"_jpg",photo:FBInstant.player.getPhoto()}),console.log("r img"),[4,e(o)];case 2:return r=h.sent(),console.log("r img done"),a?[3,4]:[4,platform.updateStatues(Object.assign({type:t},i),{text:s.random(),image:r,cta:"Play",template:t})];case 3:return h.sent(),[3,6];case 4:return[4,platform.share({img:r,text:s.random(),cta:"Play",data:Object.assign({type:t},i)})];case 5:h.sent(),h.label=6;case 6:return[3,8];case 7:return n=h.sent(),console.log("update Failed"+JSON.stringify(n)),[3,8];case 8:return[2]}})})}function l(t,i){return __awaiter(this,void 0,void 0,function(){var a,s,o,r,n,h;return __generator(this,function(c){switch(c.label){case 0:return a={photo:FBInstant.player.getPhoto(),playerId:FBInstant.player.getID(),name:FBInstant.player.getName(),score:i},s={level:t,senderId:a.playerId,opponents:[a]},o="My score is "+i+"s! Can you do better?",console.log("r image"),r=new ShareImage,[4,e(r.InitShareImage1(t,a.photo,i))];case 1:return n=c.sent(),console.log("r done"),s.opponents.forEach(function(t){delete t.photo,delete t.name}),[4,platform.share({img:n,text:"[Level "+t+"] "+o,cta:"CHALLENGE",data:Object.assign({type:"challenge"},{challenge_info:s})})];case 2:return h=c.sent(),[2,h]}})})}t.testl=o,t.challengePost=n,t.sendLeadboardUpdate=h,t.sendGenericUpdate=c,t.challengeShare=l}(ShareHelper||(ShareHelper={})),egret.Bitmap.prototype.pos=function(t,e,i,a){this.x=t,this.y=e,this.width=i,this.height=a,this.anchorOffsetX=i/2,this.anchorOffsetY=a/2};var ShareImage=function(t){function e(){var e=t.call(this)||this;return e.UserName=[],e.UserID=[],e.UserImage=[],e.UserScore=[],e}return __extends(e,t),e.prototype.InitShareImage1=function(t,e,i){return this.NumReady=1,this.NumReadyNow=0,this.CreateImageBg("share_challenge_bg1_png",t,1),this.CreateImageHead(300,100,e,1,0),this.CreateLabelScore(25,150,i,1),this},e.prototype.InitShareImage2=function(t,e,i){return this.NumReady=2,this.NumReadyNow=0,console.log("shareimgphoto:"+e),console.log("shareimgscore:"+i),this.CreateImageBg("share_challenge_bg2_png",t,2),i[0]<=i[1]?this.CreateImageKing(135,167,1):this.CreateImageKing(465,167,2),this.CreateLabelScore(135,280,i[0],2),this.CreateLabelScore(465,280,i[1],2),this.CreateImageHead(135,167,e[0],1,0),this.CreateImageHead(465,167,e[1],1,0),this},e.prototype.InitShareImage=function(t,e,i){var a=i.length;a>6&&(a=6),this.NumIndex=e,this.NumReady=a,this.NumReadyNow=0;var s=i.map(function(t){return t.name}),o=i.map(function(t){return t.photo}),r=i.map(function(t){return t.score});return this.CreateImageBg("share_challenge_bg3_png",t,3),3==a?(this.CreateImageKing(300,140,2),this.CreateLabelScore(120,280,r[1],3),this.CreateLabelScore(300,280,r[0],3),this.CreateLabelScore(480,280,r[2],3),this.CreateLabelName(120,238,s[1],1),this.CreateLabelName(300,238,s[0],0),this.CreateLabelName(480,238,s[2],2),this.CreateImageHead(120,140,o[1],3,2),this.CreateImageHead(300,140,o[0],2,1),this.CreateImageHead(480,140,o[2],3,3)):4==a?(this.CreateImageKing(90,140,2),this.CreateLabelScore(90,280,r[0],3),this.CreateLabelScore(230,280,r[1],3),this.CreateLabelScore(370,280,r[2],3),this.CreateLabelScore(510,280,r[3],3),this.CreateLabelName(90,238,s[0],0),this.CreateLabelName(230,238,s[1],1),this.CreateLabelName(370,238,s[2],2),this.CreateLabelName(510,238,s[3],3),this.CreateImageHead(90,140,o[0],2,1),this.CreateImageHead(230,140,o[1],3,2),this.CreateImageHead(370,140,o[2],3,3),this.CreateImageHead(510,140,o[3],3,4)):5==a?(this.CreateImageKing(80,140,2),this.CreateLabelScore(80,280,r[0],3),this.CreateLabelScore(340,90,r[1],3),this.CreateLabelScore(540,90,r[2],3),this.CreateLabelScore(340,220,r[3],3),this.CreateLabelScore(540,220,r[4],3),this.CreateLabelName(80,238,s[0],0),this.CreateLabelName(260,155,s[1],1),this.CreateLabelName(440,155,s[2],2),this.CreateLabelName(260,285,s[3],3),this.CreateLabelName(440,285,s[4],4),this.CreateImageHead(80,140,o[0],2,1),this.CreateImageHead(260,90,o[1],3,2),this.CreateImageHead(440,90,o[2],3,3),this.CreateImageHead(260,220,o[3],3,4),this.CreateImageHead(440,220,o[4],3,5)):(this.CreateImageKing(260,90,3),this.CreateLabelScore(160,90,r[1],3),this.CreateLabelScore(340,90,r[0],3),this.CreateLabelScore(520,90,r[2],3),this.CreateLabelScore(160,220,r[3],3),this.CreateLabelScore(340,220,r[4],3),this.CreateLabelScore(520,220,r[5],3),this.CreateLabelName(80,150,s[1],1),this.CreateLabelName(260,150,s[0],0),this.CreateLabelName(440,150,s[2],2),this.CreateLabelName(80,280,s[3],3),this.CreateLabelName(260,280,s[4],4),this.CreateLabelName(440,280,s[5],5),this.CreateImageHead(80,90,o[1],3,2),this.CreateImageHead(260,90,o[0],3,1),this.CreateImageHead(440,90,o[2],3,3),this.CreateImageHead(80,220,o[3],3,4),this.CreateImageHead(260,220,o[4],3,5),this.CreateImageHead(440,220,o[5],3,6)),this},e.prototype.CreateImageBg=function(t,e,i){var a=new egret.Bitmap(RES.getRes(t));this.addChild(a),a.pos(300,157,600,314);var s=new egret.TextField;this.addChild(s),s.textColor=16767243,s.size=35,s.bold=!0,s.text="LEVEL "+e,1==i?(s.x=25,s.y=50,s.anchorOffsetX=0):2==i?(s.x=300,s.y=50,s.size=40,s.anchorOffsetX=s.width/2):3==i&&(s.x=580,s.y=28,s.size=32,s.anchorOffsetX=s.width),s.anchorOffsetY=s.height/2},e.prototype.CreateImageKing=function(t,e,i){var a=new egret.Bitmap(RES.getRes("share_crown_png"));this.addChild(a),e-=1==i?105:2==i?85:55,a.pos(t,e,66,58)},e.prototype.CreateImageHead=function(t,e,i,a,s){var o=this,r=150;2==a?r=104:3==a&&(r=72);var n=new egret.Bitmap;this.addChild(n),n.pos(t,e,r,r),RES.getResByUrl(i,function(t){n.texture=t;var e=new egret.Shape;e.graphics.beginFill(255),e.graphics.drawCircle(n.x,n.y,r/2),e.graphics.endFill(),o.addChild(e),n.mask=e,o.NumReadyNow++,o.NumReadyNow>=o.NumReady&&(console.log("准备好绘图了"),o.dispatchEventWith("ready_2_draw"))},this,RES.ResourceItem.TYPE_IMAGE);var h=new egret.Bitmap(RES.getRes("share_challenge_head"+a+"_png"));if(this.addChild(h),h.pos(t,e,h.width,h.height),a>1){var c=new egret.TextField;this.addChild(c),c.x=t,2==a?c.y=e+53:c.y=e+30,c.bold=!0,c.text=s+"",c.size=22,c.anchorOffsetX=c.width/2,c.anchorOffsetY=c.height/2}},e.prototype.CreateLabelScore=function(t,e,i,a){var s=new egret.TextField;this.addChild(s),s.x=t,s.y=e,s.bold=!0,s.text=i+" s",1==a?(s.size=40,s.anchorOffsetX=0):2==a?(s.size=36,s.anchorOffsetX=s.width/2):(s.size=24,s.anchorOffsetX=s.width/2),s.anchorOffsetY=s.height/2},e.prototype.CreateLabelName=function(t,e,i,a){var s=new egret.TextField;this.addChild(s),s.x=t,s.y=e,s.text=i,s.size=17,s.width>130&&(s.width=130),s.wordWrap=!0,a==this.NumIndex&&(s.textColor=16767243),s.anchorOffsetX=s.width/2,s.anchorOffsetY=s.height/2},e}(egret.Sprite);__reflect(ShareImage.prototype,"ShareImage");